<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>External processing service (proto) &mdash; envoy 1.25.6-f89e0e documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/envoy.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" src="../../../../_static/jquery.js"></script>
        <script integrity="sha384-lSZeSIVKp9myfKbDQ3GkN/KHjUc+mzg17VKDN4Y2kUeBSJioB9QSM639vM9fuY//" src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="gRPC access log service (ALS) (proto)" href="../../accesslog/v3/als.proto.html" />
    <link rel="prev" title="Extension config discovery service (ECDS) (proto)" href="../../extension/v3/config_discovery.proto.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html">
            
              <img src="../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.25.6-f89e0e
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../config/config.html">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../service.html">Services</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../auth/v3/attribute_context.proto.html">Attribute context (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auth/v3/external_auth.proto.html">Authorization service (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../status/v3/csds.proto.html">Client status discovery service (CSDS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extension/v3/config_discovery.proto.html">Extension config discovery service (ECDS) (proto)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">External processing service (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accesslog/v3/als.proto.html">gRPC access log service (ALS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../health/v3/hds.proto.html">Health discovery service (HDS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../load_stats/v3/lrs.proto.html">Load reporting service (LRS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metrics/v3/metrics_service.proto.html">Metrics service (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ratelimit/v3/rls.proto.html">Rate limit service (RLS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rate_limit_quota/v3/rlqs.proto.html">Rate Limit Quota Service (RLQS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../runtime/v3/rtds.proto.html">Runtime discovery service (RTDS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/tap/v3/common.proto.html">Tap common configuration (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tap/v3/tap.proto.html">Tap sink service (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../trace/v3/trace_service.proto.html">Trace service (proto)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../common_messages/common_messages_xds.html">Common messages (XDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../version_history/version_history.html">Version history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../api/api.html">API</a></li>
          <li class="breadcrumb-item"><a href="../../../api.html">v3 API reference</a></li>
          <li class="breadcrumb-item"><a href="../../service.html">Services</a></li>
      <li class="breadcrumb-item active">External processing service (proto)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/api-v3/service/ext_proc/v3/external_processor.proto.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="external-processing-service-proto">
<span id="envoy-v3-api-file-envoy-service-ext-proc-v3-external-processor-proto"></span><h1>External processing service (proto)<a class="headerlink" href="#external-processing-service-proto" title="Permalink to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This API feature is currently work-in-progress. API features marked as work-in-progress are not considered stable, are not covered by the <a class="reference internal" href="../../../../intro/arch_overview/security/threat_model.html#arch-overview-threat-model"><span class="std std-ref">threat model</span></a>, are not supported by the security team, and are subject to breaking changes. Do not use this feature without understanding each of the previous points.</p>
</div>
<p>A service that can access and modify HTTP requests and responses
as part of a filter chain.
The overall external processing protocol works like this:</p>
<ol class="arabic simple">
<li><p>Envoy sends to the service information about the HTTP request.</p></li>
<li><p>The service sends back a ProcessingResponse message that directs Envoy
to either stop processing, continue without it, or send it the
next chunk of the message body.</p></li>
<li><p>If so requested, Envoy sends the server chunks of the message body,
or the entire body at once. In either case, the server sends back
a ProcessingResponse after each message it receives.</p></li>
<li><p>If so requested, Envoy sends the server the HTTP trailers,
and the server sends back a ProcessingResponse.</p></li>
<li><p>At this point, request processing is done, and we pick up again
at step 1 when Envoy receives a response from the upstream server.</p></li>
<li><p>At any point above, if the server closes the gRPC stream cleanly,
then Envoy proceeds without consulting the server.</p></li>
<li><p>At any point above, if the server closes the gRPC stream with an error,
then Envoy returns a 500 error to the client, unless the filter
was configured to ignore errors.</p></li>
</ol>
<p>In other words, the process is a request/response conversation, but
using a gRPC stream to make it easier for the server to
maintain state.</p>
<section id="service-ext-proc-v3-processingrequest">
<span id="envoy-v3-api-msg-service-ext-proc-v3-processingrequest"></span><h2>service.ext_proc.v3.ProcessingRequest<a class="headerlink" href="#service-ext-proc-v3-processingrequest" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L62">[service.ext_proc.v3.ProcessingRequest proto]</a></p>
<p>This represents the different types of messages that Envoy can send
to an external processing server.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;async_mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;request_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;request_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;request_trailers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_trailers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-async-mode">
<dt>async_mode</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Specify whether the filter that sent this request is running in synchronous
or asynchronous mode. The choice of synchronous or asynchronous mode
can be set in the filter configuration, and defaults to false.</p>
<ul class="simple">
<li><p>A value of <code class="docutils literal notranslate"><span class="pre">false</span></code> indicates that the server must respond
to this message by either sending back a matching ProcessingResponse message,
or by closing the stream.</p></li>
<li><p>A value of <code class="docutils literal notranslate"><span class="pre">true</span></code> indicates that the server must not respond to this
message, although it may still close the stream to indicate that no more messages
are needed.</p></li>
</ul>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers">
<dt>request_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httpheaders"><span class="std std-ref">service.ext_proc.v3.HttpHeaders</span></a>) Information about the HTTP request headers, as well as peer info and additional
properties. Unless <code class="docutils literal notranslate"><span class="pre">async_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the server must send back a
HeaderResponse message, an ImmediateResponse message, or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers">
<dt>response_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httpheaders"><span class="std std-ref">service.ext_proc.v3.HttpHeaders</span></a>) Information about the HTTP response headers, as well as peer info and additional
properties. Unless <code class="docutils literal notranslate"><span class="pre">async_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the server must send back a
HeaderResponse message or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body">
<dt>request_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httpbody"><span class="std std-ref">service.ext_proc.v3.HttpBody</span></a>) A chunk of the HTTP request body. Unless <code class="docutils literal notranslate"><span class="pre">async_mode</span></code> is true, the server must send back
a BodyResponse message, an ImmediateResponse message, or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body">
<dt>response_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httpbody"><span class="std std-ref">service.ext_proc.v3.HttpBody</span></a>) A chunk of the HTTP request body. Unless <code class="docutils literal notranslate"><span class="pre">async_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the server must send back
a BodyResponse message or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers">
<dt>request_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httptrailers"><span class="std std-ref">service.ext_proc.v3.HttpTrailers</span></a>) The HTTP trailers for the request path. Unless <code class="docutils literal notranslate"><span class="pre">async_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the server
must send back a TrailerResponse message or close the stream.</p>
<p>This message is only sent if the trailers processing mode is set to <code class="docutils literal notranslate"><span class="pre">SEND</span></code>.
If there are no trailers on the original downstream request, then this message
will only be sent (with empty trailers waiting to be populated) if the
processing mode is set before the request headers are sent, such as
in the filter configuration.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers">
<dt>response_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httptrailers"><span class="std std-ref">service.ext_proc.v3.HttpTrailers</span></a>) The HTTP trailers for the response path. Unless <code class="docutils literal notranslate"><span class="pre">async_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the server
must send back a TrailerResponse message or close the stream.</p>
<p>This message is only sent if the trailers processing mode is set to <code class="docutils literal notranslate"><span class="pre">SEND</span></code>.
If there are no trailers on the original downstream request, then this message
will only be sent (with empty trailers waiting to be populated) if the
processing mode is set before the request headers are sent, such as
in the filter configuration.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-processingresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-processingresponse"></span><h2>service.ext_proc.v3.ProcessingResponse<a class="headerlink" href="#service-ext-proc-v3-processingresponse" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L125">[service.ext_proc.v3.ProcessingResponse proto]</a></p>
<p>For every ProcessingRequest received by the server with the <code class="docutils literal notranslate"><span class="pre">async_mode</span></code> field
set to false, the server must send back exactly one ProcessingResponse message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;request_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;request_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;request_trailers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_trailers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;immediate_response&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;mode_override&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers">
<dt>request_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-headersresponse"><span class="std std-ref">service.ext_proc.v3.HeadersResponse</span></a>) The server must send back this message in response to a message with the
<code class="docutils literal notranslate"><span class="pre">request_headers</span></code> field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers">
<dt>response_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-headersresponse"><span class="std std-ref">service.ext_proc.v3.HeadersResponse</span></a>) The server must send back this message in response to a message with the
<code class="docutils literal notranslate"><span class="pre">response_headers</span></code> field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body">
<dt>request_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-bodyresponse"><span class="std std-ref">service.ext_proc.v3.BodyResponse</span></a>) The server must send back this message in response to a message with
the <code class="docutils literal notranslate"><span class="pre">request_body</span></code> field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body">
<dt>response_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-bodyresponse"><span class="std std-ref">service.ext_proc.v3.BodyResponse</span></a>) The server must send back this message in response to a message with
the <code class="docutils literal notranslate"><span class="pre">response_body</span></code> field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers">
<dt>request_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-trailersresponse"><span class="std std-ref">service.ext_proc.v3.TrailersResponse</span></a>) The server must send back this message in response to a message with
the <code class="docutils literal notranslate"><span class="pre">request_trailers</span></code> field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers">
<dt>response_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-trailersresponse"><span class="std std-ref">service.ext_proc.v3.TrailersResponse</span></a>) The server must send back this message in response to a message with
the <code class="docutils literal notranslate"><span class="pre">response_trailers</span></code> field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response">
<dt>immediate_response</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-immediateresponse"><span class="std std-ref">service.ext_proc.v3.ImmediateResponse</span></a>) If specified, attempt to create a locally generated response, send it
downstream, and stop processing additional filters and ignore any
additional messages received from the remote server for this request or
response. If a response has already started – for example, if this
message is sent response to a <code class="docutils literal notranslate"><span class="pre">response_body</span></code> message – then
this will either ship the reply directly to the downstream codec,
or reset the stream.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-mode-override">
<dt>mode_override</dt><dd><p>(<a class="reference internal" href="../../../extensions/filters/http/ext_proc/v3/processing_mode.proto.html#envoy-v3-api-msg-extensions-filters-http-ext-proc-v3-processingmode"><span class="std std-ref">extensions.filters.http.ext_proc.v3.ProcessingMode</span></a>) Override how parts of the HTTP request and response are processed
for the duration of this particular request/response only. Servers
may use this to intelligently control how requests are processed
based on the headers and other metadata that they see.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-httpheaders">
<span id="envoy-v3-api-msg-service-ext-proc-v3-httpheaders"></span><h2>service.ext_proc.v3.HttpHeaders<a class="headerlink" href="#service-ext-proc-v3-httpheaders" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L179">[service.ext_proc.v3.HttpHeaders proto]</a></p>
<p>This message is sent to the external server when the HTTP request and responses
are first received.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;end_of_stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-httpheaders-headers">
<dt>headers</dt><dd><p>(<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headermap"><span class="std std-ref">config.core.v3.HeaderMap</span></a>) The HTTP request headers. All header keys will be
lower-cased, because HTTP header keys are case-insensitive.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-httpheaders-end-of-stream">
<dt>end_of_stream</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) If true, then there is no message body associated with this
request or response.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-httpbody">
<span id="envoy-v3-api-msg-service-ext-proc-v3-httpbody"></span><h2>service.ext_proc.v3.HttpBody<a class="headerlink" href="#service-ext-proc-v3-httpbody" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L198">[service.ext_proc.v3.HttpBody proto]</a></p>
<p>This message contains the message body that Envoy sends to the external server.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;end_of_stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-httpbody-body">
<dt>body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bytes</a>)</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-httpbody-end-of-stream">
<dt>end_of_stream</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>)</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-httptrailers">
<span id="envoy-v3-api-msg-service-ext-proc-v3-httptrailers"></span><h2>service.ext_proc.v3.HttpTrailers<a class="headerlink" href="#service-ext-proc-v3-httptrailers" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L205">[service.ext_proc.v3.HttpTrailers proto]</a></p>
<p>This message contains the trailers.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;trailers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-httptrailers-trailers">
<dt>trailers</dt><dd><p>(<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headermap"><span class="std std-ref">config.core.v3.HeaderMap</span></a>)</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-headersresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-headersresponse"></span><h2>service.ext_proc.v3.HeadersResponse<a class="headerlink" href="#service-ext-proc-v3-headersresponse" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L212">[service.ext_proc.v3.HeadersResponse proto]</a></p>
<p>This message must be sent in response to an HttpHeaders message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-headersresponse-response">
<dt>response</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-commonresponse"><span class="std std-ref">service.ext_proc.v3.CommonResponse</span></a>)</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-trailersresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-trailersresponse"></span><h2>service.ext_proc.v3.TrailersResponse<a class="headerlink" href="#service-ext-proc-v3-trailersresponse" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L217">[service.ext_proc.v3.TrailersResponse proto]</a></p>
<p>This message must be sent in response to an HttpTrailers message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;header_mutation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-trailersresponse-header-mutation">
<dt>header_mutation</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-headermutation"><span class="std std-ref">service.ext_proc.v3.HeaderMutation</span></a>) Instructions on how to manipulate the trailers</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-bodyresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-bodyresponse"></span><h2>service.ext_proc.v3.BodyResponse<a class="headerlink" href="#service-ext-proc-v3-bodyresponse" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L223">[service.ext_proc.v3.BodyResponse proto]</a></p>
<p>This message must be sent in response to an HttpBody message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-bodyresponse-response">
<dt>response</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-commonresponse"><span class="std std-ref">service.ext_proc.v3.CommonResponse</span></a>)</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-commonresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-commonresponse"></span><h2>service.ext_proc.v3.CommonResponse<a class="headerlink" href="#service-ext-proc-v3-commonresponse" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L229">[service.ext_proc.v3.CommonResponse proto]</a></p>
<p>This message contains common fields between header and body responses.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;header_mutation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;body_mutation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;clear_route_cache&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-commonresponse-status">
<dt>status</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-enum-service-ext-proc-v3-commonresponse-responsestatus"><span class="std std-ref">service.ext_proc.v3.CommonResponse.ResponseStatus</span></a>) If set, provide additional direction on how the Envoy proxy should
handle the rest of the HTTP filter chain.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-commonresponse-header-mutation">
<dt>header_mutation</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-headermutation"><span class="std std-ref">service.ext_proc.v3.HeaderMutation</span></a>) Instructions on how to manipulate the headers. When responding to an
HttpBody request, header mutations will only take effect if
the current processing mode for the body is BUFFERED.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-commonresponse-body-mutation">
<dt>body_mutation</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-bodymutation"><span class="std std-ref">service.ext_proc.v3.BodyMutation</span></a>) Replace the body of the last message sent to the remote server on this
stream. If responding to an HttpBody request, simply replace or clear
the body chunk that was sent with that request. Body mutations only take
effect in response to <code class="docutils literal notranslate"><span class="pre">body</span></code> messages and are ignored otherwise.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-commonresponse-clear-route-cache">
<dt>clear_route_cache</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Clear the route cache for the current request.
This is necessary if the remote server
modified headers that are used to calculate the route.</p>
</dd>
</dl>
</section>
<section id="enum-service-ext-proc-v3-commonresponse-responsestatus">
<span id="envoy-v3-api-enum-service-ext-proc-v3-commonresponse-responsestatus"></span><h2>Enum service.ext_proc.v3.CommonResponse.ResponseStatus<a class="headerlink" href="#enum-service-ext-proc-v3-commonresponse-responsestatus" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L230">[service.ext_proc.v3.CommonResponse.ResponseStatus proto]</a></p>
<dl class="simple" id="envoy-v3-api-enum-value-service-ext-proc-v3-commonresponse-responsestatus-continue">
<dt>CONTINUE</dt><dd><p><em>(DEFAULT)</em> ⁣Apply the mutation instructions in this message to the
request or response, and then continue processing the filter
stream as normal. This is the default.</p>
</dd>
</dl>
<dl id="envoy-v3-api-enum-value-service-ext-proc-v3-commonresponse-responsestatus-continue-and-replace">
<dt>CONTINUE_AND_REPLACE</dt><dd><p>⁣Apply the specified header mutation, replace the body with the body
specified in the body mutation (if present), and do not send any
further messages for this request or response even if the processing
mode is configured to do so.</p>
<p>When used in response to a request_headers or response_headers message,
this status makes it possible to either completely replace the body
while discarding the original body, or to add a body to a message that
formerly did not have one.</p>
<p>In other words, this response makes it possible to turn an HTTP GET
into a POST, PUT, or PATCH.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-immediateresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-immediateresponse"></span><h2>service.ext_proc.v3.ImmediateResponse<a class="headerlink" href="#service-ext-proc-v3-immediateresponse" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L285">[service.ext_proc.v3.ImmediateResponse proto]</a></p>
<p>This message causes the filter to attempt to create a locally
generated response, send it  downstream, stop processing
additional filters, and ignore any additional messages received
from the remote server for this request or response. If a response
has already started, then  this will either ship the reply directly
to the downstream codec, or reset the stream.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;grpc_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;details&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-immediateresponse-status">
<dt>status</dt><dd><p>(<a class="reference internal" href="../../../type/v3/http_status.proto.html#envoy-v3-api-msg-type-v3-httpstatus"><span class="std std-ref">type.v3.HttpStatus</span></a>, <em>REQUIRED</em>) The response code to return</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-immediateresponse-headers">
<dt>headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-headermutation"><span class="std std-ref">service.ext_proc.v3.HeaderMutation</span></a>) Apply changes to the default headers, which will include content-type.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-immediateresponse-body">
<dt>body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The message body to return with the response which is sent using the
text/plain content type, or encoded in the grpc-message header.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-immediateresponse-grpc-status">
<dt>grpc_status</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-grpcstatus"><span class="std std-ref">service.ext_proc.v3.GrpcStatus</span></a>) If set, then include a gRPC status trailer.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-immediateresponse-details">
<dt>details</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) A string detailing why this local reply was sent, which may be included
in log and debug output (e.g. this populates the %RESPONSE_CODE_DETAILS%
command operator field for use in access logging).</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-grpcstatus">
<span id="envoy-v3-api-msg-service-ext-proc-v3-grpcstatus"></span><h2>service.ext_proc.v3.GrpcStatus<a class="headerlink" href="#service-ext-proc-v3-grpcstatus" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L306">[service.ext_proc.v3.GrpcStatus proto]</a></p>
<p>This message specifies a gRPC status for an ImmediateResponse message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-grpcstatus-status">
<dt>status</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) The actual gRPC status</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-headermutation">
<span id="envoy-v3-api-msg-service-ext-proc-v3-headermutation"></span><h2>service.ext_proc.v3.HeaderMutation<a class="headerlink" href="#service-ext-proc-v3-headermutation" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L313">[service.ext_proc.v3.HeaderMutation proto]</a></p>
<p>Change HTTP headers or trailers by appending, replacing, or removing
headers.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;set_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;remove_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-headermutation-set-headers">
<dt>set_headers</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headervalueoption"><span class="std std-ref">config.core.v3.HeaderValueOption</span></a>) Add or replace HTTP headers. Attempts to set the value of
any <code class="docutils literal notranslate"><span class="pre">x-envoy</span></code> header, and attempts to set the <code class="docutils literal notranslate"><span class="pre">:method</span></code>,
<code class="docutils literal notranslate"><span class="pre">:authority</span></code>, <code class="docutils literal notranslate"><span class="pre">:scheme</span></code>, or <code class="docutils literal notranslate"><span class="pre">host</span></code> headers will be ignored.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-headermutation-remove-headers">
<dt>remove_headers</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Remove these HTTP headers. Attempts to remove system headers –
any header starting with <code class="docutils literal notranslate"><span class="pre">:</span></code>, plus <code class="docutils literal notranslate"><span class="pre">host</span></code> – will be ignored.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-bodymutation">
<span id="envoy-v3-api-msg-service-ext-proc-v3-bodymutation"></span><h2>service.ext_proc.v3.BodyMutation<a class="headerlink" href="#service-ext-proc-v3-bodymutation" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/f89e0efddb8e4f8bad556608aa0e68fd5eae8d37/api/envoy/service/ext_proc/v3/external_processor.proto#L326">[service.ext_proc.v3.BodyMutation proto]</a></p>
<p>Replace the entire message body chunk received in the corresponding
HttpBody message with this new body, or clear the body.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;clear_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-service-ext-proc-v3-bodymutation-body">
<dt>body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bytes</a>) The entire body to replace</p>
<p>Only one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-bodymutation-body"><span class="std std-ref">body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-bodymutation-clear-body"><span class="std std-ref">clear_body</span></a> may be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-bodymutation-clear-body">
<dt>clear_body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Clear the corresponding body chunk</p>
<p>Only one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-bodymutation-body"><span class="std std-ref">body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-bodymutation-clear-body"><span class="std std-ref">clear_body</span></a> may be set.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../extension/v3/config_discovery.proto.html" class="btn btn-neutral float-left" title="Extension config discovery service (ECDS) (proto)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../accesslog/v3/als.proto.html" class="btn btn-neutral float-right" title="gRPC access log service (ALS) (proto)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>