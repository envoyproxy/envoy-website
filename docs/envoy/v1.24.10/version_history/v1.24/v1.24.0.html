<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.24.0 (October 19, 2022) &mdash; envoy 1.24.10-5adb03 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/envoy.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" src="../../_static/jquery.js"></script>
        <script integrity="sha384-lSZeSIVKp9myfKbDQ3GkN/KHjUc+mzg17VKDN4Y2kUeBSJioB9QSM639vM9fuY//" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="v1.23" href="../v1.23/v1.23.html" />
    <link rel="prev" title="1.24.1 (December 3, 2022)" href="v1.24.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.24.10-5adb03
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../version_history.html">Version history</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../version_history.html#stable-versions">Stable versions</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="v1.24.html">v1.24: 1.24.10 (July 25, 2023)</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="v1.24.10.html">1.24.10 (July 25, 2023)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.24.9.html">1.24.9 (July 13, 2023)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.24.8.html">1.24.8 (June 2, 2023)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.24.7.html">1.24.7 (April 26, 2023)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.24.6.html">1.24.6 (April 12, 2023)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.24.5.html">1.24.5 (April 5, 2023)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.24.4.html">1.24.4 (March 23, 2023)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.24.3.html">1.24.3 (February 28, 2023)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.24.2.html">1.24.2 (February 7, 2023)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.24.1.html">1.24.1 (December 3, 2022)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">1.24.0 (October 19, 2022)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../v1.23/v1.23.html">v1.23: 1.23.12 (July 25, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.22/v1.22.html">v1.22: 1.22.11 (April 11, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.21/v1.21.html">v1.21: 1.21.6 (November 28, 2022)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#archived-versions">Archived versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#deprecation-policy">Deprecation Policy</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../version_history.html">Version history</a></li>
          <li class="breadcrumb-item"><a href="v1.24.html">v1.24</a></li>
      <li class="breadcrumb-item active">1.24.0 (October 19, 2022)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/version_history/v1.24/v1.24.0.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="october-19-2022">
<span id="version-history-1-24-0"></span><h1>1.24.0 (October 19, 2022)<a class="headerlink" href="#october-19-2022" title="Permalink to this heading"></a></h1>
<section id="incompatible-behavior-changes">
<h2>Incompatible behavior changes<a class="headerlink" href="#incompatible-behavior-changes" title="Permalink to this heading"></a></h2>
<p><em>Changes that are expected to cause an incompatibility if applicable; deployment changes are likely required</em></p>
<ul class="simple">
<li><p><strong>build</strong>: official released binary is now built on Ubuntu 20.04, requires glibc &gt;= 2.30.</p></li>
<li><p><strong>config</strong>: Fixed resource tracking when using the Incremental (Delta-xDS) protocol. The protocol state will be updated after
the resources are successfully ingested and an ACK is sent. This behavior change can be reverted by setting the
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.delta_xds_subscription_state_tracking_fix</span></code> runtime flag to false.</p></li>
<li><p><strong>gcp_authn</strong>: Add GCP Authentication filter which can be used to fetch authentication tokens from Google Compute Engine(GCE) metadata server.</p></li>
<li><p><strong>http</strong>: Envoy no longer adds <code class="docutils literal notranslate"><span class="pre">content-length:</span> <span class="pre">0</span></code> header when proxying UPGRADE requests without <code class="docutils literal notranslate"><span class="pre">content-length</span></code> and <code class="docutils literal notranslate"><span class="pre">transfer-encoding</span></code> headers.
This behavior change can be reverted by setting the <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http_skip_adding_content_length_to_upgrade</span></code> runtime flag to false.</p></li>
<li><p><strong>http</strong>: For HTTP/2 and HTTP/3 codecs, all clients now continue sending data upstream after receiving an end of the server
stream. This supports the server half-close semantics for TCP tunneling with CONNECT as well as bi-directional
streaming calls. This behavior change can be reverted by setting the
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http_response_half_close</span></code> runtime flag to false.</p></li>
<li><p><strong>original_dst</strong>: ORIGINAL_DST cluster will not attempt to remove and drain the stale hosts during cleanup if they are still used by
the connection pools. For HTTP pools, please set <a class="reference internal" href="../../faq/configuration/timeouts.html#faq-configuration-connection-timeouts"><span class="std std-ref">idle_timeout</span></a> to
limit the duration of the upstream connections (the default value is 1h, and the recommended value is 5min). This
behavior change can be reverted by setting runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.original_dst_rely_on_idle_timeout</span></code>.</p></li>
<li><p><strong>stats http local_rate_limit</strong>: Fixed metric tag extraction so that <a class="reference internal" href="../../api-v3/extensions/filters/http/local_ratelimit/v3/local_rate_limit.proto.html#envoy-v3-api-field-extensions-filters-http-local-ratelimit-v3-localratelimit-stat-prefix"><span class="std std-ref">stat_prefix</span></a>
is properly extracted. This changes the Prometheus name from
envoy_http_local_rate_limit_myprefix_rate_limited{} to envoy_http_local_rate_limit_rate_limited{envoy_local_http_ratelimit_prefix=”myprefix”}.</p></li>
<li><p><strong>stats network local_rate_limit</strong>: Fixed metric tag extraction so that <a class="reference internal" href="../../api-v3/extensions/filters/network/local_ratelimit/v3/local_rate_limit.proto.html#envoy-v3-api-field-extensions-filters-network-local-ratelimit-v3-localratelimit-stat-prefix"><span class="std std-ref">stat_prefix</span></a>
is properly extracted. This changes the Prometheus name from
envoy_local_rate_limit_myprefix_rate_limited{} to envoy_local_rate_limit_rate_limited{envoy_local_ratelimit_prefix=”myprefix”}.</p></li>
<li><p><strong>tls</strong>: Change TLS and QUIC transport sockets to support asynchronous cert validation extension. This behavior change can be reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.tls_async_cert_validation</span></code> to false.</p></li>
</ul>
</section>
<section id="minor-behavior-changes">
<h2>Minor behavior changes<a class="headerlink" href="#minor-behavior-changes" title="Permalink to this heading"></a></h2>
<p><em>Changes that may cause incompatibilities for some users, but should not for most</em></p>
<ul>
<li><p><strong>cache_filter</strong>: added a completion callback to insertHeaders and insertTrailers in cache interface. Any external cache implementation extensions will need to also add this callback, and call it on completion.</p></li>
<li><p><strong>dynamic_forward_proxy</strong>: No longer waiting on DNS responses in the dynamic forward proxy filter if upstream proxying is turned on. This behaviorial change can be reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.skip_dns_lookup_for_proxied_requests</span></code> to false.</p></li>
<li><p><strong>health_check</strong>: support custom health check address via <a class="reference internal" href="../../api-v3/config/endpoint/v3/endpoint_components.proto.html#envoy-v3-api-msg-config-endpoint-v3-endpoint-healthcheckconfig"><span class="std std-ref">health_check_config</span></a>.</p></li>
<li><p><strong>http</strong>: changed shadow requests to more closely behave like the requests they are shadowing. This includes matching the upstream logging for the original request, dynamic stats, suppressing Envoy headers, respecting expected request timeout, suppressing grpc request failure code stats and strict header checks. This behaviorial change can be temporarily reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.closer_shadow_behavior</span></code> to false.</p></li>
<li><p><strong>http</strong>: changed the filter callback interfaces to make sure that downstream-only functionality is explicit.</p></li>
<li><p><strong>http</strong>: the upstream remote address is now available to downstream filters via the <code class="docutils literal notranslate"><span class="pre">upstreamRemoteAddress</span></code> function.</p></li>
<li><p><strong>local_ratelimit</strong>: added <a class="reference internal" href="../../api-v3/extensions/filters/http/local_ratelimit/v3/local_rate_limit.proto.html#envoy-v3-api-field-extensions-filters-http-local-ratelimit-v3-localratelimit-vh-rate-limits"><span class="std std-ref">virtual host level configuration</span></a> support for the local ratelimit filter.</p></li>
<li><p><strong>logging</strong>: changed the <code class="docutils literal notranslate"><span class="pre">UPSTREAM_REMOTE_ADDRESS</span></code>, <code class="docutils literal notranslate"><span class="pre">UPSTREAM_REMOTE_ADDRESS_WITHOUT_PORT</span></code>, and <code class="docutils literal notranslate"><span class="pre">UPSTREAM_REMOTE_PORT</span></code> fields to log based on the actual upstream connection rather than the upstream host. This fixes a bug where the address components were not consistently correct for Happy Eyeballs connections and proxied connections, but also means in cases where the host was selected but a connection was not established, the fields will be absent. This change can be temporarily reverted by setting the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.correct_remote_address</span></code> to false.</p></li>
<li><p><strong>original_dst</strong>: transparent listener can use original_dst filter without nf_conntrack enabled.</p></li>
<li><p><strong>prometheus_stats</strong>: removed blank line for being compatible with OpenMetrics.</p></li>
<li><p><strong>quic</strong>: changed the timing of QUIC connection writing data in response to incoming packets in non-Windowns platforms. This change can be reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.quic_defer_send_in_response_to_packet</span></code> to false.</p></li>
<li><p><strong>resource_monitors</strong>: changed behavior of the fixed heap monitor to count pages allocated to TCMalloc as free memory if it’s not used by Envoy. This change can be reverted temporarily by setting the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.do_not_count_mapped_pages_as_free</span></code> to true.</p></li>
<li><p><strong>stats</strong>: Default tag extraction rules were changed for <code class="docutils literal notranslate"><span class="pre">worker_id</span></code> extraction. Previously, <code class="docutils literal notranslate"><span class="pre">worker_</span></code> was removed from the original name during the extraction. This
led to the same base stat name for both the per-worker and overall stat. For instance, in prometheus stats, the following stats were produced:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">envoy_listener_downstream_cx_total</span><span class="p">{}</span> <span class="mf">2.</span>
<span class="n">envoy_listener_downstream_cx_total</span><span class="p">{</span><span class="n">envoy_worker_id</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">}</span> <span class="mf">1.</span>
<span class="n">envoy_listener_downstream_cx_total</span><span class="p">{</span><span class="n">envoy_worker_id</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">}</span> <span class="mf">1.</span>
</pre></div>
</div>
<p>This resulted in <code class="docutils literal notranslate"><span class="pre">sum(envoy_listener_downstream_cx_total)</span></code> producing 4, even though there are only 2 connections.
The new behavior results in stats such as this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">envoy_listener_downstream_cx_total</span><span class="p">{}</span> <span class="mf">2.</span>
<span class="n">envoy_listener_worker_downstream_cx_total</span><span class="p">{</span><span class="n">envoy_worker_id</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">}</span> <span class="mf">1.</span>
<span class="n">envoy_listener_worker_downstream_cx_total</span><span class="p">{</span><span class="n">envoy_worker_id</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">}</span> <span class="mf">1.</span>
</pre></div>
</div>
</li>
<li><p><strong>udp_proxy</strong>: changed behavior of UDP proxy to connect UDP sockets unless <code class="docutils literal notranslate"><span class="pre">use_original_src_ip</span></code> is set. This change can be reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.udp_proxy_connect</span></code> to false.</p></li>
</ul>
</section>
<section id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this heading"></a></h2>
<p><em>Changes expected to improve the state of the world and are unlikely to have negative effects</em></p>
<ul class="simple">
<li><p><strong>grpc_transcoder</strong>: fixed a bug where a request with a wrong binding type is not rejected if the request body is empty.</p></li>
<li><p><strong>http</strong>: fixed a bug with internal redirects not being performed for drained connections.</p></li>
<li><p><strong>jwt_authn</strong>: fixed a bug where a negative “exp”, “iat”, or “nbf” integer in JWT token readed as a large positive value.</p></li>
<li><p><strong>listener</strong>: fixed a bug that doesn’t handle of an update for a listener with IPv4-mapped address correctly, and that will lead to a memory leak.</p></li>
<li><p><strong>logger</strong>: added the %j and %_ format support for fine-grain loggers to make it consistant with default loggers.</p></li>
<li><p><strong>router</strong>: fixed edge-case interaction between weighted clusters, cluster headers and (request|response)_headers_to_(add|remove).</p></li>
<li><p><strong>thrift</strong>: fixed the routing decision when thrift filters change the value of the cluster header.</p></li>
<li><p><strong>tls</strong>: fixed a bug where, when runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.tls_async_cert_validation</span></code> is set to false, the wrong TLS alerts would sometimes be sent in response to certificate validation failures.</p></li>
<li><p><strong>transport_socket</strong>: fixed a bug that prevented the tcp stats to be retrieved when running on kernels different than the kernel where Envoy was built.</p></li>
<li><p><strong>upstream</strong>: fixed a bug where custom transport socket hashes might not be respected by wrapper passthrough sockets. This change can be temporarily reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.fix_hash_key</span></code> to false.</p></li>
</ul>
</section>
<section id="removed-config-or-runtime">
<h2>Removed config or runtime<a class="headerlink" href="#removed-config-or-runtime" title="Permalink to this heading"></a></h2>
<p><em>Normally occurs at the end of the</em> <a class="reference internal" href="../version_history.html#deprecated"><span class="std std-ref">deprecation period</span></a></p>
<ul class="simple">
<li><p><strong>auto_config</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.correctly_validate_alpn</span></code> and legacy code paths.</p></li>
<li><p><strong>grpc</strong>: remove <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.enable_grpc_async_client_cache</span></code> and legacy code paths.</p></li>
<li><p><strong>hcm</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.handle_stream_reset_during_hcm_encoding</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http2_allow_capacity_increase_by_settings</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.proxy_120_103</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.sanitize_http_header_referer</span></code> and legacy code paths.</p></li>
<li><p><strong>lightstep</strong>: removed the Lightstep tracer integration, making way for the native OpenTelemetry integration.</p></li>
<li><p><strong>listener</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.internal_address</span></code> and legacy code paths.</p></li>
<li><p><strong>router</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.update_expected_rq_timeout_on_retry</span></code> and legacy code paths.</p></li>
<li><p><strong>tracing</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.update_grpc_response_error_tag</span></code> and legacy code paths.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New features<a class="headerlink" href="#new-features" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>access_log</strong>: added downstream handshake timing to connection streamInfo. Can be accessed by custom access loggers.</p></li>
<li><p><strong>access_log</strong>: added support for number values in substitution format string in json_format.</p></li>
<li><p><strong>access_log</strong>: log <code class="docutils literal notranslate"><span class="pre">duration</span></code>, <code class="docutils literal notranslate"><span class="pre">upstream_request_attempt_count</span></code>, <code class="docutils literal notranslate"><span class="pre">connection_termination_details</span></code> and tls <code class="docutils literal notranslate"><span class="pre">ja3</span></code> field in the grpc access log
and also log the tls <code class="docutils literal notranslate"><span class="pre">sni</span></code> and <code class="docutils literal notranslate"><span class="pre">ja3</span></code> field in the grpc access log when envoy is configured as a tls forward proxy.</p></li>
<li><p><strong>access_log</strong>: updated command operator <code class="docutils literal notranslate"><span class="pre">%GRPC_STATUS%</span></code> to suppoprt the snake case.</p></li>
<li><p><strong>admin</strong>: added new <a class="reference internal" href="../../operations/admin.html#operations-admin-interface-heap-dump"><span class="std std-ref">/heap_dump</span></a> endpoint to dump heap profile of Envoy.</p></li>
<li><p><strong>build</strong>: official released binary is now built on Ubuntu 20.04, requires glibc &gt;= 2.30.</p></li>
<li><p><strong>cluster</strong>: added support to override original destination port via setting <a class="reference internal" href="../../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-originaldstlbconfig-upstream-port-override"><span class="std std-ref">upstream_port_override</span></a>.</p></li>
<li><p><strong>compression</strong>: added support for <a class="reference internal" href="../../api-v3/extensions/filters/http/compressor/v3/compressor.proto.html#envoy-v3-api-msg-extensions-filters-http-compressor-v3-compressor"><span class="std std-ref">choose_first</span></a>.</p></li>
<li><p><strong>cors</strong>: added support for cors PNA. This behavioral change can be temporarily reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy_reloadable_features_cors_private_network_access</span></code> to false. More details refer to <a class="reference external" href="https://developer.chrome.com/blog/private-network-access-preflight">https://developer.chrome.com/blog/private-network-access-preflight</a>.</p></li>
<li><p><strong>dns_resolver</strong>: added DNS stats for c-ares DNS resolver. Detailed documentation is available <a class="reference internal" href="../../intro/arch_overview/upstream/dns_resolution.html#arch-overview-dns-resolution"><span class="std std-ref">here</span></a>.</p></li>
<li><p><strong>generic_proxy</strong>: added an new network filter <a class="reference internal" href="../../api-v3/extensions/filters/network/generic_proxy/v3/generic_proxy.proto.html#envoy-v3-api-msg-extensions-filters-network-generic-proxy-v3-genericproxy"><span class="std std-ref">generic_proxy filter</span></a>.</p></li>
<li><p><strong>grpc_json_transcoder</strong>: added support for newline-delimited streams in <a class="reference internal" href="../../api-v3/extensions/filters/http/grpc_json_transcoder/v3/transcoder.proto.html#envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-printoptions-stream-newline-delimited"><span class="std std-ref">stream_newline_delimited</span></a>.</p></li>
<li><p><strong>grpc_json_transcoder</strong>: added support for parsing enum value case insensitively enabled by the config <a class="reference internal" href="../../api-v3/extensions/filters/http/grpc_json_transcoder/v3/transcoder.proto.html#envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-case-insensitive-enum-parsing"><span class="std std-ref">case_insensitive_enum_parsing</span></a>.</p></li>
<li><p><strong>grpc_stats</strong>: added support for replacing dots of gRPC service name with underscores in the gRPC stats by the config <a class="reference internal" href="../../api-v3/extensions/filters/http/grpc_stats/v3/config.proto.html#envoy-v3-api-field-extensions-filters-http-grpc-stats-v3-filterconfig-replace-dots-in-grpc-service-name"><span class="std std-ref">replace_dots_in_grpc_service_name</span></a>.</p></li>
<li><p><strong>gzip</strong>: added support for <a class="reference internal" href="../../api-v3/extensions/compression/gzip/decompressor/v3/gzip.proto.html#envoy-v3-api-msg-extensions-compression-gzip-decompressor-v3-gzip"><span class="std std-ref">max_inflate_ratio</span></a>.</p></li>
<li><p><strong>header_formatters</strong>: all access log formatters can be used as custom request/response headers. Custom header’s syntax is parsed using access logger’s parser and
header values are obtained using access log’s substitution formatters. This feature can be reversed by setting runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.unified_header_formatter</span></code> to false.</p></li>
<li><p><strong>health check</strong>: added <a class="reference internal" href="../../api-v3/config/core/v3/health_check.proto.html#envoy-v3-api-field-config-core-v3-healthcheck-httphealthcheck-method"><span class="std std-ref">method</span></a> support to configure http health check http method.</p></li>
<li><p><strong>health check</strong>: added <a class="reference internal" href="../../api-v3/extensions/health_checkers/thrift/v3/thrift.proto.html#envoy-v3-api-msg-extensions-health-checkers-thrift-v3-thrift"><span class="std std-ref">thrift health check</span></a> as a <a class="reference internal" href="../../api-v3/config/core/v3/health_check.proto.html#envoy-v3-api-msg-config-core-v3-healthcheck-customhealthcheck"><span class="std std-ref">custom health check</span></a>.</p></li>
<li><p><strong>http</strong>: Added <a class="reference internal" href="../../api-v3/extensions/http/stateful_session/header/v3/header.proto.html#envoy-v3-api-msg-extensions-http-stateful-session-header-v3-headerbasedsessionstate"><span class="std std-ref">HeaderBasedSessionState</span></a> to manage
<a class="reference internal" href="../../api-v3/extensions/filters/http/stateful_session/v3/stateful_session.proto.html#envoy-v3-api-msg-extensions-filters-http-stateful-session-v3-statefulsession"><span class="std std-ref">StatefulSession State</span></a> via request/response header.</p></li>
<li><p><strong>http</strong>: added <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.allow_upstream_filters</span></code> for experimental upstream filters.</p></li>
<li><p><strong>http</strong>: added default-false <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http1_use_balsa_parser</span></code> for experimental BalsaParser.</p></li>
<li><p><strong>http</strong>: added the expected <a class="reference internal" href="../../api-v3/config/core/v3/health_check.proto.html#envoy-v3-api-field-config-core-v3-healthcheck-httphealthcheck-receive"><span class="std std-ref">receive</span></a> payload check for HTTP health check.
Added <a class="reference internal" href="../../api-v3/config/core/v3/health_check.proto.html#envoy-v3-api-field-config-core-v3-healthcheck-httphealthcheck-response-buffer-size"><span class="std std-ref">response_buffer_size</span></a> to configure the maximum HTTP health check response buffer size.</p></li>
<li><p><strong>http</strong>: made the <a class="reference internal" href="../../api-v3/extensions/filters/http/admission_control/v3/admission_control.proto.html#envoy-v3-api-msg-extensions-filters-http-admission-control-v3-admissioncontrol"><span class="std std-ref">admission control</span></a> work as an upstream filter.</p></li>
<li><p><strong>listener</strong>: added multiple listening addresses in single listener. <a class="reference internal" href="../../api-v3/config/listener/v3/listener.proto.html#envoy-v3-api-field-config-listener-v3-listener-additional-addresses"><span class="std std-ref">listener additional addresses</span></a>.</p></li>
<li><p><strong>listener</strong>: allow network filters other than HTTP Connection Manager to be created for QUIC listeners.</p></li>
<li><p><strong>listener</strong>: expose the implementation of <a class="reference internal" href="../../configuration/other_features/internal_listener.html#config-internal-listener"><span class="std std-ref">internal listener</span></a> in xDS API.</p></li>
<li><p><strong>load balancer</strong>: added a new field to subset load balancer config: <a class="reference internal" href="../../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-lbsubsetconfig-metadata-fallback-policy"><span class="std std-ref">metadata_fallback_policy</span></a>.</p></li>
<li><p><strong>lua</strong>: added an alternative function signature to <code class="docutils literal notranslate"><span class="pre">httpCall()</span></code> with <code class="docutils literal notranslate"><span class="pre">options</span></code> as an argument. This allows to skip sampling the produced trace span
by setting <code class="docutils literal notranslate"><span class="pre">{[&quot;trace_sampled&quot;]</span> <span class="pre">=</span> <span class="pre">false}</span></code> as the <code class="docutils literal notranslate"><span class="pre">options</span></code>. And this allows to return multiple header values for same header name by setting
<code class="docutils literal notranslate"><span class="pre">{[&quot;return_duplicate_headers&quot;]</span> <span class="pre">=</span> <span class="pre">true}</span></code> as the <code class="docutils literal notranslate"><span class="pre">options</span></code>.</p></li>
<li><p><strong>lua</strong>: added new headers method “setHttp1ReasonPhrase” for lua filter, please see <a class="reference internal" href="../../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-header-wrapper"><span class="std std-ref">lua header wrapper</span></a>.</p></li>
<li><p><strong>lua</strong>: added stats for lua filter, please see <a class="reference internal" href="../../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-stats"><span class="std std-ref">lua filter stats</span></a>.</p></li>
<li><p><strong>ratelimit</strong>: add support for <a class="reference internal" href="../../api-v3/extensions/filters/http/ratelimit/v3/rate_limit.proto.html#envoy-v3-api-field-extensions-filters-http-ratelimit-v3-ratelimit-response-headers-to-add"><span class="std std-ref">adding response headers</span></a> to rate-limited responses.</p></li>
<li><p><strong>redis</strong>: added support for quit command to the redis proxy.</p></li>
<li><p><strong>redis</strong>: added support for redis transactions.</p></li>
<li><p><strong>subset load balancer</strong>: added multiple keys or multiple selectors support for <a class="reference internal" href="../../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-lbsubsetconfig-lbsubsetselector-single-host-per-subset"><span class="std std-ref">single host per subset mode</span></a>.</p></li>
<li><p><strong>tcp_proxy</strong>: added support for propagating the response headers in <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-tunnelingconfig-propagate-response-headers"><span class="std std-ref">TunnelingConfig</span></a> to
the downstream info filter state.</p></li>
<li><p><strong>thrift</strong>: added stats for downstream connection close to detect SR drop.</p></li>
<li><p><strong>upstream</strong>: added a filter state object to control the destination address in <a class="reference internal" href="../../intro/arch_overview/upstream/load_balancing/original_dst.html#arch-overview-load-balancing-types-original-destination-request-header-filter-state"><span class="std std-ref">ORIGINAL_DST clusters</span></a>.</p></li>
<li><p><strong>upstream</strong>: added a new field <a class="reference internal" href="../../api-v3/config/core/v3/address.proto.html#envoy-v3-api-field-config-core-v3-bindconfig-extra-source-addresses"><span class="std std-ref">extra_source_addresses</span></a> to the BindConfig, it enables to specify multiple source addresses, and the source address selection is based on target host’s address’ version.</p></li>
<li><p><strong>zipkin</strong>: added <a class="reference internal" href="../../api-v3/config/trace/v3/zipkin.proto.html#envoy-v3-api-field-config-trace-v3-zipkinconfig-split-spans-for-request"><span class="std std-ref">split_spans_for_request</span></a> to make Envoy appear
as an independent hop for zipkin tracing.</p></li>
</ul>
</section>
<section id="deprecated">
<h2>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>cors</strong>: deprecated <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-virtualhost-cors"><span class="std std-ref">cors field of virtual host</span></a> and
<a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routeaction-cors"><span class="std std-ref">cors field of route action</span></a>. Please use
<a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-virtualhost-typed-per-filter-config"><span class="std std-ref">VirtualHost.typed_per_filter_config</span></a>,
<a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-route-typed-per-filter-config"><span class="std std-ref">Route.typed_per_filter_config</span></a> or
<a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-weightedcluster-clusterweight-typed-per-filter-config"><span class="std std-ref">WeightedCluster.ClusterWeight.typed_per_filter_config</span></a>
to configure the CORS HTTP filter by the type <a class="reference internal" href="../../api-v3/extensions/filters/http/cors/v3/cors.proto.html#envoy-v3-api-msg-extensions-filters-http-cors-v3-corspolicy"><span class="std std-ref">CorsPolicy in filter</span></a>.</p></li>
<li><p><strong>http</strong>: deprecated <a class="reference internal" href="../../api-v3/config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-headervalueoption-append"><span class="std std-ref">append</span></a> and please use
<a class="reference internal" href="../../api-v3/config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-headervalueoption-append-action"><span class="std std-ref">append_action</span></a> first.</p></li>
<li><p><strong>router</strong>: deprecated <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-weightedcluster-total-weight"><span class="std std-ref">total weight</span></a> for weighted
clusters. The sum of the <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-weightedcluster-clusterweight-weight"><span class="std std-ref">clusters’ weights</span></a>
will be used as the total weight.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="v1.24.1.html" class="btn btn-neutral float-left" title="1.24.1 (December 3, 2022)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../v1.23/v1.23.html" class="btn btn-neutral float-right" title="v1.23" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>