

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Version history &mdash; envoy tag-v1.14.2 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Deprecated" href="deprecated.html" />
    <link rel="prev" title="Getting help" href="getting_help.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                tag-v1.14.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_docs.html">About the documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="intro.html">Introduction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="what_is_envoy.html">What is Envoy</a></li>
<li class="toctree-l2"><a class="reference internal" href="arch_overview/arch_overview.html">Architecture overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment_types/deployment_types.html">Deployment types</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_help.html">Getting help</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Version history</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#june-8-2020">1.14.2 (June 8, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#april-8-2020">1.14.1 (April 8, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">1.14.0 (April 8, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#march-3-2020">1.13.1 (March 3, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#january-20-2020">1.13.0 (January 20, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">1.12.3 (March 3, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#december-10-2019">1.12.2 (December 10, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#november-8-2019">1.12.1 (November 8, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#october-31-2019">1.12.0 (October 31, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#october-8-2019">1.11.2 (October 8, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#august-13-2019">1.11.1 (August 13, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#july-11-2019">1.11.0 (July 11, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apr-5-2019">1.10.0 (Apr 5, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apr-2-2019">1.9.1 (Apr 2, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dec-20-2018">1.9.0 (Dec 20, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#oct-4-2018">1.8.0 (Oct 4, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#jun-21-2018">1.7.0 (Jun 21, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#march-20-2018">1.6.0 (March 20, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#december-4-2017">1.5.0 (December 4, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#august-24-2017">1.4.0 (August 24, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#may-17-2017">1.3.0 (May 17, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#march-7-2017">1.2.0 (March 7, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#november-30-2016">1.1.0 (November 30, 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#september-12-2016">1.0.0 (September 12, 2016)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deprecated.html">Deprecated</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="intro.html">Introduction</a> &raquo;</li>
        
      <li>Version history</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/intro/version_history.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="version-history">
<h1>Version history<a class="headerlink" href="#version-history" title="Permalink to this headline">¶</a></h1>
<div class="section" id="june-8-2020">
<h2>1.14.2 (June 8, 2020)<a class="headerlink" href="#june-8-2020" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>http: fixed CVE-2020-11080 by rejecting HTTP/2 SETTINGS frames with too many parameters.</p></li>
</ul>
</div>
<div class="section" id="april-8-2020">
<h2>1.14.1 (April 8, 2020)<a class="headerlink" href="#april-8-2020" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>request_id_extension: fixed static initialization for noop request id extension.</p></li>
</ul>
</div>
<div class="section" id="id1">
<h2>1.14.0 (April 8, 2020)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: access logger extensions use the “envoy.access_loggers” name space. A mapping
of extension names is available in the <a class="reference internal" href="deprecated.html#deprecated"><span class="std std-ref">deprecated</span></a> documentation.</p></li>
<li><p>access log: added support for <cite>%DOWNSTREAM_LOCAL_PORT%</cite> <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format"><span class="std std-ref">access log formatters</span></a>.</p></li>
<li><p>access log: fixed <cite>%DOWSTREAM_DIRECT_REMOTE_ADDRESS%</cite> when used with PROXY protocol listener filter.</p></li>
<li><p>access log: introduced <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-access-log"><span class="std std-ref">connection-level access loggers</span></a>.</p></li>
<li><p>adaptive concurrency: fixed bug that allowed concurrency limits to drop below the configured
minimum.</p></li>
<li><p>adaptive concurrency: minRTT is now triggered when the minimum concurrency is maintained for 5
consecutive sampling intervals.</p></li>
<li><p>admin: added support for displaying ip address subject alternate names in <a class="reference internal" href="../operations/admin.html#operations-admin-interface-certs"><span class="std std-ref">certs</span></a> end point.</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#post--reopen_logs" title="POST /reopen_logs"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/reopen_logs</span></code></a> endpoint to control log rotation.</p></li>
<li><p>api: froze v2 xDS API. New feature development in the API should occur in v3 xDS. While the v2 xDS API has
been deprecated since 1.13.0, it will continue to be supported by Envoy until EOY 2020. See
<a class="reference internal" href="../api/api_supported_versions.html#api-supported-versions"><span class="std std-ref">Supported API versions</span></a>.</p></li>
<li><p>aws_lambda: added <a class="reference internal" href="../configuration/http/http_filters/aws_lambda_filter.html#config-http-filters-aws-lambda"><span class="std std-ref">AWS Lambda filter</span></a> that converts HTTP requests to Lambda
invokes. This effectively makes Envoy act as an egress gateway to AWS Lambda.</p></li>
<li><p>aws_request_signing: a few fixes so that it works with S3.</p></li>
<li><p>config: added stat <a class="reference internal" href="../configuration/upstream/cluster_manager/cds.html#config-cluster-manager-cds"><span class="std std-ref">update_time</span></a>.</p></li>
<li><p>config: use type URL to select an extension whenever the config type URL (or its previous versions) uniquely identify a typed extension, see <a class="reference internal" href="../configuration/overview/extension.html#config-overview-extension-configuration"><span class="std std-ref">extension configuration</span></a>.</p></li>
<li><p>datasource: added retry policy for remote async data source.</p></li>
<li><p>dns: added support for <a class="reference internal" href="../api-v2/config/common/dynamic_forward_proxy/v2alpha/dns_cache.proto.html#envoy-api-field-config-common-dynamic-forward-proxy-v2alpha-dnscacheconfig-dns-failure-refresh-rate"><span class="std std-ref">dns_failure_refresh_rate</span></a> for the <a class="reference internal" href="../api-v2/config/common/dynamic_forward_proxy/v2alpha/dns_cache.proto.html#envoy-api-msg-config-common-dynamic-forward-proxy-v2alpha-dnscacheconfig"><span class="std std-ref">dns cache</span></a> to set the DNS refresh rate during failures.</p></li>
<li><p>dns: the STRICT_DNS cluster now only resolves to 0 hosts if DNS resolution successfully returns 0 hosts.</p></li>
<li><p>eds: added <a class="reference internal" href="../api-v3/config/endpoint/v3/endpoint_components.proto.html#envoy-v3-api-field-config-endpoint-v3-endpoint-hostname"><span class="std std-ref">hostname</span></a> field for endpoints and <a class="reference internal" href="../api-v3/config/endpoint/v3/endpoint_components.proto.html#envoy-v3-api-field-config-endpoint-v3-endpoint-healthcheckconfig-hostname"><span class="std std-ref">hostname</span></a> field for endpoint’s health check config. This enables auto host rewrite and customizing the host header during health checks for eds endpoints.</p></li>
<li><p>ext_authz: disabled the use of lowercase string matcher for headers matching in HTTP-based <cite>ext_authz</cite>.
Can be reverted temporarily by setting runtime feature <cite>envoy.reloadable_features.ext_authz_http_service_enable_case_sensitive_string_matcher</cite> to false.</p></li>
<li><p>fault: added support for controlling abort faults with <a class="reference internal" href="../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-http-header"><span class="std std-ref">HTTP header fault configuration</span></a> to the HTTP fault filter.</p></li>
<li><p>grpc-json: added support for building HTTP request into
<a class="reference external" href="https://github.com/googleapis/googleapis/blob/master/google/api/httpbody.proto">google.api.HttpBody</a>.</p></li>
<li><p>grpc-stats: added option to limit which messages stats are created for.</p></li>
<li><p>http: added HTTP/1.1 flood protection. Can be temporarily disabled using the runtime feature <cite>envoy.reloadable_features.http1_flood_protection</cite>.</p></li>
<li><p>http: added <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-httpprotocoloptions-headers-with-underscores-action"><span class="std std-ref">headers_with_underscores_action setting</span></a> to control how client requests with header names containing underscore characters are handled. The options are to allow such headers, reject request or drop headers. The default is to allow headers, preserving existing behavior.</p></li>
<li><p>http: added <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-httpprotocoloptions-max-stream-duration"><span class="std std-ref">max_stream_duration</span></a> to specify the duration of existing streams. See <a class="reference internal" href="../faq/configuration/timeouts.html#faq-configuration-timeouts"><span class="std std-ref">connection and stream timeouts</span></a>.</p></li>
<li><p>http: connection header sanitizing has been modified to always sanitize if there is no upgrade, including when an h2c upgrade attempt has been removed.</p></li>
<li><p>http: fixed a bug that could send extra METADATA frames and underflow memory when encoding METADATA frames on a connection that was dispatching data.</p></li>
<li><p>http: fixing a bug in HTTP/1.0 responses where Connection: keep-alive was not appended for connections which were kept alive.</p></li>
<li><p>http: http filter extensions use the “envoy.filters.http” name space. A mapping
of extension names is available in the <a class="reference internal" href="deprecated.html#deprecated"><span class="std std-ref">deprecated</span></a> documentation.</p></li>
<li><p>http: the runtime feature <cite>http.connection_manager.log_flood_exception</cite> is removed and replaced with a connection access log response code.</p></li>
<li><p>http: upgrade parser library, which removes support for “identity” transfer-encoding value.</p></li>
<li><p>listener filters: listener filter extensions use the “envoy.filters.listener” name space. A
mapping of extension names is available in the <a class="reference internal" href="deprecated.html#deprecated"><span class="std std-ref">deprecated</span></a> documentation.</p></li>
<li><p>listeners: added <a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-field-listener-listenerfilter-filter-disabled"><span class="std std-ref">listener filter matcher api</span></a> to disable individual listener filter on matching downstream connections.</p></li>
<li><p>loadbalancing: added support for using hostname for consistent hash loadbalancing via <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-consistent-hashing-lb-config"><span class="std std-ref">consistent_hash_lb_config</span></a>.</p></li>
<li><p>loadbalancing: added support for <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-retrypolicy-retry-host-predicate"><span class="std std-ref">retry host predicates</span></a> in conjunction with consistent hashing load balancers (ring hash and maglev).</p></li>
<li><p>lua: added a parameter to <cite>httpCall</cite> that makes it possible to have the call be asynchronous.</p></li>
<li><p>lua: added moonjit support.</p></li>
<li><p>mongo: the stat emitted for queries without a max time set in the <a class="reference internal" href="../configuration/listeners/network_filters/mongo_proxy_filter.html#config-network-filters-mongo-proxy"><span class="std std-ref">MongoDB filter</span></a> was modified to emit correctly for Mongo v3.2+.</p></li>
<li><p>network filters: added a <a class="reference internal" href="../configuration/listeners/network_filters/direct_response_filter.html#config-network-filters-direct-response"><span class="std std-ref">direct response filter</span></a>.</p></li>
<li><p>network filters: network filter extensions use the “envoy.filters.network” name space. A mapping
of extension names is available in the <a class="reference internal" href="deprecated.html#deprecated"><span class="std std-ref">deprecated</span></a> documentation.</p></li>
<li><p>rbac: added <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-principal-remote-ip"><span class="std std-ref">remote_ip</span></a> and <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-principal-direct-remote-ip"><span class="std std-ref">direct_remote_ip</span></a> for matching downstream remote IP address.</p></li>
<li><p>rbac: deprecated <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-principal-source-ip"><span class="std std-ref">source_ip</span></a> with <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-principal-direct-remote-ip"><span class="std std-ref">direct_remote_ip</span></a> and <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-principal-remote-ip"><span class="std std-ref">remote_ip</span></a>.</p></li>
<li><p>request_id_extension: added an ability to extend request ID handling at <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-request-id-extension"><span class="std std-ref">HTTP connection manager</span></a>.</p></li>
<li><p>retry: added a retry predicate that <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-retrypolicy-retry-host-predicate"><span class="std std-ref">rejects hosts based on metadata.</span></a>.</p></li>
<li><p>router: added ability to set attempt count in downstream response, see <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-virtualhost-include-attempt-count-in-response"><span class="std std-ref">virtual host’s include response
attempt count config</span></a>.</p></li>
<li><p>router: added additional stats for <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-vcluster-stats"><span class="std std-ref">virtual clusters</span></a>.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-upstreamhttpprotocoloptions-auto-san-validation"><span class="std std-ref">auto_san_validation</span></a> to support overrriding SAN validation to transport socket for new upstream connections based on the downstream HTTP host/authority header.</p></li>
<li><p>router: added the ability to match a route based on whether a downstream TLS connection certificate has been
<a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routematch-tlscontextmatchoptions-validated"><span class="std std-ref">validated</span></a>.</p></li>
<li><p>router: added support for <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-regex-rewrite"><span class="std std-ref">regex_rewrite</span></a> for path rewriting using regular expressions and capture groups.</p></li>
<li><p>router: added support for <cite>%DOWNSTREAM_LOCAL_PORT%</cite> <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">header formatter</span></a>.</p></li>
<li><p>router: don’t ignore <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-retrypolicy-per-try-timeout"><span class="std std-ref">per_try_timeout</span></a> when the <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-timeout"><span class="std std-ref">global route timeout</span></a> is disabled.</p></li>
<li><p>router: strip whitespace for <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-retrypolicy-retry-on"><span class="std std-ref">retry_on</span></a>, <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-grpc-on"><span class="std std-ref">grpc-retry-on header</span></a> and <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-on"><span class="std std-ref">retry-on header</span></a>.</p></li>
<li><p>runtime: enabling the runtime feature <cite>envoy.deprecated_features.allow_deprecated_extension_names</cite>
disables the use of deprecated extension names.</p></li>
<li><p>runtime: integer values may now be parsed as booleans.</p></li>
<li><p>sds: added <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-msg-auth-genericsecret"><span class="std std-ref">GenericSecret</span></a> to support secret of generic type.</p></li>
<li><p>sds: added <a class="reference internal" href="../configuration/security/secret.html#xds-certificate-rotation"><span class="std std-ref">certificate rotation</span></a> support for certificates in static resources.</p></li>
<li><p>server: the SIGUSR1 access log reopen warning now is logged at info level.</p></li>
<li><p>stat sinks: stat sink extensions use the “envoy.stat_sinks” name space. A mapping of extension
names is available in the <a class="reference internal" href="deprecated.html#deprecated"><span class="std std-ref">deprecated</span></a> documentation.</p></li>
<li><p>thrift_proxy: added router filter stats to docs.</p></li>
<li><p>tls: added configuration to disable stateless TLS session resumption <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-downstreamtlscontext-disable-stateless-session-resumption"><span class="std std-ref">disable_stateless_session_resumption</span></a>.</p></li>
<li><p>tracing: added gRPC service configuration to the OpenCensus Stackdriver and OpenCensus Agent tracers.</p></li>
<li><p>tracing: tracer extensions use the “envoy.tracers” name space. A mapping of extension names is
available in the <a class="reference internal" href="deprecated.html#deprecated"><span class="std std-ref">deprecated</span></a> documentation.</p></li>
<li><p>upstream: added <code class="docutils literal notranslate"><span class="pre">upstream_rq_retry_limit_exceeded</span></code> to <a class="reference internal" href="../configuration/upstream/cluster_manager/cluster_stats.html#config-cluster-manager-cluster-stats"><span class="std std-ref">cluster</span></a>, and <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-vcluster-stats"><span class="std std-ref">virtual cluster</span></a> stats.</p></li>
<li><p>upstream: changed load distribution algorithm when all priorities enter <a class="reference internal" href="arch_overview/upstream/load_balancing/panic_threshold.html#arch-overview-load-balancing-panic-threshold"><span class="std std-ref">panic mode</span></a>.</p></li>
<li><p>upstream: combined HTTP/1 and HTTP/2 connection pool code. This means that circuit breaker
limits for both requests and connections apply to both pool types. Also, HTTP/2 now has
the option to limit concurrent requests on a connection, and allow multiple draining
connections. The old behavior is deprecated, but can be used during the deprecation
period by disabling runtime feature <cite>envoy.reloadable_features.new_http1_connection_pool_behavior</cite> or
<cite>envoy.reloadable_features.new_http2_connection_pool_behavior</cite> and then re-configure your clusters or
restart Envoy. The behavior will not switch until the connection pools are recreated. The new
circuit breaker behavior is described <a class="reference internal" href="arch_overview/upstream/circuit_breaking.html#arch-overview-circuit-break"><span class="std std-ref">here</span></a>.</p></li>
<li><p>zlib: by default zlib is initialized to use its default strategy (Z_DEFAULT_STRATEGY)
instead of the fixed one (Z_FIXED). The difference is that the use of dynamic
Huffman codes is enabled now resulting in better compression ratio for normal data.</p></li>
</ul>
</div>
<div class="section" id="march-3-2020">
<h2>1.13.1 (March 3, 2020)<a class="headerlink" href="#march-3-2020" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>buffer: force copy when appending small slices to OwnedImpl buffer to avoid fragmentation.</p></li>
<li><p>http: added HTTP/1.1 flood protection. Can be temporarily disabled using the runtime feature <cite>envoy.reloadable_features.http1_flood_protection</cite>.</p></li>
<li><p>listeners: fixed issue where <a class="reference internal" href="../configuration/listeners/listener_filters/tls_inspector.html#config-listener-filters-tls-inspector"><span class="std std-ref">TLS inspector listener filter</span></a> could have been bypassed by a client using only TLS 1.3.</p></li>
<li><p>rbac: added <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-permission-url-path"><span class="std std-ref">url_path</span></a> for matching URL path without the query and fragment string.</p></li>
<li><p>sds: fixed the SDS vulnerability that TLS validation context (e.g., subject alt name or hash) cannot be effectively validated in some cases.</p></li>
</ul>
</div>
<div class="section" id="january-20-2020">
<h2>1.13.0 (January 20, 2020)<a class="headerlink" href="#january-20-2020" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added FILTER_STATE <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format"><span class="std std-ref">access log formatters</span></a> and gRPC access logger.</p></li>
<li><p>admin: added the ability to filter <a class="reference internal" href="../operations/admin.html#operations-admin-interface-config-dump"><span class="std std-ref">/config_dump</span></a>.</p></li>
<li><p>access log: added a <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format-dictionaries"><span class="std std-ref">typed JSON logging mode</span></a> to output access logs in JSON format with non-string values</p></li>
<li><p>access log: fixed UPSTREAM_LOCAL_ADDRESS <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format"><span class="std std-ref">access log formatters</span></a> to work for http requests</p></li>
<li><p>access log: added HOSTNAME.</p></li>
<li><p>api: remove all support for v1</p></li>
<li><p>api: added ability to specify <cite>mode</cite> for <a class="reference internal" href="../api-v2/api/v2/core/address.proto.html#envoy-api-field-core-pipe-mode"><span class="std std-ref">Pipe</span></a>.</p></li>
<li><p>api: support for the v3 xDS API added. See <a class="reference internal" href="../api/api_supported_versions.html#api-supported-versions"><span class="std std-ref">Supported API versions</span></a>.</p></li>
<li><p>aws_request_signing: added new alpha <a class="reference internal" href="../configuration/http/http_filters/aws_request_signing_filter.html#config-http-filters-aws-request-signing"><span class="std std-ref">HTTP AWS request signing filter</span></a>.</p></li>
<li><p>buffer: remove old implementation</p></li>
<li><p>build: official released binary is now built against libc++.</p></li>
<li><p>cluster: added <a class="reference internal" href="arch_overview/upstream/aggregate_cluster.html#arch-overview-aggregate-cluster"><span class="std std-ref">aggregate cluster</span></a> that allows load balancing between clusters.</p></li>
<li><p>config: all category names of internal envoy extensions are prefixed with the ‘envoy.’ prefix to follow the reverse DNS naming notation.</p></li>
<li><p>decompressor: remove decompressor hard assert failure and replace with an error flag.</p></li>
<li><p>ext_authz: added <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-include-peer-certificate"><span class="std std-ref">configurable ability</span></a> to send the <a class="reference internal" href="../api-v2/service/auth/v2/attribute_context.proto.html#envoy-api-field-service-auth-v2-attributecontext-peer-certificate"><span class="std std-ref">certificate</span></a> to the <cite>ext_authz</cite> service.</p></li>
<li><p>fault: fixed an issue where the http fault filter would repeatedly check the percentage of abort/delay when the <cite>x-envoy-downstream-service-cluster</cite> header was included in the request to ensure that the actual percentage of abort/delay matches the configuration of the filter.</p></li>
<li><p>health check: gRPC health checker sets the gRPC deadline to the configured timeout duration.</p></li>
<li><p>health check: added <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-msg-core-healthcheck-tlsoptions"><span class="std std-ref">TlsOptions</span></a> to allow TLS configuration overrides.</p></li>
<li><p>health check: added <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-httphealthcheck-service-name-matcher"><span class="std std-ref">service_name_matcher</span></a> to better compare the service name patterns for health check identity.</p></li>
<li><p>http: added strict validation that CONNECT is refused as it is not yet implemented. This can be reversed temporarily by setting the runtime feature <cite>envoy.reloadable_features.strict_method_validation</cite> to false.</p></li>
<li><p>http: added support for http1 trailers. To enable use <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http1protocoloptions-enable-trailers"><span class="std std-ref">enable_trailers</span></a>.</p></li>
<li><p>http: added the ability to sanitize headers nominated by the Connection header. This new behavior is guarded by envoy.reloadable_features.connection_header_sanitization which defaults to true.</p></li>
<li><p>http: blocks unsupported transfer-encodings. Can be reverted temporarily by setting runtime feature <cite>envoy.reloadable_features.reject_unsupported_transfer_encodings</cite> to false.</p></li>
<li><p>http: support <a class="reference internal" href="../api-v2/config/filter/http/dynamic_forward_proxy/v2alpha/dynamic_forward_proxy.proto.html#envoy-api-field-config-filter-http-dynamic-forward-proxy-v2alpha-perrouteconfig-auto-host-rewrite-header"><span class="std std-ref">auto_host_rewrite_header</span></a> in the dynamic forward proxy.</p></li>
<li><p>jwt_authn: added <a class="reference internal" href="../api-v2/config/filter/http/jwt_authn/v2alpha/config.proto.html#envoy-api-field-config-filter-http-jwt-authn-v2alpha-jwtrequirement-allow-missing"><span class="std std-ref">allow_missing</span></a> option that accepts request without token but rejects bad request with bad tokens.</p></li>
<li><p>jwt_authn: added <a class="reference internal" href="../api-v2/config/filter/http/jwt_authn/v2alpha/config.proto.html#envoy-api-field-config-filter-http-jwt-authn-v2alpha-jwtauthentication-bypass-cors-preflight"><span class="std std-ref">bypass_cors_preflight</span></a> to allow bypassing the CORS preflight request.</p></li>
<li><p>lb_subset_config: new fallback policy for selectors: <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-enum-value-cluster-lbsubsetconfig-lbsubsetselector-lbsubsetselectorfallbackpolicy-keys-subset"><span class="std std-ref">KEYS_SUBSET</span></a></p></li>
<li><p>listeners: added <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-reuse-port"><span class="std std-ref">reuse_port</span></a> option.</p></li>
<li><p>logger: added <a class="reference internal" href="../operations/cli.html#operations-cli"><span class="std std-ref">–log-format-escaped</span></a> command line option to escape newline characters in application logs.</p></li>
<li><p>ratelimit: added <a class="reference internal" href="../configuration/listeners/network_filters/local_rate_limit_filter.html#config-network-filters-local-rate-limit"><span class="std std-ref">local rate limit</span></a> network filter.</p></li>
<li><p>rbac: added support for matching all subject alt names instead of first in <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-principal-authenticated-principal-name"><span class="std std-ref">principal_name</span></a>.</p></li>
<li><p>redis: performance improvement for larger split commands by avoiding string copies.</p></li>
<li><p>redis: correctly follow MOVE/ASK redirection for mirrored clusters.</p></li>
<li><p>redis: add <a class="reference internal" href="../api-v2/config/cluster/redis/redis_cluster.proto.html#envoy-api-field-config-cluster-redis-redisclusterconfig-host-degraded-refresh-threshold"><span class="std std-ref">host_degraded_refresh_threshold</span></a> and <a class="reference internal" href="../api-v2/config/cluster/redis/redis_cluster.proto.html#envoy-api-field-config-cluster-redis-redisclusterconfig-failure-refresh-threshold"><span class="std std-ref">failure_refresh_threshold</span></a> to refresh topology when nodes are degraded or when requests fails.</p></li>
<li><p>router: added histograms to show timeout budget usage to the <a class="reference internal" href="../configuration/upstream/cluster_manager/cluster_stats.html#config-cluster-manager-cluster-stats"><span class="std std-ref">cluster stats</span></a>.</p></li>
<li><p>router check tool: added support for testing and marking coverage for routes of runtime fraction 0.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-request-mirror-policies"><span class="std std-ref">request_mirror_policies</span></a> to support sending multiple mirrored requests in one route.</p></li>
<li><p>router: added support for REQ(header-name) <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">header formatter</span></a>.</p></li>
<li><p>router: added support for percentage-based <a class="reference internal" href="../api-v2/api/v2/cluster/circuit_breaker.proto.html#envoy-api-field-cluster-circuitbreakers-thresholds-retry-budget"><span class="std std-ref">retry budgets</span></a></p></li>
<li><p>router: allow using a <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-hashpolicy-query-parameter"><span class="std std-ref">query parameter</span></a> for HTTP consistent hashing.</p></li>
<li><p>router: exposed DOWNSTREAM_REMOTE_ADDRESS as custom HTTP request/response headers.</p></li>
<li><p>router: added support for <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-max-internal-redirects"><span class="std std-ref">max_internal_redirects</span></a> for configurable maximum internal redirect hops.</p></li>
<li><p>router: skip the Location header when the response code is not a 201 or a 3xx.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-upstreamhttpprotocoloptions-auto-sni"><span class="std std-ref">auto_sni</span></a> to support setting SNI to transport socket for new upstream connections based on the downstream HTTP host/authority header.</p></li>
<li><p>router: added support for HOSTNAME <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">header formatter</span></a>.</p></li>
<li><p>server: added the <a class="reference internal" href="../operations/cli.html#cmdoption-disable-extensions"><code class="xref std std-option docutils literal notranslate"><span class="pre">--disable-extensions</span></code></a> CLI option, to disable extensions at startup.</p></li>
<li><p>server: fixed a bug in config validation for configs with runtime layers.</p></li>
<li><p>server: added <a class="reference internal" href="../configuration/listeners/stats.html#config-listener-manager-stats"><span class="std std-ref">workers_started</span></a> that indicates whether listeners have been fully initialized on workers.</p></li>
<li><p>tcp_proxy: added <a class="reference internal" href="../api-v2/config/filter/network/tcp_proxy/v2/tcp_proxy.proto.html#envoy-api-field-config-filter-network-tcp-proxy-v2-tcpproxy-weightedcluster-clusterweight-metadata-match"><span class="std std-ref">ClusterWeight.metadata_match</span></a>.</p></li>
<li><p>tcp_proxy: added <a class="reference internal" href="../api-v2/config/filter/network/tcp_proxy/v2/tcp_proxy.proto.html#envoy-api-field-config-filter-network-tcp-proxy-v2-tcpproxy-hash-policy"><span class="std std-ref">hash_policy</span></a>.</p></li>
<li><p>thrift_proxy: added support for cluster header based routing.</p></li>
<li><p>thrift_proxy: added stats to the router filter.</p></li>
<li><p>tls: remove TLS 1.0 and 1.1 from client defaults</p></li>
<li><p>tls: added support for <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-match-subject-alt-names"><span class="std std-ref">generic string matcher</span></a> for subject alternative names.</p></li>
<li><p>tracing: added the ability to set custom tags on both the <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-tracing"><span class="std std-ref">HTTP connection manager</span></a> and the <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-route-tracing"><span class="std std-ref">HTTP route</span></a>.</p></li>
<li><p>tracing: added upstream_address tag.</p></li>
<li><p>tracing: added initial support for AWS X-Ray (local sampling rules only) <a class="reference internal" href="../api-v2/config/trace/v2alpha/xray.proto.html#envoy-api-msg-config-trace-v2alpha-xrayconfig"><span class="std std-ref">X-Ray Tracing</span></a>.</p></li>
<li><p>tracing: added tags for gRPC request path, authority, content-type and timeout.</p></li>
<li><p>udp: added initial support for <a class="reference internal" href="../configuration/listeners/udp_filters/udp_proxy.html#config-udp-listener-filters-udp-proxy"><span class="std std-ref">UDP proxy</span></a></p></li>
</ul>
</div>
<div class="section" id="id2">
<h2>1.12.3 (March 3, 2020)<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>buffer: force copy when appending small slices to OwnedImpl buffer to avoid fragmentation.</p></li>
<li><p>http: added HTTP/1.1 flood protection. Can be temporarily disabled using the runtime feature <cite>envoy.reloadable_features.http1_flood_protection</cite>.</p></li>
<li><p>listeners: fixed issue where <a class="reference internal" href="../configuration/listeners/listener_filters/tls_inspector.html#config-listener-filters-tls-inspector"><span class="std std-ref">TLS inspector listener filter</span></a> could have been bypassed by a client using only TLS 1.3.</p></li>
<li><p>rbac: added <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-permission-url-path"><span class="std std-ref">url_path</span></a> for matching URL path without the query and fragment string.</p></li>
<li><p>sds: fixed the SDS vulnerability that TLS validation context (e.g., subject alt name or hash) cannot be effectively validated in some cases.</p></li>
</ul>
</div>
<div class="section" id="december-10-2019">
<h2>1.12.2 (December 10, 2019)<a class="headerlink" href="#december-10-2019" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>http: fixed CVE-2019-18801 by allocating sufficient memory for request headers.</p></li>
<li><p>http: fixed CVE-2019-18802 by implementing stricter validation of HTTP/1 headers.</p></li>
<li><p>http: trim LWS at the end of header keys, for correct HTTP/1.1 header parsing.</p></li>
<li><p>http: added strict authority checking. This can be reversed temporarily by setting the runtime feature <cite>envoy.reloadable_features.strict_authority_validation</cite> to false.</p></li>
<li><p>route config: fixed CVE-2019-18838 by checking for presence of host/path headers.</p></li>
</ul>
</div>
<div class="section" id="november-8-2019">
<h2>1.12.1 (November 8, 2019)<a class="headerlink" href="#november-8-2019" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>listener: fixed CVE-2019-18836 by clearing accept filters before connection creation.</p></li>
</ul>
</div>
<div class="section" id="october-31-2019">
<h2>1.12.0 (October 31, 2019)<a class="headerlink" href="#october-31-2019" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added a new flag for <a class="reference internal" href="../api-v2/data/accesslog/v2/accesslog.proto.html#envoy-api-field-data-accesslog-v2-responseflags-downstream-protocol-error"><span class="std std-ref">downstream protocol error</span></a>.</p></li>
<li><p>access log: added <a class="reference internal" href="../api-v2/config/accesslog/v2/als.proto.html#envoy-api-field-config-accesslog-v2-commongrpcaccesslogconfig-buffer-size-bytes"><span class="std std-ref">buffering</span></a> and <a class="reference internal" href="../api-v2/config/accesslog/v2/als.proto.html#envoy-api-field-config-accesslog-v2-commongrpcaccesslogconfig-buffer-flush-interval"><span class="std std-ref">periodical flushing</span></a> support to gRPC access logger. Defaults to 16KB buffer and flushing every 1 second.</p></li>
<li><p>access log: added DOWNSTREAM_DIRECT_REMOTE_ADDRESS and DOWNSTREAM_DIRECT_REMOTE_ADDRESS_WITHOUT_PORT <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format"><span class="std std-ref">access log formatters</span></a> and gRPC access logger.</p></li>
<li><p>access log: gRPC Access Log Service (ALS) support added for <a class="reference internal" href="../api-v2/config/accesslog/v2/als.proto.html#envoy-api-msg-config-accesslog-v2-tcpgrpcaccesslogconfig"><span class="std std-ref">TCP access logs</span></a>.</p></li>
<li><p>access log: reintroduced <a class="reference internal" href="../configuration/observability/statistics.html#filesystem-stats"><span class="std std-ref">filesystem</span></a> stats and added the <cite>write_failed</cite> counter to track failed log writes.</p></li>
<li><p>admin: added ability to configure listener <a class="reference internal" href="../api-v2/config/bootstrap/v2/bootstrap.proto.html#envoy-api-field-config-bootstrap-v2-admin-socket-options"><span class="std std-ref">socket options</span></a>.</p></li>
<li><p>admin: added config dump support for Secret Discovery Service <a class="reference internal" href="../api-v2/admin/v2alpha/config_dump.proto.html#envoy-api-msg-admin-v2alpha-secretsconfigdump"><span class="std std-ref">SecretConfigDump</span></a>.</p></li>
<li><p>admin: added support for <a class="reference internal" href="../operations/admin.html#operations-admin-interface-drain"><span class="std std-ref">draining</span></a> listeners via admin interface.</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#get--stats-recentlookups" title="GET /stats/recentlookups"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/stats/recentlookups</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--stats-recentlookups-clear" title="POST /stats/recentlookups/clear"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/stats/recentlookups/clear</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--stats-recentlookups-disable" title="POST /stats/recentlookups/disable"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/stats/recentlookups/disable</span></code></a>, and <a class="reference internal" href="../operations/admin.html#post--stats-recentlookups-enable" title="POST /stats/recentlookups/enable"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/stats/recentlookups/enable</span></code></a> endpoints.</p></li>
<li><p>api: added <a class="reference internal" href="../api-v2/api/v2/core/config_source.proto.html#envoy-api-field-core-apiconfigsource-set-node-on-first-message-only"><span class="std std-ref">set_node_on_first_message_only</span></a> option to omit the node identifier from the subsequent discovery requests on the same stream.</p></li>
<li><p>buffer filter: now populates content-length header if not present. This behavior can be temporarily disabled using the runtime feature <cite>envoy.reloadable_features.buffer_filter_populate_content_length</cite>.</p></li>
<li><p>build: official released binary is now PIE so it can be run with ASLR.</p></li>
<li><p>config: added support for <a class="reference internal" href="arch_overview/operations/dynamic_configuration.html#arch-overview-dynamic-config-delta"><span class="std std-ref">delta xDS</span></a> (including ADS) delivery.</p></li>
<li><p>config: enforcing that terminal filters (e.g. HttpConnectionManager for L4, router for L7) be the last in their respective filter chains.</p></li>
<li><p>config: added access log <a class="reference internal" href="../api-v2/config/filter/accesslog/v2/accesslog.proto.html#envoy-api-field-config-filter-accesslog-v2-accesslogfilter-extension-filter"><span class="std std-ref">extension filter</span></a>.</p></li>
<li><p>config: added support for <a class="reference internal" href="../operations/cli.html#cmdoption-reject-unknown-dynamic-fields"><code class="xref std std-option docutils literal notranslate"><span class="pre">--reject-unknown-dynamic-fields</span></code></a>, providing independent control
over whether unknown fields are rejected in static and dynamic configuration. By default, unknown
fields in static configuration are rejected and are allowed in dynamic configuration. Warnings
are logged for the first use of any unknown field and these occurrences are counted in the
<a class="reference internal" href="../configuration/observability/statistics.html#server-statistics"><span class="std std-ref">server.static_unknown_fields</span></a> and <a class="reference internal" href="../configuration/observability/statistics.html#server-statistics"><span class="std std-ref">server.dynamic_unknown_fields</span></a> statistics.</p></li>
<li><p>config: added async data access for local and remote data sources.</p></li>
<li><p>config: changed the default value of <a class="reference internal" href="../api-v2/api/v2/core/config_source.proto.html#envoy-api-field-core-configsource-initial-fetch-timeout"><span class="std std-ref">initial_fetch_timeout</span></a> from 0s to 15s. This is a change in behaviour in the sense that Envoy will move to the next initialization phase, even if the first config is not delivered in 15s. Refer to <a class="reference internal" href="arch_overview/operations/init.html#arch-overview-initialization"><span class="std std-ref">initialization process</span></a> for more details.</p></li>
<li><p>config: added stat <a class="reference internal" href="../configuration/upstream/cluster_manager/cds.html#config-cluster-manager-cds"><span class="std std-ref">init_fetch_timeout</span></a>.</p></li>
<li><p>config: tls_context in Cluster and FilterChain are deprecated in favor of transport socket. See <a class="reference internal" href="deprecated.html#deprecated"><span class="std std-ref">deprecated documentation</span></a> for more information.</p></li>
<li><p>csrf: added PATCH to supported methods.</p></li>
<li><p>dns: added support for configuring <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-dns-failure-refresh-rate"><span class="std std-ref">dns_failure_refresh_rate</span></a> to set the DNS refresh rate during failures.</p></li>
<li><p>ext_authz: added <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-metadata-context-namespaces"><span class="std std-ref">configurable ability</span></a> to send dynamic metadata to the <cite>ext_authz</cite> service.</p></li>
<li><p>ext_authz: added <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-filter-enabled"><span class="std std-ref">filter_enabled RuntimeFractionalPercent flag</span></a> to filter.</p></li>
<li><p>ext_authz: added tracing to the HTTP client.</p></li>
<li><p>ext_authz: deprecated <a class="reference internal" href="../configuration/http/http_filters/ext_authz_filter.html#config-http-filters-ext-authz-stats"><span class="std std-ref">cluster scope stats</span></a> in favour of filter scope stats.</p></li>
<li><p>fault: added overrides for default runtime keys in <a class="reference internal" href="../api-v2/config/filter/http/fault/v2/fault.proto.html#envoy-api-msg-config-filter-http-fault-v2-httpfault"><span class="std std-ref">HTTPFault</span></a> filter.</p></li>
<li><p>grpc: added <a class="reference internal" href="../api-v2/config/grpc_credential/v2alpha/aws_iam.proto.html#envoy-api-file-envoy-config-grpc-credential-v2alpha-aws-iam-proto"><span class="std std-ref">AWS IAM grpc credentials extension</span></a> for AWS-managed xDS.</p></li>
<li><p>grpc: added <a class="reference internal" href="../configuration/http/http_filters/grpc_stats_filter.html#config-http-filters-grpc-stats"><span class="std std-ref">gRPC stats filter</span></a> for collecting stats about gRPC calls and streaming message counts.</p></li>
<li><p>grpc-json: added support for <a class="reference internal" href="../api-v2/config/filter/http/transcoder/v2/transcoder.proto.html#envoy-api-field-config-filter-http-transcoder-v2-grpcjsontranscoder-ignore-unknown-query-parameters"><span class="std std-ref">ignoring unknown query parameters</span></a>.</p></li>
<li><p>grpc-json: added support for <a class="reference internal" href="../api-v2/config/filter/http/transcoder/v2/transcoder.proto.html#envoy-api-field-config-filter-http-transcoder-v2-grpcjsontranscoder-convert-grpc-status"><span class="std std-ref">the grpc-status-details-bin header</span></a>.</p></li>
<li><p>header to metadata: added <a class="reference internal" href="../api-v2/config/filter/http/header_to_metadata/v2/header_to_metadata.proto.html#envoy-api-enum-value-config-filter-http-header-to-metadata-v2-config-valuetype-protobuf-value"><span class="std std-ref">PROTOBUF_VALUE</span></a> and <a class="reference internal" href="../api-v2/config/filter/http/header_to_metadata/v2/header_to_metadata.proto.html#envoy-api-enum-config-filter-http-header-to-metadata-v2-config-valueencode"><span class="std std-ref">ValueEncode</span></a> to support protobuf Value and Base64 encoding.</p></li>
<li><p>http: added a default one hour idle timeout to upstream and downstream connections. HTTP connections with no streams and no activity will be closed after one hour unless the default idle_timeout is overridden. To disable upstream idle timeouts, set the <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-httpprotocoloptions-idle-timeout"><span class="std std-ref">idle_timeout</span></a> to zero in Cluster <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-common-http-protocol-options"><span class="std std-ref">http_protocol_options</span></a>. To disable downstream idle timeouts, either set <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-httpprotocoloptions-idle-timeout"><span class="std std-ref">idle_timeout</span></a> to zero in the HttpConnectionManager <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-common-http-protocol-options"><span class="std std-ref">common_http_protocol_options</span></a> or set the deprecated <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-idle-timeout"><span class="std std-ref">connection manager</span></a> field to zero.</p></li>
<li><p>http: added the ability to format HTTP/1.1 header keys using <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http1protocoloptions-header-key-format"><span class="std std-ref">header_key_format</span></a>.</p></li>
<li><p>http: added the ability to reject HTTP/1.1 requests with invalid HTTP header values, using the runtime feature <cite>envoy.reloadable_features.strict_header_validation</cite>.</p></li>
<li><p>http: changed Envoy to forward existing x-forwarded-proto from upstream trusted proxies. Guarded by <cite>envoy.reloadable_features.trusted_forwarded_proto</cite> which defaults true.</p></li>
<li><p>http: added the ability to configure the behavior of the server response header, via the <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-server-header-transformation"><span class="std std-ref">server_header_transformation</span></a> field.</p></li>
<li><p>http: added the ability to <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-merge-slashes"><span class="std std-ref">merge adjacent slashes</span></a> in the path.</p></li>
<li><p>http: <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-enum-value-config-filter-network-http-connection-manager-v2-httpconnectionmanager-codectype-auto"><span class="std std-ref">AUTO</span></a> codec protocol inference now requires the H2 magic bytes to be the first bytes transmitted by a downstream client.</p></li>
<li><p>http: remove h2c upgrade headers for HTTP/1 as h2c upgrades are currently not supported.</p></li>
<li><p>http: absolute URL support is now on by default. The prior behavior can be reinstated by setting <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http1protocoloptions-allow-absolute-url"><span class="std std-ref">allow_absolute_url</span></a> to false.</p></li>
<li><p>http: support <a class="reference internal" href="../api-v2/config/filter/http/dynamic_forward_proxy/v2alpha/dynamic_forward_proxy.proto.html#envoy-api-msg-config-filter-http-dynamic-forward-proxy-v2alpha-perrouteconfig"><span class="std std-ref">host rewrite</span></a> in the dynamic forward proxy.</p></li>
<li><p>http: support <a class="reference internal" href="../api-v2/config/filter/http/grpc_http1_reverse_bridge/v2alpha1/config.proto.html#envoy-api-msg-config-filter-http-grpc-http1-reverse-bridge-v2alpha1-filterconfigperroute"><span class="std std-ref">disabling the filter per route</span></a> in the grpc http1 reverse bridge filter.</p></li>
<li><p>http: added the ability to <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-httpprotocoloptions-max-connection-duration"><span class="std std-ref">configure max connection duration</span></a> for downstream connections.</p></li>
<li><p>listeners: added <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-continue-on-listener-filters-timeout"><span class="std std-ref">continue_on_listener_filters_timeout</span></a> to configure whether a listener will still create a connection when listener filters time out.</p></li>
<li><p>listeners: added <a class="reference internal" href="../configuration/listeners/listener_filters/http_inspector.html#config-listener-filters-http-inspector"><span class="std std-ref">HTTP inspector listener filter</span></a>.</p></li>
<li><p>listeners: added <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-connection-balance-config"><span class="std std-ref">connection balancer</span></a>
configuration for TCP listeners.</p></li>
<li><p>listeners: listeners now close the listening socket as part of the draining stage as soon as workers stop accepting their connections.</p></li>
<li><p>lua: extended <cite>httpCall()</cite> and <cite>respond()</cite> APIs to accept headers with entry values that can be a string or table of strings.</p></li>
<li><p>lua: extended <cite>dynamicMetadata:set()</cite> to allow setting complex values.</p></li>
<li><p>metrics_service: added support for flushing histogram buckets.</p></li>
<li><p>outlier_detector: added <a class="reference internal" href="arch_overview/upstream/outlier.html#arch-overview-outlier-detection-grpc"><span class="std std-ref">support for the grpc-status response header</span></a> by mapping it to HTTP status. Guarded by envoy.reloadable_features.outlier_detection_support_for_grpc_status which defaults to true.</p></li>
<li><p>performance: new buffer implementation enabled by default (to disable add “–use-libevent-buffers 1” to the command-line arguments when starting Envoy).</p></li>
<li><p>performance: stats symbol table implementation (disabled by default; to test it, add “–use-fake-symbol-table 0” to the command-line arguments when starting Envoy).</p></li>
<li><p>rbac: added support for DNS SAN as <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-principal-authenticated-principal-name"><span class="std std-ref">principal_name</span></a>.</p></li>
<li><p>redis: added <a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-connpoolsettings-enable-command-stats"><span class="std std-ref">enable_command_stats</span></a> to enable <a class="reference internal" href="arch_overview/other_protocols/redis.html#arch-overview-redis-cluster-command-stats"><span class="std std-ref">per command statistics</span></a> for upstream clusters.</p></li>
<li><p>redis: added <a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-connpoolsettings-read-policy"><span class="std std-ref">read_policy</span></a> to allow reading from redis replicas for Redis Cluster deployments.</p></li>
<li><p>redis: fixed a bug where the redis health checker ignored the upstream auth password.</p></li>
<li><p>redis: enable_hashtaging is always enabled when the upstream uses open source Redis cluster protocol.</p></li>
<li><p>regex: introduced new <a class="reference internal" href="../api-v2/type/matcher/regex.proto.html#envoy-api-msg-type-matcher-regexmatcher"><span class="std std-ref">RegexMatcher</span></a> type that
provides a safe regex implementation for untrusted user input. This type is now used in all
configuration that processes user provided input. See <a class="reference internal" href="deprecated.html#deprecated"><span class="std std-ref">deprecated configuration details</span></a> for more information.</p></li>
<li><p>rbac: added conditions to the policy, see <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-policy-condition"><span class="std std-ref">condition</span></a>.</p></li>
<li><p>router: added <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-stats"><span class="std std-ref">rq_retry_skipped_request_not_complete</span></a> counter stat to router stats.</p></li>
<li><p>router: <a class="reference internal" href="arch_overview/http/http_routing.html#arch-overview-http-routing-route-scope"><span class="std std-ref">scoped routing</span></a> is supported.</p></li>
<li><p>router: added new <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-on"><span class="std std-ref">retriable-headers</span></a> retry policy. Retries can now be configured to trigger by arbitrary response header matching.</p></li>
<li><p>router: added ability for most specific header mutations to take precedence, see <a class="reference internal" href="../api-v2/api/v2/route.proto.html#envoy-api-field-routeconfiguration-most-specific-header-mutations-wins"><span class="std std-ref">route configuration’s most specific
header mutations wins flag</span></a>.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/config/filter/http/router/v2/router.proto.html#envoy-api-field-config-filter-http-router-v2-router-respect-expected-rq-timeout"><span class="std std-ref">respect_expected_rq_timeout</span></a> that instructs ingress Envoy to respect <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-expected-rq-timeout-ms"><span class="std std-ref">x-envoy-expected-rq-timeout-ms</span></a> header, populated by egress Envoy, when deriving timeout for upstream cluster.</p></li>
<li><p>router: added new <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-route-per-request-buffer-limit-bytes"><span class="std std-ref">retriable request headers</span></a> to route configuration, to allow limiting buffering for retries and shadowing.</p></li>
<li><p>router: added new <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-retrypolicy-retriable-request-headers"><span class="std std-ref">retriable request headers</span></a> to retry policies. Retries can now be configured to only trigger on request header match.</p></li>
<li><p>router: added the ability to match a route based on whether a TLS certificate has been
<a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routematch-tlscontextmatchoptions-presented"><span class="std std-ref">presented</span></a> by the
downstream connection.</p></li>
<li><p>router check tool: added coverage reporting &amp; enforcement.</p></li>
<li><p>router check tool: added comprehensive coverage reporting.</p></li>
<li><p>router check tool: added deprecated field check.</p></li>
<li><p>router check tool: added flag for only printing results of failed tests.</p></li>
<li><p>router check tool: added support for outputting missing tests in the detailed coverage report.</p></li>
<li><p>router check tool: added coverage reporting for direct response routes.</p></li>
<li><p>runtime: allows for the ability to parse boolean values.</p></li>
<li><p>runtime: allows for the ability to parse integers as double values and vice-versa.</p></li>
<li><p>sds: added <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys-sds-secret-config"><span class="std std-ref">session_ticket_keys_sds_secret_config</span></a> for loading TLS Session Ticket Encryption Keys using SDS API.</p></li>
<li><p>server: added a post initialization lifecycle event, in addition to the existing startup and shutdown events.</p></li>
<li><p>server: added <a class="reference internal" href="../configuration/listeners/stats.html#config-listener-stats-per-handler"><span class="std std-ref">per-handler listener stats</span></a> and
<a class="reference internal" href="../operations/performance.html#operations-performance-watchdog"><span class="std std-ref">per-worker watchdog stats</span></a> to help diagnosing event
loop imbalance and general performance issues.</p></li>
<li><p>stats: added unit support to histogram.</p></li>
<li><p>tcp_proxy: the default <a class="reference internal" href="../api-v2/config/filter/network/tcp_proxy/v2/tcp_proxy.proto.html#envoy-api-field-config-filter-network-tcp-proxy-v2-tcpproxy-idle-timeout"><span class="std std-ref">idle_timeout</span></a> is now 1 hour.</p></li>
<li><p>thrift_proxy: fixed crashing bug on invalid transport/protocol framing.</p></li>
<li><p>thrift_proxy: added support for stripping service name from method when using the multiplexed protocol.</p></li>
<li><p>tls: added verification of IP address SAN fields in certificates against configured SANs in the certificate validation context.</p></li>
<li><p>tracing: added support to the Zipkin reporter for sending list of spans as Zipkin JSON v2 and protobuf message over HTTP.
certificate validation context.</p></li>
<li><p>tracing: added tags for gRPC response status and message.</p></li>
<li><p>tracing: added <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-tracing"><span class="std std-ref">max_path_tag_length</span></a> to support customizing the length of the request path included in the extracted <a class="reference external" href="https://github.com/opentracing/specification/blob/master/semantic_conventions.md#standard-span-tags-and-log-fields">http.url</a> tag.</p></li>
<li><p>upstream: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-close-connections-on-host-set-change"><span class="std std-ref">an option</span></a> that allows draining HTTP, TCP connection pools on cluster membership change.</p></li>
<li><p>upstream: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-transport-socket-matches"><span class="std std-ref">transport_socket_matches</span></a>, support using different transport socket config when connecting to different upstream endpoints within a cluster.</p></li>
<li><p>upstream: added network filter chains to upstream connections, see <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-filters"><span class="std std-ref">filters</span></a>.</p></li>
<li><p>upstream: added new <a class="reference internal" href="arch_overview/upstream/outlier.html#arch-overview-outlier-detection-failure-percentage"><span class="std std-ref">failure-percentage based outlier detection</span></a> mode.</p></li>
<li><p>upstream: uses p2c to select hosts for least-requests load balancers if all host weights are the same, even in cases where weights are not equal to 1.</p></li>
<li><p>upstream: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-zoneawarelbconfig-fail-traffic-on-panic"><span class="std std-ref">fail_traffic_on_panic</span></a> to allow failing all requests to a cluster during panic state.</p></li>
<li><p>zookeeper: parses responses and emits latency stats.</p></li>
</ul>
</div>
<div class="section" id="october-8-2019">
<h2>1.11.2 (October 8, 2019)<a class="headerlink" href="#october-8-2019" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>http: fixed CVE-2019-15226 by adding a cached byte size in HeaderMap.</p></li>
<li><p>http: added <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-httpprotocoloptions-max-headers-count"><span class="std std-ref">max headers count</span></a> for http connections. The default limit is 100.</p></li>
<li><p>upstream: runtime feature <cite>envoy.reloadable_features.max_response_headers_count</cite> overrides the default limit for upstream <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-common-http-protocol-options"><span class="std std-ref">max headers count</span></a></p></li>
<li><p>http: added <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-common-http-protocol-options"><span class="std std-ref">common_http_protocol_options</span></a>
Runtime feature <cite>envoy.reloadable_features.max_request_headers_count</cite> overrides the default limit for downstream <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-common-http-protocol-options"><span class="std std-ref">max headers count</span></a></p></li>
<li><p>regex: backported safe regex matcher fix for CVE-2019-15225.</p></li>
</ul>
</div>
<div class="section" id="august-13-2019">
<h2>1.11.1 (August 13, 2019)<a class="headerlink" href="#august-13-2019" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>http: added mitigation of client initiated attacks that result in flooding of the downstream HTTP/2 connections. Those attacks can be logged at the “warning” level when the runtime feature <cite>http.connection_manager.log_flood_exception</cite> is enabled. The runtime setting defaults to disabled to avoid log spam when under attack.</p></li>
<li><p>http: added <a class="reference internal" href="../configuration/http/http_conn_man/stats.html#config-http-conn-man-stats-per-codec"><span class="std std-ref">inbound_empty_frames_flood</span></a> counter stat to the HTTP/2 codec stats, for tracking number of connections terminated for exceeding the limit on consecutive inbound frames with an empty payload and no end stream flag. The limit is configured by setting the <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-max-consecutive-inbound-frames-with-empty-payload"><span class="std std-ref">max_consecutive_inbound_frames_with_empty_payload config setting</span></a>.
Runtime feature <cite>envoy.reloadable_features.http2_protocol_options.max_consecutive_inbound_frames_with_empty_payload</cite> overrides <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-max-consecutive-inbound-frames-with-empty-payload"><span class="std std-ref">max_consecutive_inbound_frames_with_empty_payload setting</span></a>. Large override value (i.e. 2147483647) effectively disables mitigation of inbound frames with empty payload.</p></li>
<li><p>http: added <a class="reference internal" href="../configuration/http/http_conn_man/stats.html#config-http-conn-man-stats-per-codec"><span class="std std-ref">inbound_priority_frames_flood</span></a> counter stat to the HTTP/2 codec stats, for tracking number of connections terminated for exceeding the limit on inbound PRIORITY frames. The limit is configured by setting the <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-max-inbound-priority-frames-per-stream"><span class="std std-ref">max_inbound_priority_frames_per_stream config setting</span></a>.
Runtime feature <cite>envoy.reloadable_features.http2_protocol_options.max_inbound_priority_frames_per_stream</cite> overrides <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-max-inbound-priority-frames-per-stream"><span class="std std-ref">max_inbound_priority_frames_per_stream setting</span></a>. Large override value effectively disables flood mitigation of inbound PRIORITY frames.</p></li>
<li><p>http: added <a class="reference internal" href="../configuration/http/http_conn_man/stats.html#config-http-conn-man-stats-per-codec"><span class="std std-ref">inbound_window_update_frames_flood</span></a> counter stat to the HTTP/2 codec stats, for tracking number of connections terminated for exceeding the limit on inbound WINDOW_UPDATE frames. The limit is configured by setting the <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-max-inbound-window-update-frames-per-data-frame-sent"><span class="std std-ref">max_inbound_window_update_frames_per_data_frame_sent config setting</span></a>.
Runtime feature <cite>envoy.reloadable_features.http2_protocol_options.max_inbound_window_update_frames_per_data_frame_sent</cite> overrides <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-max-inbound-window-update-frames-per-data-frame-sent"><span class="std std-ref">max_inbound_window_update_frames_per_data_frame_sent setting</span></a>. Large override value effectively disables flood mitigation of inbound WINDOW_UPDATE frames.</p></li>
<li><p>http: added <a class="reference internal" href="../configuration/http/http_conn_man/stats.html#config-http-conn-man-stats-per-codec"><span class="std std-ref">outbound_flood</span></a> counter stat to the HTTP/2 codec stats, for tracking number of connections terminated for exceeding the outbound queue limit. The limit is configured by setting the <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-max-outbound-frames"><span class="std std-ref">max_outbound_frames config setting</span></a>
Runtime feature <cite>envoy.reloadable_features.http2_protocol_options.max_outbound_frames</cite> overrides <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-max-outbound-frames"><span class="std std-ref">max_outbound_frames config setting</span></a>. Large override value effectively disables flood mitigation of outbound frames of all types.</p></li>
<li><p>http: added <a class="reference internal" href="../configuration/http/http_conn_man/stats.html#config-http-conn-man-stats-per-codec"><span class="std std-ref">outbound_control_flood</span></a> counter stat to the HTTP/2 codec stats, for tracking number of connections terminated for exceeding the outbound queue limit for PING, SETTINGS and RST_STREAM frames. The limit is configured by setting the <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-max-outbound-control-frames"><span class="std std-ref">max_outbound_control_frames config setting</span></a>.
Runtime feature <cite>envoy.reloadable_features.http2_protocol_options.max_outbound_control_frames</cite> overrides <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-max-outbound-control-frames"><span class="std std-ref">max_outbound_control_frames config setting</span></a>. Large override value effectively disables flood mitigation of outbound frames of types PING, SETTINGS and RST_STREAM.</p></li>
<li><p>http: enabled strict validation of HTTP/2 messaging. Previous behavior can be restored using <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-stream-error-on-invalid-http-messaging"><span class="std std-ref">stream_error_on_invalid_http_messaging config setting</span></a>.
Runtime feature <cite>envoy.reloadable_features.http2_protocol_options.stream_error_on_invalid_http_messaging</cite> overrides <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-stream-error-on-invalid-http-messaging"><span class="std std-ref">stream_error_on_invalid_http_messaging config setting</span></a>.</p></li>
</ul>
</div>
<div class="section" id="july-11-2019">
<h2>1.11.0 (July 11, 2019)<a class="headerlink" href="#july-11-2019" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added a new field for downstream TLS session ID to file and gRPC access logger.</p></li>
<li><p>access log: added a new field for route name to file and gRPC access logger.</p></li>
<li><p>access log: added a new field for response code details in <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format-response-code-details"><span class="std std-ref">file access logger</span></a> and <a class="reference internal" href="../api-v2/data/accesslog/v2/accesslog.proto.html#envoy-api-field-data-accesslog-v2-httpresponseproperties-response-code-details"><span class="std std-ref">gRPC access logger</span></a>.</p></li>
<li><p>access log: added several new variables for exposing information about the downstream TLS connection to <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format-response-code-details"><span class="std std-ref">file access logger</span></a> and <a class="reference internal" href="../api-v2/data/accesslog/v2/accesslog.proto.html#envoy-api-field-data-accesslog-v2-accesslogcommon-tls-properties"><span class="std std-ref">gRPC access logger</span></a>.</p></li>
<li><p>access log: added a new flag for request rejected due to failed strict header check.</p></li>
<li><p>admin: the administration interface now includes a <a class="reference internal" href="../operations/admin.html#operations-admin-interface"><span class="std std-ref">/ready endpoint</span></a> for easier readiness checks.</p></li>
<li><p>admin: extend <a class="reference internal" href="../operations/admin.html#operations-admin-interface-runtime-modify"><span class="std std-ref">/runtime_modify endpoint</span></a> to support parameters within the request body.</p></li>
<li><p>admin: the <a class="reference internal" href="../operations/admin.html#operations-admin-interface-listeners"><span class="std std-ref">/listener endpoint</span></a> now returns <a class="reference internal" href="../api-v2/admin/v2alpha/listeners.proto.html#envoy-api-msg-admin-v2alpha-listeners"><span class="std std-ref">listeners.proto</span></a> which includes listener names and ports.</p></li>
<li><p>admin: added host priority to <a class="reference internal" href="../operations/admin.html#get--clusters" title="GET /clusters"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/clusters</span></code></a> and <a class="reference internal" href="../operations/admin.html#get--clusters?format=json" title="GET /clusters?format=json"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/clusters?format=json</span></code></a> endpoint response</p></li>
<li><p>admin: the <a class="reference internal" href="../operations/admin.html#operations-admin-interface-clusters"><span class="std std-ref">/clusters endpoint</span></a> now shows hostname
for each host, useful for DNS based clusters.</p></li>
<li><p>api: track and report requests issued since last load report.</p></li>
<li><p>build: releases are built with Clang and linked with LLD.</p></li>
<li><p>config: added :ref:stats_server_version_override` &lt;envoy_api_field_config.bootstrap.v2.Bootstrap.stats_server_version_override&gt;` in bootstrap, that can be used to override <a class="reference internal" href="../configuration/observability/statistics.html#server-statistics"><span class="std std-ref">server.version statistic</span></a>.</p></li>
<li><p>control-plane: management servers can respond with HTTP 304 to indicate that config is up to date for Envoy proxies polling a <a class="reference internal" href="../api-v2/api/v2/core/config_source.proto.html#envoy-api-field-core-apiconfigsource-api-type"><span class="std std-ref">REST API Config Type</span></a></p></li>
<li><p>csrf: added support for whitelisting additional source origins.</p></li>
<li><p>dns: added support for getting DNS record TTL which is used by STRICT_DNS/LOGICAL_DNS cluster as DNS refresh rate.</p></li>
<li><p>dubbo_proxy: support the <a class="reference internal" href="../configuration/listeners/network_filters/dubbo_proxy_filter.html#config-network-filters-dubbo-proxy"><span class="std std-ref">dubbo proxy filter</span></a>.</p></li>
<li><p>dynamo_request_parser: adding support for transactions. Adds check for new types of dynamodb operations (TransactWriteItems, TransactGetItems) and awareness for new types of dynamodb errors (IdempotentParameterMismatchException, TransactionCanceledException, TransactionInProgressException).</p></li>
<li><p>eds: added support to specify max time for which endpoints can be used <a class="reference internal" href="../api-v2/api/v2/endpoint.proto.html#envoy-api-msg-clusterloadassignment-policy"><span class="std std-ref">gRPC filter</span></a>.</p></li>
<li><p>eds: removed max limit for <cite>load_balancing_weight</cite>.</p></li>
<li><p>event: added <a class="reference internal" href="../operations/performance.html#operations-performance"><span class="std std-ref">loop duration and poll delay statistics</span></a>.</p></li>
<li><p>ext_authz: added a <cite>x-envoy-auth-partial-body</cite> metadata header set to <cite>false|true</cite> indicating if there is a partial body sent in the authorization request message.</p></li>
<li><p>ext_authz: added configurable status code that allows customizing HTTP responses on filter check status errors.</p></li>
<li><p>ext_authz: added option to <cite>ext_authz</cite> that allows the filter clearing route cache.</p></li>
<li><p>grpc-json: added support for <a class="reference internal" href="../api-v2/config/filter/http/transcoder/v2/transcoder.proto.html#envoy-api-field-config-filter-http-transcoder-v2-grpcjsontranscoder-auto-mapping"><span class="std std-ref">auto mapping</span></a>.</p></li>
<li><p>health check: added <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-initial-jitter"><span class="std std-ref">initial jitter</span></a> to add jitter to the first health check in order to prevent thundering herd on Envoy startup.</p></li>
<li><p>hot restart: stats are no longer shared between hot restart parent/child via shared memory, but rather by RPC. Hot restart version incremented to 11.</p></li>
<li><p>http: added the ability to pass a URL encoded PEM encoded peer certificate chain in the
<a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-forwarded-client-cert"><span class="std std-ref">x-forwarded-client-cert</span></a> header.</p></li>
<li><p>http: fixed a bug where large unbufferable responses were not tracked in stats and logs correctly.</p></li>
<li><p>http: fixed a crashing bug where gRPC local replies would cause segfaults when upstream access logging was on.</p></li>
<li><p>http: mitigated a race condition with the <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-delayed-close-timeout"><span class="std std-ref">delayed_close_timeout</span></a> where it could trigger while actively flushing a pending write buffer for a downstream connection.</p></li>
<li><p>http: added support for <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-preserve-external-request-id"><span class="std std-ref">preserve_external_request_id</span></a> that represents whether the x-request-id should not be reset on edge entry inside mesh</p></li>
<li><p>http: changed <cite>sendLocalReply</cite> to send percent-encoded <cite>GrpcMessage</cite>.</p></li>
<li><p>http: added a :ref:header_prefix` &lt;envoy_api_field_config.bootstrap.v2.Bootstrap.header_prefix&gt;` configuration option to allow Envoy to send and process x-custom- prefixed headers rather than x-envoy.</p></li>
<li><p>http: added <a class="reference internal" href="arch_overview/http/http_proxy.html#arch-overview-http-dynamic-forward-proxy"><span class="std std-ref">dynamic forward proxy</span></a> support.</p></li>
<li><p>http: tracking the active stream and dumping state in Envoy crash handlers. This can be disabled by building with <cite>–define disable_object_dump_on_signal_trace=disabled</cite></p></li>
<li><p>jwt_authn: make filter’s parsing of JWT more flexible, allowing syntax like <code class="docutils literal notranslate"><span class="pre">jwt=eyJhbGciOiJS...ZFnFIw,extra=7,realm=123</span></code></p></li>
<li><p>listener: added <a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-field-listener-filterchainmatch-source-prefix-ranges"><span class="std std-ref">source IP</span></a>
and <a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-field-listener-filterchainmatch-source-ports"><span class="std std-ref">source port</span></a> filter
chain matching.</p></li>
<li><p>lua: exposed functions to Lua to verify digital signature.</p></li>
<li><p>original_src filter: added the <a class="reference internal" href="../configuration/http/http_filters/original_src_filter.html#config-http-filters-original-src"><span class="std std-ref">filter</span></a>.</p></li>
<li><p>outlier_detector: added configuration <a class="reference internal" href="../api-v2/api/v2/cluster/outlier_detection.proto.html#envoy-api-field-cluster-outlierdetection-split-external-local-origin-errors"><span class="std std-ref">outlier_detection.split_external_local_origin_errors</span></a> to distinguish locally and externally generated errors. See <a class="reference internal" href="arch_overview/upstream/outlier.html#arch-overview-outlier-detection"><span class="std std-ref">Outlier detection</span></a> for full details.</p></li>
<li><p>rbac: migrated from v2alpha to v2.</p></li>
<li><p>redis: add support for Redis cluster custom cluster type.</p></li>
<li><p>redis: automatically route commands using cluster slots for Redis cluster.</p></li>
<li><p>redis: added <a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-prefix-routes"><span class="std std-ref">prefix routing</span></a> to enable routing commands based on their key’s prefix to different upstream.</p></li>
<li><p>redis: added <a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-prefixroutes-route-request-mirror-policy"><span class="std std-ref">request mirror policy</span></a> to enable shadow traffic and/or dual writes.</p></li>
<li><p>redis: add support for zpopmax and zpopmin commands.</p></li>
<li><p>redis: added
<a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-connpoolsettings-max-buffer-size-before-flush"><span class="std std-ref">max_buffer_size_before_flush</span></a> to batch commands together until the encoder buffer hits a certain size, and
<a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-connpoolsettings-buffer-flush-timeout"><span class="std std-ref">buffer_flush_timeout</span></a> to control how quickly the buffer is flushed if it is not full.</p></li>
<li><p>redis: added auth support <a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-downstream-auth-password"><span class="std std-ref">downstream_auth_password</span></a> for downstream client authentication, and <a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisprotocoloptions-auth-password"><span class="std std-ref">auth_password</span></a> to configure authentication passwords for upstream server clusters.</p></li>
<li><p>retry: added a retry predicate that <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-retrypolicy-retry-host-predicate"><span class="std std-ref">rejects canary hosts.</span></a></p></li>
<li><p>router: add support for configuring a <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-grpc-timeout-offset"><span class="std std-ref">gRPC timeout offset</span></a> on incoming requests.</p></li>
<li><p>router: added ability to control retry back-off intervals via <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-retrypolicy-retrybackoff"><span class="std std-ref">retry policy</span></a>.</p></li>
<li><p>router: added ability to issue a hedged retry in response to a per try timeout via a <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-hedgepolicy"><span class="std std-ref">hedge policy</span></a>.</p></li>
<li><p>router: added a route name field to each http route in route.Route list</p></li>
<li><p>router: added several new variables for exposing information about the downstream TLS connection via <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">header
formatters</span></a>.</p></li>
<li><p>router: per try timeouts will no longer start before the downstream request has been received in full by the router.This ensures that the per try timeout does not account for slow downstreams and that will not start before the global timeout.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-auto-host-rewrite-header"><span class="std std-ref">RouteAction’s auto_host_rewrite_header</span></a> to allow upstream host header substitution with some other header’s value</p></li>
<li><p>router: added support for UPSTREAM_REMOTE_ADDRESS <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">header formatter</span></a>.</p></li>
<li><p>router: add ability to reject a request that includes invalid values for
headers configured in <a class="reference internal" href="../api-v2/config/filter/http/router/v2/router.proto.html#envoy-api-field-config-filter-http-router-v2-router-strict-check-headers"><span class="std std-ref">strict_check_headers</span></a></p></li>
<li><p>runtime: added support for <a class="reference internal" href="../api-v2/config/bootstrap/v2/bootstrap.proto.html#envoy-api-field-config-bootstrap-v2-bootstrap-layered-runtime"><span class="std std-ref">flexible layering configuration</span></a>.</p></li>
<li><p>runtime: added support for statically <a class="reference internal" href="../api-v2/config/bootstrap/v2/bootstrap.proto.html#envoy-api-field-config-bootstrap-v2-runtime-base"><span class="std std-ref">specifying the runtime in the bootstrap configuration</span></a>.</p></li>
<li><p>runtime: <a class="reference internal" href="../configuration/operations/runtime.html#config-runtime-rtds"><span class="std std-ref">Runtime Discovery Service (RTDS)</span></a> support added to layered runtime configuration.</p></li>
<li><p>sandbox: added <a class="reference internal" href="../start/sandboxes/csrf.html#install-sandboxes-csrf"><span class="std std-ref">CSRF sandbox</span></a>.</p></li>
<li><p>server: <code class="docutils literal notranslate"><span class="pre">--define</span> <span class="pre">manual_stamp=manual_stamp</span></code> was added to allow server stamping outside of binary rules.
more info in the <a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/bazel/README.md#enabling-optional-features">bazel docs</a>.</p></li>
<li><p>server: added <a class="reference internal" href="../configuration/observability/statistics.html#statistics"><span class="std std-ref">server state</span></a> statistic.</p></li>
<li><p>server: added <a class="reference internal" href="../configuration/observability/statistics.html#statistics"><span class="std std-ref">initialization_time_ms</span></a> statistic.</p></li>
<li><p>subset: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-lbsubsetconfig-list-as-any"><span class="std std-ref">list_as_any</span></a> option to
the subset lb which allows matching metadata against any of the values in a list value
on the endpoints.</p></li>
<li><p>tools: added <a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.14.2/test/tools/router_check/validation.proto">proto</a> support for <a class="reference internal" href="../install/tools/route_table_check_tool.html#install-tools-route-table-check-tool"><span class="std std-ref">router check tool</span></a> tests.</p></li>
<li><p>tracing: add trace sampling configuration to the route, to override the route level.</p></li>
<li><p>upstream: added <a class="reference internal" href="../configuration/upstream/cluster_manager/cluster_stats.html#config-cluster-manager-cluster-stats"><span class="std std-ref">upstream_cx_pool_overflow</span></a> for the connection pool circuit breaker.</p></li>
<li><p>upstream: an EDS management server can now force removal of a host that is still passing active
health checking by first marking the host as failed via EDS health check and subsequently removing
it in a future update. This is a mechanism to work around a race condition in which an EDS
implementation may remove a host before it has stopped passing active HC, thus causing the host
to become stranded until a future update.</p></li>
<li><p>upstream: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-ignore-new-hosts-until-first-hc"><span class="std std-ref">an option</span></a>
that allows ignoring new hosts for the purpose of load balancing calculations until they have
been health checked for the first time.</p></li>
<li><p>upstream: added runtime error checking to prevent setting dns type to STRICT_DNS or LOGICAL_DNS when custom resolver name is specified.</p></li>
<li><p>upstream: added possibility to override fallback_policy per specific selector in <a class="reference internal" href="arch_overview/upstream/load_balancing/subsets.html#arch-overview-load-balancer-subsets"><span class="std std-ref">subset load balancer</span></a>.</p></li>
<li><p>upstream: the <a class="reference internal" href="arch_overview/upstream/service_discovery.html#arch-overview-service-discovery-types-logical-dns"><span class="std std-ref">logical DNS cluster</span></a> now
displays the current resolved IP address in admin output instead of 0.0.0.0.</p></li>
</ul>
</div>
<div class="section" id="apr-5-2019">
<h2>1.10.0 (Apr 5, 2019)<a class="headerlink" href="#apr-5-2019" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added a new flag for upstream retry count exceeded.</p></li>
<li><p>access log: added a <a class="reference internal" href="../api-v2/config/filter/accesslog/v2/accesslog.proto.html#envoy-api-msg-config-filter-accesslog-v2-grpcstatusfilter"><span class="std std-ref">gRPC filter</span></a> to allow filtering on gRPC status.</p></li>
<li><p>access log: added a new flag for stream idle timeout.</p></li>
<li><p>access log: added a new field for upstream transport failure reason in <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format-upstream-transport-failure-reason"><span class="std std-ref">file access logger</span></a> and
<a class="reference internal" href="../api-v2/data/accesslog/v2/accesslog.proto.html#envoy-api-field-data-accesslog-v2-accesslogcommon-upstream-transport-failure-reason"><span class="std std-ref">gRPC access logger</span></a> for HTTP access logs.</p></li>
<li><p>access log: added new fields for downstream x509 information (URI sans and subject) to file and gRPC access logger.</p></li>
<li><p>admin: the admin server can now be accessed via HTTP/2 (prior knowledge).</p></li>
<li><p>admin: changed HTTP response status code from 400 to 405 when attempting to GET a POST-only route (such as /quitquitquit).</p></li>
<li><p>buffer: fix vulnerabilities when allocation fails.</p></li>
<li><p>build: releases are built with GCC-7 and linked with LLD.</p></li>
<li><p>build: dev docker images <a class="reference internal" href="../install/building.html#install-binaries"><span class="std std-ref">have been split</span></a> from tagged images for easier
discoverability in Docker Hub. Additionally, we now build images for point releases.</p></li>
<li><p>config: added support of using google.protobuf.Any in opaque configs for extensions.</p></li>
<li><p>config: logging warnings when deprecated fields are in use.</p></li>
<li><p>config: removed deprecated –v2-config-only from command line config.</p></li>
<li><p>config: removed deprecated_v1 sds_config from <a class="reference internal" href="../configuration/overview/bootstrap.html#config-overview-bootstrap"><span class="std std-ref">Bootstrap config</span></a>.</p></li>
<li><p>config: removed the deprecated_v1 config option from <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-msg-cluster-ringhashlbconfig"><span class="std std-ref">ring hash</span></a>.</p></li>
<li><p>config: removed REST_LEGACY as a valid <a class="reference internal" href="../api-v2/api/v2/core/config_source.proto.html#envoy-api-field-core-apiconfigsource-api-type"><span class="std std-ref">ApiType</span></a>.</p></li>
<li><p>config: finish cluster warming only when a named response i.e. ClusterLoadAssignment associated to the cluster being warmed comes in the EDS response. This is a behavioural change from the current implementation where warming of cluster completes on missing load assignments also.</p></li>
<li><p>config: use Envoy cpuset size to set the default number or worker threads if <a class="reference internal" href="../operations/cli.html#cmdoption-cpuset-threads"><code class="xref std std-option docutils literal notranslate"><span class="pre">--cpuset-threads</span></code></a> is enabled.</p></li>
<li><p>config: added support for <a class="reference internal" href="../api-v2/api/v2/core/config_source.proto.html#envoy-api-field-core-configsource-initial-fetch-timeout"><span class="std std-ref">initial_fetch_timeout</span></a>. The timeout is disabled by default.</p></li>
<li><p>cors: added <a class="reference internal" href="../configuration/http/http_filters/cors_filter.html#cors-runtime"><span class="std std-ref">filter_enabled &amp; shadow_enabled RuntimeFractionalPercent flags</span></a> to filter.</p></li>
<li><p>csrf: added <a class="reference internal" href="../configuration/http/http_filters/csrf_filter.html#config-http-filters-csrf"><span class="std std-ref">CSRF filter</span></a>.</p></li>
<li><p>ext_authz: added support for buffering request body.</p></li>
<li><p>ext_authz: migrated from v2alpha to v2 and improved docs.</p></li>
<li><p>ext_authz: added a configurable option to make the gRPC service cross-compatible with V2Alpha. Note that this feature is already deprecated. It should be used for a short time, and only when transitioning from alpha to V2 release version.</p></li>
<li><p>ext_authz: migrated from v2alpha to v2 and improved the documentation.</p></li>
<li><p>ext_authz: authorization request and response configuration has been separated into two distinct objects: <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-httpservice-authorization-request"><span class="std std-ref">authorization request</span></a> and <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-httpservice-authorization-response"><span class="std std-ref">authorization response</span></a>. In addition, <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-authorizationresponse-allowed-client-headers"><span class="std std-ref">client headers</span></a> and <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-authorizationresponse-allowed-upstream-headers"><span class="std std-ref">upstream headers</span></a> replaces the previous <em>allowed_authorization_headers</em> object.
All the control header lists now support <a class="reference internal" href="../api-v2/type/matcher/string.proto.html#envoy-api-msg-type-matcher-stringmatcher"><span class="std std-ref">string matcher</span></a> instead of standard string.</p></li>
<li><p>fault: added the <a class="reference internal" href="../api-v2/config/filter/http/fault/v2/fault.proto.html#envoy-api-field-config-filter-http-fault-v2-httpfault-max-active-faults"><span class="std std-ref">max_active_faults</span></a> setting, as well as
<a class="reference internal" href="../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-stats"><span class="std std-ref">statistics</span></a> for the number of active faults
and the number of faults the overflowed.</p></li>
<li><p>fault: added <a class="reference internal" href="../api-v2/config/filter/http/fault/v2/fault.proto.html#envoy-api-field-config-filter-http-fault-v2-httpfault-response-rate-limit"><span class="std std-ref">response rate limit</span></a> fault injection.</p></li>
<li><p>fault: added <a class="reference internal" href="../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-http-header"><span class="std std-ref">HTTP header fault configuration</span></a> to the HTTP fault filter.</p></li>
<li><p>governance: extending Envoy deprecation policy from 1 release (0-3 months) to 2 releases (3-6 months).</p></li>
<li><p>health check: expected response codes in http health checks are now <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-msg-core-healthcheck-httphealthcheck"><span class="std std-ref">configurable</span></a>.</p></li>
<li><p>http: added new grpc_http1_reverse_bridge filter for converting gRPC requests into HTTP/1.1 requests.</p></li>
<li><p>http: fixed a bug where Content-Length:0 was added to HTTP/1 204 responses.</p></li>
<li><p>http: added <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-max-request-headers-kb"><span class="std std-ref">max request headers size</span></a>. The default behaviour is unchanged.</p></li>
<li><p>http: added modifyDecodingBuffer/modifyEncodingBuffer to allow modifying the buffered request/response data.</p></li>
<li><p>http: added encodeComplete/decodeComplete. These are invoked at the end of the stream, after all data has been encoded/decoded respectively. Default implementation is a no-op.</p></li>
<li><p>outlier_detection: added support for <a class="reference internal" href="arch_overview/upstream/outlier.html#arch-overview-outlier-detection-logging"><span class="std std-ref">outlier detection event protobuf-based logging</span></a>.</p></li>
<li><p>mysql: added a MySQL proxy filter that is capable of parsing SQL queries over MySQL wire protocol. Refer to <a class="reference internal" href="../configuration/listeners/network_filters/mysql_proxy_filter.html#config-network-filters-mysql-proxy"><span class="std std-ref">MySQL proxy</span></a> for more details.</p></li>
<li><p>performance: new buffer implementation (disabled by default; to test it, add “–use-libevent-buffers 0” to the command-line arguments when starting Envoy).</p></li>
<li><p>jwt_authn: added <a class="reference internal" href="../api-v2/config/filter/http/jwt_authn/v2alpha/config.proto.html#envoy-api-field-config-filter-http-jwt-authn-v2alpha-jwtauthentication-filter-state-rules"><span class="std std-ref">filter_state_rules</span></a> to allow specifying requirements from filterState by other filters.</p></li>
<li><p>ratelimit: removed deprecated rate limit configuration from bootstrap.</p></li>
<li><p>redis: added <a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-connpoolsettings-enable-hashtagging"><span class="std std-ref">hashtagging</span></a> to guarantee a given key’s upstream.</p></li>
<li><p>redis: added <a class="reference internal" href="../configuration/listeners/network_filters/redis_proxy_filter.html#config-network-filters-redis-proxy-per-command-stats"><span class="std std-ref">latency stats</span></a> for commands.</p></li>
<li><p>redis: added <a class="reference internal" href="../configuration/listeners/network_filters/redis_proxy_filter.html#config-network-filters-redis-proxy-per-command-stats"><span class="std std-ref">success and error stats</span></a> for commands.</p></li>
<li><p>redis: migrate hash function for host selection to <a class="reference external" href="https://sites.google.com/site/murmurhash">MurmurHash2</a> from std::hash. MurmurHash2 is compatible with std::hash in GNU libstdc++ 3.4.20 or above. This is typically the case when compiled on Linux and not macOS.</p></li>
<li><p>redis: added <a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-latency-in-micros"><span class="std std-ref">latency_in_micros</span></a> to specify the redis commands stats time unit in microseconds.</p></li>
<li><p>router: added ability to configure a <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-retrypolicy"><span class="std std-ref">retry policy</span></a> at the
virtual host level.</p></li>
<li><p>router: added reset reason to response body when upstream reset happens. After this change, the response body will be of the form <cite>upstream connect error or disconnect/reset before headers. reset reason:</cite></p></li>
<li><p>router: added <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-stats"><span class="std std-ref">rq_reset_after_downstream_response_started</span></a> counter stat to router stats.</p></li>
<li><p>router: added per-route configuration of <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-internal-redirect-action"><span class="std std-ref">internal redirects</span></a>.</p></li>
<li><p>router: removed deprecated route-action level headers_to_add/remove.</p></li>
<li><p>router: made <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-max-retries"><span class="std std-ref">max retries header</span></a> take precedence over the number of retries in route and virtual host retry policies.</p></li>
<li><p>router: added support for prefix wildcards in <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-virtualhost-domains"><span class="std std-ref">virtual host domains</span></a></p></li>
<li><p>stats: added support for histograms in prometheus</p></li>
<li><p>stats: added usedonly flag to prometheus stats to only output metrics which have been
updated at least once.</p></li>
<li><p>stats: added gauges tracking remaining resources before circuit breakers open.</p></li>
<li><p>tap: added new alpha <a class="reference internal" href="../configuration/http/http_filters/tap_filter.html#config-http-filters-tap"><span class="std std-ref">HTTP tap filter</span></a>.</p></li>
<li><p>tls: enabled TLS 1.3 on the server-side (non-FIPS builds).</p></li>
<li><p>upstream: add hash_function to specify the hash function for <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-msg-cluster-ringhashlbconfig"><span class="std std-ref">ring hash</span></a> as either xxHash or <a class="reference external" href="https://sites.google.com/site/murmurhash">murmurHash2</a>. MurmurHash2 is compatible with std::hash in GNU libstdc++ 3.4.20 or above. This is typically the case when compiled on Linux and not macOS.</p></li>
<li><p>upstream: added <a class="reference internal" href="arch_overview/upstream/load_balancing/degraded.html#arch-overview-load-balancing-degraded"><span class="std std-ref">degraded health value</span></a> which allows
routing to certain hosts only when there are insufficient healthy hosts available.</p></li>
<li><p>upstream: add cluster factory to allow creating and registering <a class="reference internal" href="arch_overview/upstream/service_discovery.html#arch-overview-service-discovery-types-custom"><span class="std std-ref">custom cluster type</span></a>.</p></li>
<li><p>upstream: added a <a class="reference internal" href="arch_overview/upstream/circuit_breaking.html#arch-overview-circuit-break-cluster-maximum-connection-pools"><span class="std std-ref">circuit breaker</span></a> to limit the number of concurrent connection pools in use.</p></li>
<li><p>tracing: added <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-tracing"><span class="std std-ref">verbose</span></a> to support logging annotations on spans.</p></li>
<li><p>upstream: added support for host weighting and <a class="reference internal" href="arch_overview/upstream/load_balancing/locality_weight.html#arch-overview-load-balancing-locality-weighted-lb"><span class="std std-ref">locality weighting</span></a> in the <a class="reference internal" href="arch_overview/upstream/load_balancing/load_balancers.html#arch-overview-load-balancing-types-ring-hash"><span class="std std-ref">ring hash load balancer</span></a>, and added a <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-ringhashlbconfig-maximum-ring-size"><span class="std std-ref">maximum_ring_size</span></a> config parameter to strictly bound the ring size.</p></li>
<li><p>zookeeper: added a ZooKeeper proxy filter that parses ZooKeeper messages (requests/responses/events).
Refer to <a class="reference internal" href="../configuration/listeners/network_filters/zookeeper_proxy_filter.html#config-network-filters-zookeeper-proxy"><span class="std std-ref">ZooKeeper proxy</span></a> for more details.</p></li>
<li><p>upstream: added configuration option to select any host when the fallback policy fails.</p></li>
<li><p>upstream: stopped incrementing upstream_rq_total for HTTP/1 conn pool when request is circuit broken.</p></li>
</ul>
</div>
<div class="section" id="apr-2-2019">
<h2>1.9.1 (Apr 2, 2019)<a class="headerlink" href="#apr-2-2019" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>http: fixed CVE-2019-9900 by rejecting HTTP/1.x headers with embedded NUL characters.</p></li>
<li><p>http: fixed CVE-2019-9901 by normalizing HTTP paths prior to routing or L7 data plane processing.
This defaults off and is configurable via either HTTP connection manager <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-normalize-path"><span class="std std-ref">normalize_path</span></a>
or the <a class="reference internal" href="../configuration/http/http_conn_man/runtime.html#config-http-conn-man-runtime-normalize-path"><span class="std std-ref">runtime</span></a>.</p></li>
</ul>
</div>
<div class="section" id="dec-20-2018">
<h2>1.9.0 (Dec 20, 2018)<a class="headerlink" href="#dec-20-2018" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added a <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format-dictionaries"><span class="std std-ref">JSON logging mode</span></a> to output access logs in JSON format.</p></li>
<li><p>access log: added dynamic metadata to access log messages streamed over gRPC.</p></li>
<li><p>access log: added DOWNSTREAM_CONNECTION_TERMINATION.</p></li>
<li><p>admin: <a class="reference internal" href="../operations/admin.html#post--logging" title="POST /logging"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/logging</span></code></a> now responds with 200 while there are no params.</p></li>
<li><p>admin: added support for displaying subject alternate names in <a class="reference internal" href="../operations/admin.html#operations-admin-interface-certs"><span class="std std-ref">certs</span></a> end point.</p></li>
<li><p>admin: added host weight to the <a class="reference internal" href="../operations/admin.html#get--clusters?format=json" title="GET /clusters?format=json"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/clusters?format=json</span></code></a> end point response.</p></li>
<li><p>admin: <a class="reference internal" href="../operations/admin.html#get--server_info" title="GET /server_info"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/server_info</span></code></a> now responds with a JSON object instead of a single string.</p></li>
<li><p>admin: <a class="reference internal" href="../operations/admin.html#get--server_info" title="GET /server_info"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/server_info</span></code></a> now exposes what stage of initialization the server is currently in.</p></li>
<li><p>admin: added support for displaying command line options in <a class="reference internal" href="../operations/admin.html#get--server_info" title="GET /server_info"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/server_info</span></code></a> end point.</p></li>
<li><p>circuit-breaker: added cx_open, rq_pending_open, rq_open and rq_retry_open gauges to expose live
state via <a class="reference internal" href="../configuration/upstream/cluster_manager/cluster_stats.html#config-cluster-manager-cluster-stats-circuit-breakers"><span class="std std-ref">circuit breakers statistics</span></a>.</p></li>
<li><p>cluster: set a default of 1s for <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-update-merge-window"><span class="std std-ref">option</span></a>.</p></li>
<li><p>config: removed support for the v1 API.</p></li>
<li><p>config: added support for <a class="reference internal" href="../api-v2/api/v2/core/config_source.proto.html#envoy-api-msg-core-ratelimitsettings"><span class="std std-ref">rate limiting</span></a> discovery request calls.</p></li>
<li><p>cors: added <a class="reference internal" href="../configuration/http/http_filters/cors_filter.html#cors-statistics"><span class="std std-ref">invalid/valid stats</span></a> to filter.</p></li>
<li><p>ext-authz: added support for providing per route config - optionally disable the filter and provide context extensions.</p></li>
<li><p>fault: removed integer percentage support.</p></li>
<li><p>grpc-json: added support for <a class="reference internal" href="../api-v2/config/filter/http/transcoder/v2/transcoder.proto.html#envoy-api-field-config-filter-http-transcoder-v2-grpcjsontranscoder-ignored-query-parameters"><span class="std std-ref">ignoring query parameters</span></a>.</p></li>
<li><p>health check: added <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-always-log-health-check-failures"><span class="std std-ref">logging health check failure events</span></a>.</p></li>
<li><p>health check: added ability to set <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-grpchealthcheck-authority"><span class="std std-ref">authority header value</span></a> for gRPC health check.</p></li>
<li><p>http: added HTTP/2 WebSocket proxying via <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-allow-connect"><span class="std std-ref">extended CONNECT</span></a>.</p></li>
<li><p>http: added limits to the number and length of header modifications in all fields request_headers_to_add and response_headers_to_add. These limits are very high and should only be used as a last-resort safeguard.</p></li>
<li><p>http: added support for a <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-request-timeout"><span class="std std-ref">request timeout</span></a>. The timeout is disabled by default.</p></li>
<li><p>http: no longer adding whitespace when appending X-Forwarded-For headers. <strong>Warning</strong>: this is not
compatible with 1.7.0 builds prior to <a class="reference external" href="https://github.com/envoyproxy/envoy/pull/3610">9d3a4eb4ac44be9f0651fcc7f87ad98c538b01ee</a>.
See <a class="reference external" href="https://github.com/envoyproxy/envoy/issues/3611">#3611</a> for details.</p></li>
<li><p>http: augmented the <cite>sendLocalReply</cite> filter API to accept an optional <cite>GrpcStatus</cite>
value to override the default HTTP to gRPC status mapping.</p></li>
<li><p>http: no longer close the TCP connection when a HTTP/1 request is retried due
to a response with empty body.</p></li>
<li><p>http: added support for more gRPC content-type headers in <a class="reference internal" href="../configuration/http/http_filters/grpc_http1_bridge_filter.html#config-http-filters-grpc-bridge"><span class="std std-ref">gRPC bridge filter</span></a>, like application/grpc+proto.</p></li>
<li><p>listeners: all listener filters are now governed by the <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-listener-filters-timeout"><span class="std std-ref">listener_filters_timeout</span></a> setting. The hard coded 15s timeout in
the <a class="reference internal" href="../configuration/listeners/listener_filters/tls_inspector.html#config-listener-filters-tls-inspector"><span class="std std-ref">TLS inspector listener filter</span></a> is superseded by
this setting.</p></li>
<li><p>listeners: added the ability to match <a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-msg-listener-filterchain"><span class="std std-ref">FilterChain</span></a> using <a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-field-listener-filterchainmatch-source-type"><span class="std std-ref">source_type</span></a>.</p></li>
<li><p>load balancer: added a <cite>configuration &lt;envoy_api_msg_Cluster.LeastRequestLbConfig&gt;</cite> option to specify the number of choices made in P2C.</p></li>
<li><p>logging: added missing [ in log prefix.</p></li>
<li><p>mongo_proxy: added <a class="reference internal" href="../configuration/listeners/network_filters/mongo_proxy_filter.html#config-network-filters-mongo-proxy-dynamic-metadata"><span class="std std-ref">dynamic metadata</span></a>.</p></li>
<li><p>network: removed the reference to <cite>FilterState</cite> in <cite>Connection</cite> in favor of <cite>StreamInfo</cite>.</p></li>
<li><p>rate-limit: added <a class="reference internal" href="../api-v2/config/filter/http/rate_limit/v2/rate_limit.proto.html#envoy-api-field-config-filter-http-rate-limit-v2-ratelimit-rate-limited-as-resource-exhausted"><span class="std std-ref">configuration</span></a>
to specify whether the <cite>GrpcStatus</cite> status returned should be <cite>RESOURCE_EXHAUSTED</cite> or
<cite>UNAVAILABLE</cite> when a gRPC call is rate limited.</p></li>
<li><p>rate-limit: removed support for the legacy ratelimit service and made the data-plane-api
<a class="reference internal" href="../api-v2/service/ratelimit/v2/rls.proto.html#envoy-api-file-envoy-service-ratelimit-v2-rls-proto"><span class="std std-ref">rls.proto</span></a> based implementation default.</p></li>
<li><p>rate-limit: removed the deprecated cluster_name attribute in <a class="reference internal" href="../api-v2/config/ratelimit/v2/rls.proto.html#envoy-api-file-envoy-config-ratelimit-v2-rls-proto"><span class="std std-ref">rate limit service configuration</span></a>.</p></li>
<li><p>rate-limit: added <a class="reference internal" href="../api-v2/config/filter/http/rate_limit/v2/rate_limit.proto.html#envoy-api-msg-config-filter-http-rate-limit-v2-ratelimit"><span class="std std-ref">rate_limit_service</span></a> configuration to filters.</p></li>
<li><p>rbac: added dynamic metadata to the network level filter.</p></li>
<li><p>rbac: added support for permission matching by <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-permission-requested-server-name"><span class="std std-ref">requested server name</span></a>.</p></li>
<li><p>redis: static cluster configuration is no longer required. Redis proxy will work with clusters
delivered via CDS.</p></li>
<li><p>router: added ability to configure arbitrary <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-retrypolicy-retriable-status-codes"><span class="std std-ref">retriable status codes.</span></a></p></li>
<li><p>router: added ability to set attempt count in upstream requests, see <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-virtualhost-include-request-attempt-count"><span class="std std-ref">virtual host’s include request
attempt count flag</span></a>.</p></li>
<li><p>router: added internal <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-grpc-on"><span class="std std-ref">grpc-retry-on</span></a> policy.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-redirectaction-scheme-redirect"><span class="std std-ref">scheme_redirect</span></a> and
<a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-redirectaction-port-redirect"><span class="std std-ref">port_redirect</span></a> to define the respective
scheme and port rewriting RedirectAction.</p></li>
<li><p>router: when <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-max-grpc-timeout"><span class="std std-ref">max_grpc_timeout</span></a>
is set, Envoy will now add or update the grpc-timeout header to reflect Envoy’s expected timeout.</p></li>
<li><p>router: per try timeouts now starts when an upstream stream is ready instead of when the request has
been fully decoded by Envoy.</p></li>
<li><p>router: added support for not retrying <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-ratelimited"><span class="std std-ref">rate limited requests</span></a>. Rate limit filter now sets the <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-ratelimited"><span class="std std-ref">x-envoy-ratelimited</span></a>
header so the rate limited requests that may have been retried earlier will not be retried with this change.</p></li>
<li><p>router: added support for enabling upgrades on a <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-upgrade-configs"><span class="std std-ref">per-route</span></a> basis.</p></li>
<li><p>router: support configuring a default fraction of mirror traffic via
<a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-requestmirrorpolicy-runtime-key"><span class="std std-ref">runtime_fraction</span></a>.</p></li>
<li><p>sandbox: added <a class="reference internal" href="../start/sandboxes/cors.html#install-sandboxes-cors"><span class="std std-ref">cors sandbox</span></a>.</p></li>
<li><p>server: added <cite>SIGINT</cite> (Ctrl-C) handler to gracefully shutdown Envoy like <cite>SIGTERM</cite>.</p></li>
<li><p>stats: added <a class="reference internal" href="../api-v2/config/metrics/v2/stats.proto.html#envoy-api-field-config-metrics-v2-statsconfig-stats-matcher"><span class="std std-ref">stats_matcher</span></a> to the bootstrap config for granular control of stat instantiation.</p></li>
<li><p>stream: renamed the <cite>RequestInfo</cite> namespace to <cite>StreamInfo</cite> to better match
its behaviour within TCP and HTTP implementations.</p></li>
<li><p>stream: renamed <cite>perRequestState</cite> to <cite>filterState</cite> in <cite>StreamInfo</cite>.</p></li>
<li><p>stream: added <cite>downstreamDirectRemoteAddress</cite> to <cite>StreamInfo</cite>.</p></li>
<li><p>thrift_proxy: introduced thrift rate limiter filter.</p></li>
<li><p>tls: added ssl.curves.&lt;curve&gt;, ssl.sigalgs.&lt;sigalg&gt; and ssl.versions.&lt;version&gt; to
<a class="reference internal" href="../configuration/listeners/stats.html#config-listener-stats"><span class="std std-ref">listener metrics</span></a> to track TLS algorithms and versions in use.</p></li>
<li><p>tls: added support for <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-upstreamtlscontext-max-session-keys"><span class="std std-ref">client-side session resumption</span></a>.</p></li>
<li><p>tls: added support for CRLs in <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-trusted-ca"><span class="std std-ref">trusted_ca</span></a>.</p></li>
<li><p>tls: added support for <a class="reference internal" href="arch_overview/security/ssl.html#arch-overview-ssl-cert-select"><span class="std std-ref">multiple server TLS certificates</span></a>.</p></li>
<li><p>tls: added support for <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-tlscertificate-password"><span class="std std-ref">password encrypted private keys</span></a>.</p></li>
<li><p>tls: added the ability to build <a class="reference internal" href="arch_overview/security/ssl.html#arch-overview-ssl-fips"><span class="std std-ref">BoringSSL FIPS</span></a> using <code class="docutils literal notranslate"><span class="pre">--define</span> <span class="pre">boringssl=fips</span></code> Bazel option.</p></li>
<li><p>tls: removed support for ECDSA certificates with curves other than P-256.</p></li>
<li><p>tls: removed support for RSA certificates with keys smaller than 2048-bits.</p></li>
<li><p>tracing: added support to the Zipkin tracer for the <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-b3"><span class="std std-ref">b3</span></a> single header format.</p></li>
<li><p>tracing: added support for <a class="reference internal" href="arch_overview/observability/tracing.html#arch-overview-tracing"><span class="std std-ref">Datadog</span></a> tracer.</p></li>
<li><p>upstream: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-lbsubsetconfig-scale-locality-weight"><span class="std std-ref">scale_locality_weight</span></a> to enable
scaling locality weights by number of hosts removed by subset lb predicates.</p></li>
<li><p>upstream: changed how load calculation for <a class="reference internal" href="arch_overview/upstream/load_balancing/priority.html#arch-overview-load-balancing-priority-levels"><span class="std std-ref">priority levels</span></a> and <a class="reference internal" href="arch_overview/upstream/load_balancing/panic_threshold.html#arch-overview-load-balancing-panic-threshold"><span class="std std-ref">panic thresholds</span></a> interact. As long as normalized total health is 100% panic thresholds are disregarded.</p></li>
<li><p>upstream: changed the default hash for <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-msg-cluster-ringhashlbconfig"><span class="std std-ref">ring hash</span></a> from std::hash to <a class="reference external" href="https://github.com/Cyan4973/xxHash">xxHash</a>.</p></li>
<li><p>upstream: when using active health checking and STRICT_DNS with several addresses that resolve
to the same hosts, Envoy will now health check each host independently.</p></li>
</ul>
</div>
<div class="section" id="oct-4-2018">
<h2>1.8.0 (Oct 4, 2018)<a class="headerlink" href="#oct-4-2018" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added <a class="reference internal" href="../api-v2/config/filter/accesslog/v2/accesslog.proto.html#envoy-api-msg-config-filter-accesslog-v2-responseflagfilter"><span class="std std-ref">response flag filter</span></a>
to filter based on the presence of Envoy response flags.</p></li>
<li><p>access log: added RESPONSE_DURATION and RESPONSE_TX_DURATION.</p></li>
<li><p>access log: added REQUESTED_SERVER_NAME for SNI to tcp_proxy and http</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#get--hystrix_event_stream" title="GET /hystrix_event_stream"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/hystrix_event_stream</span></code></a> as an endpoint for monitoring envoy’s statistics
through <a class="reference external" href="https://github.com/Netflix-Skunkworks/hystrix-dashboard/wiki">Hystrix dashboard</a>.</p></li>
<li><p>cli: added support for <a class="reference internal" href="../operations/cli.html#operations-cli"><span class="std std-ref">component log level</span></a> command line option for configuring log levels of individual components.</p></li>
<li><p>cluster: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-update-merge-window"><span class="std std-ref">option</span></a> to merge
health check/weight/metadata updates within the given duration.</p></li>
<li><p>config: regex validation added to limit to a maximum of 1024 characters.</p></li>
<li><p>config: v1 disabled by default. v1 support remains available until October via flipping –v2-config-only=false.</p></li>
<li><p>config: v1 disabled by default. v1 support remains available until October via deprecated flag –allow-deprecated-v1-api.</p></li>
<li><p>config: fixed stat inconsistency between xDS and ADS implementation. <a class="reference internal" href="../configuration/upstream/cluster_manager/cds.html#config-cluster-manager-cds"><span class="std std-ref">update_failure</span></a>
stat is incremented in case of network failure and <a class="reference internal" href="../configuration/upstream/cluster_manager/cds.html#config-cluster-manager-cds"><span class="std std-ref">update_rejected</span></a> stat is incremented
in case of schema/validation error.</p></li>
<li><p>config: added a stat <a class="reference internal" href="../configuration/overview/mgmt_server.html#management-server-stats"><span class="std std-ref">connected_state</span></a> that indicates current connected state of Envoy with
management server.</p></li>
<li><p>ext_authz: added support for configuring additional <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-authorizationrequest-headers-to-add"><span class="std std-ref">authorization headers</span></a>
to be sent from Envoy to the authorization service.</p></li>
<li><p>fault: added support for fractional percentages in <a class="reference internal" href="../api-v2/config/filter/fault/v2/fault.proto.html#envoy-api-field-config-filter-fault-v2-faultdelay-percentage"><span class="std std-ref">FaultDelay</span></a>
and in <a class="reference internal" href="../api-v2/config/filter/http/fault/v2/fault.proto.html#envoy-api-field-config-filter-http-fault-v2-faultabort-percentage"><span class="std std-ref">FaultAbort</span></a>.</p></li>
<li><p>grpc-json: added support for building HTTP response from
<a class="reference external" href="https://github.com/googleapis/googleapis/blob/master/google/api/httpbody.proto">google.api.HttpBody</a>.</p></li>
<li><p>health check: added support for <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-custom-health-check"><span class="std std-ref">custom health check</span></a>.</p></li>
<li><p>health check: added support for <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-interval-jitter-percent"><span class="std std-ref">specifying jitter as a percentage</span></a>.</p></li>
<li><p>health_check: added support for <a class="reference internal" href="arch_overview/upstream/health_checking.html#arch-overview-health-check-logging"><span class="std std-ref">health check event logging</span></a>.</p></li>
<li><p>health_check: added <a class="reference internal" href="../api-v2/data/core/v2alpha/health_check_event.proto.html#envoy-api-field-data-core-v2alpha-healthcheckevent-timestamp"><span class="std std-ref">timestamp</span></a>
to the <a class="reference internal" href="../api-v2/data/core/v2alpha/health_check_event.proto.html#envoy-api-msg-data-core-v2alpha-healthcheckevent"><span class="std std-ref">health check event</span></a> definition.</p></li>
<li><p>health_check: added support for specifying <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">custom request headers</span></a>
to HTTP health checker requests.</p></li>
<li><p>http: added support for a <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-idle-timeout"><span class="std std-ref">per-stream idle timeout</span></a>. This applies at both <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-stream-idle-timeout"><span class="std std-ref">connection manager</span></a>
and <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-idle-timeout"><span class="std std-ref">per-route granularity</span></a>. The timeout
defaults to 5 minutes; if you have other timeouts (e.g. connection idle timeout, upstream
response per-retry) that are longer than this in duration, you may want to consider setting a
non-default per-stream idle timeout.</p></li>
<li><p>http: added upstream_rq_completed counter for <a class="reference internal" href="../configuration/upstream/cluster_manager/cluster_stats.html#config-cluster-manager-cluster-stats-dynamic-http"><span class="std std-ref">total requests completed</span></a> to dynamic HTTP counters.</p></li>
<li><p>http: added downstream_rq_completed counter for <a class="reference internal" href="../configuration/http/http_conn_man/stats.html#config-http-conn-man-stats"><span class="std std-ref">total requests completed</span></a>, including on a <a class="reference internal" href="../configuration/http/http_conn_man/stats.html#config-http-conn-man-stats-per-listener"><span class="std std-ref">per-listener basis</span></a>.</p></li>
<li><p>http: added generic <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-upgrade-configs"><span class="std std-ref">Upgrade support</span></a>.</p></li>
<li><p>http: better handling of HEAD requests. Now sending transfer-encoding: chunked rather than content-length: 0.</p></li>
<li><p>http: fixed missing support for appending to predefined inline headers, e.g.
<em>authorization</em>, in features that interact with request and response headers,
e.g. <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-route-request-headers-to-add"><span class="std std-ref">request_headers_to_add</span></a>. For example, a
request header <em>authorization: token1</em> will appear as <em>authorization:
token1,token2</em>, after having <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-route-request-headers-to-add"><span class="std std-ref">request_headers_to_add</span></a> with <em>authorization:
token2</em> applied.</p></li>
<li><p>http: response filters not applied to early error paths such as http_parser generated 400s.</p></li>
<li><p>http: restrictions added to reject <em>:</em>-prefixed pseudo-headers in <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">custom
request headers</span></a>.</p></li>
<li><p>http: <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http2protocoloptions-hpack-table-size"><span class="std std-ref">hpack_table_size</span></a> now controls
dynamic table size of both: encoder and decoder.</p></li>
<li><p>http: added support for removing request headers using <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-route-request-headers-to-remove"><span class="std std-ref">request_headers_to_remove</span></a>.</p></li>
<li><p>http: added support for a <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-delayed-close-timeout"><span class="std std-ref">delayed close timeout</span></a> to mitigate race conditions when closing connections to downstream HTTP clients. The timeout defaults to 1 second.</p></li>
<li><p>jwt-authn filter: add support for per route JWT requirements.</p></li>
<li><p>listeners: added the ability to match <a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-msg-listener-filterchain"><span class="std std-ref">FilterChain</span></a> using
<a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-field-listener-filterchainmatch-destination-port"><span class="std std-ref">destination_port</span></a> and
<a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-field-listener-filterchainmatch-prefix-ranges"><span class="std std-ref">prefix_ranges</span></a>.</p></li>
<li><p>lua: added <a class="reference internal" href="../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-connection-wrapper"><span class="std std-ref">connection()</span></a> wrapper and <em>ssl()</em> API.</p></li>
<li><p>lua: added <a class="reference internal" href="../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-stream-info-wrapper"><span class="std std-ref">streamInfo()</span></a> wrapper and <em>protocol()</em> API.</p></li>
<li><p>lua: added <a class="reference internal" href="../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-stream-info-dynamic-metadata-wrapper"><span class="std std-ref">streamInfo():dynamicMetadata()</span></a> API.</p></li>
<li><p>network: introduced <a class="reference internal" href="../configuration/listeners/network_filters/sni_cluster_filter.html#config-network-filters-sni-cluster"><span class="std std-ref">sni_cluster</span></a> network filter that forwards connections to the
upstream cluster specified by the SNI value presented by the client during a TLS handshake.</p></li>
<li><p>proxy_protocol: added support for HAProxy Proxy Protocol v2 (AF_INET/AF_INET6 only).</p></li>
<li><p>ratelimit: added support for <a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.14.2/api/envoy/service/ratelimit/v2/rls.proto">api/envoy/service/ratelimit/v2/rls.proto</a>.
Lyft’s reference implementation of the <a class="reference external" href="https://github.com/lyft/ratelimit">ratelimit</a> service also supports the data-plane-api proto as of v1.1.0.
Envoy can use either proto to send client requests to a ratelimit server with the use of the
<cite>use_data_plane_proto</cite> boolean flag in the ratelimit configuration.
Support for the legacy proto <cite>source/common/ratelimit/ratelimit.proto</cite> is deprecated and will be removed at the start of the 1.9.0 release cycle.</p></li>
<li><p>ratelimit: added <a class="reference internal" href="../api-v2/config/filter/http/rate_limit/v2/rate_limit.proto.html#envoy-api-msg-config-filter-http-rate-limit-v2-ratelimit"><span class="std std-ref">failure_mode_deny</span></a> option to control traffic flow in
case of rate limit service error.</p></li>
<li><p>rbac config: added a <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-principal-authenticated-principal-name"><span class="std std-ref">principal_name</span></a> field and
removed the old <cite>name</cite> field to give more flexibility for matching certificate identity.</p></li>
<li><p>rbac network filter: a <a class="reference internal" href="../configuration/listeners/network_filters/rbac_filter.html#config-network-filters-rbac"><span class="std std-ref">role-based access control network filter</span></a> has been added.</p></li>
<li><p>rest-api: added ability to set the <a class="reference internal" href="../api-v2/api/v2/core/config_source.proto.html#envoy-api-field-core-apiconfigsource-request-timeout"><span class="std std-ref">request timeout</span></a> for REST API requests.</p></li>
<li><p>route checker: added v2 config support and removed support for v1 configs.</p></li>
<li><p>router: added ability to set request/response headers at the <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-route"><span class="std std-ref">route.Route</span></a> level.</p></li>
<li><p>stats: added <a class="reference internal" href="../api-v2/config/metrics/v2/stats.proto.html#envoy-api-field-config-metrics-v2-dogstatsdsink-prefix"><span class="std std-ref">option to configure the DogStatsD metric name prefix</span></a> to DogStatsdSink.</p></li>
<li><p>tcp_proxy: added support for <a class="reference internal" href="../api-v2/config/filter/network/tcp_proxy/v2/tcp_proxy.proto.html#envoy-api-field-config-filter-network-tcp-proxy-v2-tcpproxy-weighted-clusters"><span class="std std-ref">weighted clusters</span></a>.</p></li>
<li><p>thrift_proxy: introduced thrift routing, moved configuration to correct location</p></li>
<li><p>thrift_proxy: introduced thrift configurable decoder filters</p></li>
<li><p>tls: implemented <a class="reference internal" href="../configuration/security/secret.html#config-secret-discovery-service"><span class="std std-ref">Secret Discovery Service</span></a>.</p></li>
<li><p>tracing: added support for configuration of <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-tracing"><span class="std std-ref">tracing sampling</span></a>.</p></li>
<li><p>upstream: added configuration option to the subset load balancer to take locality weights into account when
selecting a host from a subset.</p></li>
<li><p>upstream: require opt-in to use the <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-envoy-original-dst-host"><span class="std std-ref">x-envoy-original-dst-host</span></a> header
for overriding destination address when using the <a class="reference internal" href="arch_overview/upstream/load_balancing/original_dst.html#arch-overview-load-balancing-types-original-destination"><span class="std std-ref">Original Destination</span></a>
load balancing policy.</p></li>
</ul>
</div>
<div class="section" id="jun-21-2018">
<h2>1.7.0 (Jun 21, 2018)<a class="headerlink" href="#jun-21-2018" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added ability to log response trailers.</p></li>
<li><p>access log: added ability to format START_TIME.</p></li>
<li><p>access log: added DYNAMIC_METADATA <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format"><span class="std std-ref">access log formatter</span></a>.</p></li>
<li><p>access log: added <a class="reference internal" href="../api-v2/config/filter/accesslog/v2/accesslog.proto.html#envoy-api-msg-config-filter-accesslog-v2-headerfilter"><span class="std std-ref">HeaderFilter</span></a>
to filter logs based on request headers.</p></li>
<li><p>access log: added <cite>%([1-9])?f</cite> as one of START_TIME specifiers to render subseconds.</p></li>
<li><p>access log: gRPC Access Log Service (ALS) support added for <a class="reference internal" href="../api-v2/config/accesslog/v2/als.proto.html#envoy-api-msg-config-accesslog-v2-httpgrpcaccesslogconfig"><span class="std std-ref">HTTP access logs</span></a>.</p></li>
<li><p>access log: improved WebSocket logging.</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#get--config_dump" title="GET /config_dump"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/config_dump</span></code></a> for dumping the current configuration and associated xDS
version information (if applicable).</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#get--clusters?format=json" title="GET /clusters?format=json"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/clusters?format=json</span></code></a> for outputing a JSON-serialized proto detailing
the current status of all clusters.</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#get--stats-prometheus" title="GET /stats/prometheus"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/stats/prometheus</span></code></a> as an alternative endpoint for getting stats in prometheus format.</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#operations-admin-interface-runtime-modify"><span class="std std-ref">/runtime_modify endpoint</span></a> to add or change runtime values.</p></li>
<li><p>admin: mutations must be sent as POSTs, rather than GETs. Mutations include:
<a class="reference internal" href="../operations/admin.html#post--cpuprofiler" title="POST /cpuprofiler"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/cpuprofiler</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--healthcheck-fail" title="POST /healthcheck/fail"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/healthcheck/fail</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--healthcheck-ok" title="POST /healthcheck/ok"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/healthcheck/ok</span></code></a>,
<a class="reference internal" href="../operations/admin.html#post--logging" title="POST /logging"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/logging</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--quitquitquit" title="POST /quitquitquit"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/quitquitquit</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--reset_counters" title="POST /reset_counters"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/reset_counters</span></code></a>,
<a class="reference internal" href="../operations/admin.html#post--runtime_modify?key1=value1&amp;key2=value2&amp;keyN=valueN" title="POST /runtime_modify?key1=value1&amp;key2=value2&amp;keyN=valueN"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/runtime_modify?key1=value1&amp;key2=value2&amp;keyN=valueN</span></code></a>.</p></li>
<li><p>admin: removed <cite>/routes</cite> endpoint; route configs can now be found at the <a class="reference internal" href="../operations/admin.html#operations-admin-interface-config-dump"><span class="std std-ref">/config_dump endpoint</span></a>.</p></li>
<li><p>buffer filter: the buffer filter can be optionally
<a class="reference internal" href="../api-v2/config/filter/http/buffer/v2/buffer.proto.html#envoy-api-field-config-filter-http-buffer-v2-bufferperroute-disabled"><span class="std std-ref">disabled</span></a> or
<a class="reference internal" href="../api-v2/config/filter/http/buffer/v2/buffer.proto.html#envoy-api-field-config-filter-http-buffer-v2-bufferperroute-buffer"><span class="std std-ref">overridden</span></a> with
route-local configuration.</p></li>
<li><p>cli: added –config-yaml flag to the Envoy binary. When set its value is interpreted as a yaml
representation of the bootstrap config and overrides –config-path.</p></li>
<li><p>cluster: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-close-connections-on-host-health-failure"><span class="std std-ref">option</span></a>
to close tcp_proxy upstream connections when health checks fail.</p></li>
<li><p>cluster: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-drain-connections-on-host-removal"><span class="std std-ref">option</span></a> to drain
connections from hosts after they are removed from service discovery, regardless of health status.</p></li>
<li><p>cluster: fixed bug preventing the deletion of all endpoints in a priority</p></li>
<li><p>debug: added symbolized stack traces (where supported)</p></li>
<li><p>ext-authz filter: added support to raw HTTP authorization.</p></li>
<li><p>ext-authz filter: added support to gRPC responses to carry HTTP attributes.</p></li>
<li><p>grpc: support added for the full set of <a class="reference internal" href="../api-v2/api/v2/core/grpc_service.proto.html#envoy-api-msg-core-grpcservice-googlegrpc-callcredentials"><span class="std std-ref">Google gRPC call credentials</span></a>.</p></li>
<li><p>gzip filter: added <a class="reference internal" href="../configuration/http/http_filters/gzip_filter.html#gzip-statistics"><span class="std std-ref">stats</span></a> to the filter.</p></li>
<li><p>gzip filter: sending <em>accept-encoding</em> header as <em>identity</em> no longer compresses the payload.</p></li>
<li><p>health check: added ability to set <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-httphealthcheck-request-headers-to-add"><span class="std std-ref">additional HTTP headers</span></a> for HTTP health check.</p></li>
<li><p>health check: added support for EDS delivered <a class="reference internal" href="../api-v2/api/v2/endpoint/endpoint_components.proto.html#envoy-api-field-endpoint-lbendpoint-health-status"><span class="std std-ref">endpoint health status</span></a>.</p></li>
<li><p>health check: added interval overrides for health state transitions from <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-unhealthy-edge-interval"><span class="std std-ref">healthy to unhealthy</span></a>, <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-healthy-edge-interval"><span class="std std-ref">unhealthy to healthy</span></a> and for subsequent checks on
<a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-unhealthy-interval"><span class="std std-ref">unhealthy hosts</span></a>.</p></li>
<li><p>health check: added support for <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-custom-health-check"><span class="std std-ref">custom health check</span></a>.</p></li>
<li><p>health check: health check connections can now be configured to use http/2.</p></li>
<li><p>health check http filter: added
<a class="reference internal" href="../api-v2/config/filter/http/health_check/v2/health_check.proto.html#envoy-api-field-config-filter-http-health-check-v2-healthcheck-headers"><span class="std std-ref">generic header matching</span></a>
to trigger health check response. Deprecated the endpoint option.</p></li>
<li><p>http: filters can now optionally support
<a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-virtualhost-per-filter-config"><span class="std std-ref">virtual host</span></a>,
<a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-route-per-filter-config"><span class="std std-ref">route</span></a>, and
<a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-weightedcluster-clusterweight-per-filter-config"><span class="std std-ref">weighted cluster</span></a>
local configuration.</p></li>
<li><p>http: added the ability to pass DNS type Subject Alternative Names of the client certificate in the
<a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-forwarded-client-cert"><span class="std std-ref">x-forwarded-client-cert</span></a> header.</p></li>
<li><p>http: local responses to gRPC requests are now sent as trailers-only gRPC responses instead of plain HTTP responses.
Notably the HTTP response code is always “200” in this case, and the gRPC error code is carried in “grpc-status”
header, optionally accompanied with a text message in “grpc-message” header.</p></li>
<li><p>http: added support for <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-via"><span class="std std-ref">via header</span></a>
append.</p></li>
<li><p>http: added a <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-skip-xff-append"><span class="std std-ref">configuration option</span></a>
to elide <em>x-forwarded-for</em> header modifications.</p></li>
<li><p>http: fixed a bug in inline headers where addCopy and addViaMove didn’t add header values when
encountering inline headers with multiple instances.</p></li>
<li><p>listeners: added <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-tcp-fast-open-queue-length"><span class="std std-ref">tcp_fast_open_queue_length</span></a> option.</p></li>
<li><p>listeners: added the ability to match <a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-msg-listener-filterchain"><span class="std std-ref">FilterChain</span></a> using
<a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-field-listener-filterchainmatch-application-protocols"><span class="std std-ref">application_protocols</span></a>
(e.g. ALPN for TLS protocol).</p></li>
<li><p>listeners: <cite>sni_domains</cite> has been deprecated/renamed to <a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-field-listener-filterchainmatch-server-names"><span class="std std-ref">server_names</span></a>.</p></li>
<li><p>listeners: removed restriction on all filter chains having identical filters.</p></li>
<li><p>load balancer: added <a class="reference internal" href="arch_overview/upstream/load_balancing/load_balancers.html#arch-overview-load-balancing-types-round-robin"><span class="std std-ref">weighted round robin</span></a> support. The round robin
scheduler now respects endpoint weights and also has improved fidelity across
picks.</p></li>
<li><p>load balancer: <a class="reference internal" href="arch_overview/upstream/load_balancing/subsets.html#arch-overview-load-balancer-subsets"><span class="std std-ref">locality weighted load balancing</span></a> is now supported.</p></li>
<li><p>load balancer: ability to configure zone aware load balancer settings <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-zone-aware-lb-config"><span class="std std-ref">through the API</span></a>.</p></li>
<li><p>load balancer: the <a class="reference internal" href="arch_overview/upstream/load_balancing/load_balancers.html#arch-overview-load-balancing-types-least-request"><span class="std std-ref">weighted least request</span></a> load balancing algorithm has been improved
to have better balance when operating in weighted mode.</p></li>
<li><p>logger: added the ability to optionally set the log format via the <a class="reference internal" href="../operations/cli.html#cmdoption-log-format"><code class="xref std std-option docutils literal notranslate"><span class="pre">--log-format</span></code></a> option.</p></li>
<li><p>logger: all <a class="reference internal" href="../operations/admin.html#operations-admin-interface-logging"><span class="std std-ref">logging levels</span></a> can be configured
at run-time: trace debug info warning error critical.</p></li>
<li><p>rbac http filter: a <a class="reference internal" href="../configuration/http/http_filters/rbac_filter.html#config-http-filters-rbac"><span class="std std-ref">role-based access control http filter</span></a> has been added.</p></li>
<li><p>router: the behavior of per-try timeouts have changed in the case where a portion of the response has
already been proxied downstream when the timeout occurs. Previously, the response would be reset
leading to either an HTTP/2 reset or an HTTP/1 closed connection and a partial response. Now, the
timeout will be ignored and the response will continue to proxy up to the global request timeout.</p></li>
<li><p>router: changed the behavior of <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-hashpolicy-connectionproperties-source-ip"><span class="std std-ref">source IP routing</span></a>
to ignore the source port.</p></li>
<li><p>router: added an <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-headermatcher-prefix-match"><span class="std std-ref">prefix_match</span></a> match type
to explicitly match based on the prefix of a header value.</p></li>
<li><p>router: added an <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-headermatcher-suffix-match"><span class="std std-ref">suffix_match</span></a> match type
to explicitly match based on the suffix of a header value.</p></li>
<li><p>router: added an <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-headermatcher-present-match"><span class="std std-ref">present_match</span></a> match type
to explicitly match based on a header’s presence.</p></li>
<li><p>router: added an <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-headermatcher-invert-match"><span class="std std-ref">invert_match</span></a> config option
which supports inverting all other match types to match based on headers which are not a desired value.</p></li>
<li><p>router: allow <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-routeaction-hashpolicy-cookie"><span class="std std-ref">cookie routing</span></a> to
generate session cookies.</p></li>
<li><p>router: added START_TIME as one of supported variables in <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">header
formatters</span></a>.</p></li>
<li><p>router: added a <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-max-grpc-timeout"><span class="std std-ref">max_grpc_timeout</span></a>
config option to specify the maximum allowable value for timeouts decoded from gRPC header field
<cite>grpc-timeout</cite>.</p></li>
<li><p>router: added a <a class="reference internal" href="../api-v2/config/filter/http/router/v2/router.proto.html#envoy-api-field-config-filter-http-router-v2-router-suppress-envoy-headers"><span class="std std-ref">configuration option</span></a> to disable <em>x-envoy-</em>
header generation.</p></li>
<li><p>router: added ‘unavailable’ to the retriable gRPC status codes that can be specified
through <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-grpc-on"><span class="std std-ref">x-envoy-retry-grpc-on</span></a>.</p></li>
<li><p>sockets: added <a class="reference internal" href="../operations/traffic_tapping.html#operations-traffic-tapping"><span class="std std-ref">tap transport socket extension</span></a> to support
recording plain text traffic and PCAP generation.</p></li>
<li><p>sockets: added <cite>IP_FREEBIND</cite> socket option support for <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-freebind"><span class="std std-ref">listeners</span></a> and upstream connections via
<a class="reference internal" href="../api-v2/config/bootstrap/v2/bootstrap.proto.html#envoy-api-field-config-bootstrap-v2-clustermanager-upstream-bind-config"><span class="std std-ref">cluster manager wide</span></a> and
<a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-upstream-bind-config"><span class="std std-ref">cluster specific</span></a> options.</p></li>
<li><p>sockets: added <cite>IP_TRANSPARENT</cite> socket option support for <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-transparent"><span class="std std-ref">listeners</span></a>.</p></li>
<li><p>sockets: added <cite>SO_KEEPALIVE</cite> socket option for upstream connections
<a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-upstream-connection-options"><span class="std std-ref">per cluster</span></a>.</p></li>
<li><p>stats: added support for histograms.</p></li>
<li><p>stats: added <a class="reference internal" href="../api-v2/config/metrics/v2/stats.proto.html#envoy-api-field-config-metrics-v2-statsdsink-prefix"><span class="std std-ref">option to configure the statsd prefix</span></a>.</p></li>
<li><p>stats: updated stats sink interface to flush through a single call.</p></li>
<li><p>tls: added support for
<a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-verify-certificate-spki"><span class="std std-ref">verify_certificate_spki</span></a>.</p></li>
<li><p>tls: added support for multiple
<a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-verify-certificate-hash"><span class="std std-ref">verify_certificate_hash</span></a>
values.</p></li>
<li><p>tls: added support for using
<a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-verify-certificate-spki"><span class="std std-ref">verify_certificate_spki</span></a>
and <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-verify-certificate-hash"><span class="std std-ref">verify_certificate_hash</span></a>
without <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-trusted-ca"><span class="std std-ref">trusted_ca</span></a>.</p></li>
<li><p>tls: added support for allowing expired certificates with
<a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-allow-expired-certificate"><span class="std std-ref">allow_expired_certificate</span></a>.</p></li>
<li><p>tls: added support for <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-upstreamtlscontext-allow-renegotiation"><span class="std std-ref">renegotiation</span></a>
when acting as a client.</p></li>
<li><p>tls: removed support for legacy SHA-2 CBC cipher suites.</p></li>
<li><p>tracing: the sampling decision is now delegated to the tracers, allowing the tracer to decide when and if
to use it. For example, if the <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-b3-sampled"><span class="std std-ref">x-b3-sampled</span></a> header
is supplied with the client request, its value will override any sampling decision made by the Envoy proxy.</p></li>
<li><p>websocket: support configuring idle_timeout and max_connect_attempts.</p></li>
<li><p>upstream: added support for host override for a request in <a class="reference internal" href="arch_overview/upstream/load_balancing/original_dst.html#arch-overview-load-balancing-types-original-destination-request-header"><span class="std std-ref">Original destination host request header</span></a>.</p></li>
<li><p>header to metadata: added <a class="reference internal" href="../configuration/http/http_filters/header_to_metadata_filter.html#config-http-filters-header-to-metadata"><span class="std std-ref">HTTP Header to Metadata filter</span></a>.</p></li>
</ul>
</div>
<div class="section" id="march-20-2018">
<h2>1.6.0 (March 20, 2018)<a class="headerlink" href="#march-20-2018" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added DOWNSTREAM_REMOTE_ADDRESS, DOWNSTREAM_REMOTE_ADDRESS_WITHOUT_PORT, and
DOWNSTREAM_LOCAL_ADDRESS <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format"><span class="std std-ref">access log formatters</span></a>.
DOWNSTREAM_ADDRESS access log formatter has been deprecated.</p></li>
<li><p>access log: added less than or equal (LE) <a class="reference internal" href="../api-v2/config/filter/accesslog/v2/accesslog.proto.html#envoy-api-msg-config-filter-accesslog-v2-comparisonfilter"><span class="std std-ref">comparison filter</span></a>.</p></li>
<li><p>access log: added configuration to <a class="reference internal" href="../api-v2/config/filter/accesslog/v2/accesslog.proto.html#envoy-api-msg-config-filter-accesslog-v2-runtimefilter"><span class="std std-ref">runtime filter</span></a> to set default sampling rate, divisor,
and whether to use independent randomness or not.</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#operations-admin-interface-runtime"><span class="std std-ref">/runtime</span></a> admin endpoint to read the
current runtime values.</p></li>
<li><p>build: added support for <a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.14.2/bazel#enabling-optional-features">building Envoy with exported symbols</a>. This change allows scripts loaded with the Lua filter to
load shared object libraries such as those installed via <a class="reference external" href="https://luarocks.org/">LuaRocks</a>.</p></li>
<li><p>config: added support for sending error details as
<a class="reference external" href="https://github.com/googleapis/googleapis/blob/master/google/rpc/status.proto">grpc.rpc.Status</a>
in <a class="reference internal" href="../api-v2/api/v2/discovery.proto.html#envoy-api-msg-discoveryrequest"><span class="std std-ref">DiscoveryRequest</span></a>.</p></li>
<li><p>config: added support for <a class="reference internal" href="../api-v2/api/v2/core/base.proto.html#envoy-api-msg-core-datasource"><span class="std std-ref">inline delivery</span></a> of TLS
certificates and private keys.</p></li>
<li><p>config: added restrictions for the backing <a class="reference internal" href="../api-v2/api/v2/core/config_source.proto.html#envoy-api-msg-core-configsource"><span class="std std-ref">config sources</span></a>
of xDS resources. For filesystem based xDS the file must exist at configuration time. For cluster
based xDS the backing cluster must be statically defined and be of non-EDS type.</p></li>
<li><p>grpc: the Google gRPC C++ library client is now supported as specified in the <a class="reference internal" href="arch_overview/other_protocols/grpc.html#arch-overview-grpc-services"><span class="std std-ref">gRPC services
overview</span></a> and <a class="reference internal" href="../api-v2/api/v2/core/grpc_service.proto.html#envoy-api-msg-core-grpcservice"><span class="std std-ref">GrpcService</span></a>.</p></li>
<li><p>grpc-json: added support for <a class="reference internal" href="../api-v2/config/filter/http/transcoder/v2/transcoder.proto.html#envoy-api-field-config-filter-http-transcoder-v2-grpcjsontranscoder-proto-descriptor-bin"><span class="std std-ref">inline descriptors</span></a>.</p></li>
<li><p>health check: added <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-grpc-health-check"><span class="std std-ref">gRPC health check</span></a>
based on <a class="reference external" href="https://github.com/grpc/grpc/blob/master/src/proto/grpc/health/v1/health.proto">grpc.health.v1.Health</a>
service.</p></li>
<li><p>health check: added ability to set <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-httphealthcheck-host"><span class="std std-ref">host header value</span></a> for http health check.</p></li>
<li><p>health check: extended the health check filter to support computation of the health check response
based on the <a class="reference internal" href="../api-v2/config/filter/http/health_check/v2/health_check.proto.html#envoy-api-field-config-filter-http-health-check-v2-healthcheck-cluster-min-healthy-percentages"><span class="std std-ref">percentage of healthy servers in upstream clusters</span></a>.</p></li>
<li><p>health check: added setting for <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-no-traffic-interval"><span class="std std-ref">no-traffic
interval</span></a>.</p></li>
<li><p>http: added idle timeout for <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-httpprotocoloptions-idle-timeout"><span class="std std-ref">upstream http connections</span></a>.</p></li>
<li><p>http: added support for <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-proxy-100-continue"><span class="std std-ref">proxying 100-Continue responses</span></a>.</p></li>
<li><p>http: added the ability to pass a URL encoded PEM encoded peer certificate in the
<a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-forwarded-client-cert"><span class="std std-ref">x-forwarded-client-cert</span></a> header.</p></li>
<li><p>http: added support for trusting additional hops in the
<a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-forwarded-for"><span class="std std-ref">x-forwarded-for</span></a> request header.</p></li>
<li><p>http: added support for <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http1protocoloptions-accept-http-10"><span class="std std-ref">incoming HTTP/1.0</span></a>.</p></li>
<li><p>hot restart: added SIGTERM propagation to children to <a class="reference internal" href="../operations/hot_restarter.html#operations-hot-restarter"><span class="std std-ref">hot-restarter.py</span></a>, which enables using it as a parent of containers.</p></li>
<li><p>ip tagging: added <a class="reference internal" href="../configuration/http/http_filters/ip_tagging_filter.html#config-http-filters-ip-tagging"><span class="std std-ref">HTTP IP Tagging filter</span></a>.</p></li>
<li><p>listeners: added support for <a class="reference internal" href="../api-v2/api/v2/core/address.proto.html#envoy-api-field-core-socketaddress-ipv4-compat"><span class="std std-ref">listening for both IPv4 and IPv6</span></a> when binding to ::.</p></li>
<li><p>listeners: added support for listening on <a class="reference internal" href="../api-v2/api/v2/core/address.proto.html#envoy-api-field-core-address-pipe"><span class="std std-ref">UNIX domain sockets</span></a>.</p></li>
<li><p>listeners: added support for <a class="reference internal" href="../api-v2/api/v2/core/address.proto.html#envoy-api-msg-core-pipe"><span class="std std-ref">abstract unix domain sockets</span></a> on
Linux. The abstract namespace can be used by prepending ‘&#64;’ to a socket path.</p></li>
<li><p>load balancer: added cluster configuration for <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-healthy-panic-threshold"><span class="std std-ref">healthy panic threshold</span></a> percentage.</p></li>
<li><p>load balancer: added <a class="reference internal" href="arch_overview/upstream/load_balancing/load_balancers.html#arch-overview-load-balancing-types-maglev"><span class="std std-ref">Maglev</span></a> consistent hash
load balancer.</p></li>
<li><p>load balancer: added support for
<a class="reference internal" href="../api-v2/api/v2/endpoint/endpoint_components.proto.html#envoy-api-msg-endpoint-localitylbendpoints"><span class="std std-ref">LocalityLbEndpoints</span></a> priorities.</p></li>
<li><p>lua: added headers <a class="reference internal" href="../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-header-wrapper"><span class="std std-ref">replace()</span></a> API.</p></li>
<li><p>lua: extended to support <a class="reference internal" href="../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-metadata-wrapper"><span class="std std-ref">metadata object</span></a> API.</p></li>
<li><p>redis: added local <cite>PING</cite> support to the <a class="reference internal" href="arch_overview/other_protocols/redis.html#arch-overview-redis"><span class="std std-ref">Redis filter</span></a>.</p></li>
<li><p>redis: added <cite>GEORADIUS_RO</cite> and <cite>GEORADIUSBYMEMBER_RO</cite> to the <a class="reference internal" href="arch_overview/other_protocols/redis.html#arch-overview-redis"><span class="std std-ref">Redis command splitter</span></a> whitelist.</p></li>
<li><p>router: added DOWNSTREAM_REMOTE_ADDRESS_WITHOUT_PORT, DOWNSTREAM_LOCAL_ADDRESS,
DOWNSTREAM_LOCAL_ADDRESS_WITHOUT_PORT, PROTOCOL, and UPSTREAM_METADATA <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">header
formatters</span></a>. The CLIENT_IP header formatter
has been deprecated.</p></li>
<li><p>router: added gateway-error <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-on"><span class="std std-ref">retry-on</span></a> policy.</p></li>
<li><p>router: added support for route matching based on <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-queryparametermatcher"><span class="std std-ref">URL query string parameters</span></a>.</p></li>
<li><p>router: added support for more granular weighted cluster routing by allowing the <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-weightedcluster-total-weight"><span class="std std-ref">total_weight</span></a> to be specified in configuration.</p></li>
<li><p>router: added support for <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">custom request/response headers</span></a> with mixed static and dynamic values.</p></li>
<li><p>router: added support for <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-route-direct-response"><span class="std std-ref">direct responses</span></a>.
I.e., sending a preconfigured HTTP response without proxying anywhere.</p></li>
<li><p>router: added support for <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-redirectaction-https-redirect"><span class="std std-ref">HTTPS redirects</span></a> on specific routes.</p></li>
<li><p>router: added support for <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-redirectaction-prefix-rewrite"><span class="std std-ref">prefix_rewrite</span></a> for redirects.</p></li>
<li><p>router: added support for <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-redirectaction-strip-query"><span class="std std-ref">stripping the query string</span></a> for redirects.</p></li>
<li><p>router: added support for downstream request/upstream response
<a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">header manipulation</span></a> in <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-weightedcluster"><span class="std std-ref">weighted
cluster</span></a>.</p></li>
<li><p>router: added support for <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-headermatcher-range-match"><span class="std std-ref">range based header matching</span></a> for request routing.</p></li>
<li><p>squash: added support for the <a class="reference internal" href="../configuration/http/http_filters/squash_filter.html#config-http-filters-squash"><span class="std std-ref">Squash microservices debugger</span></a>.
Allows debugging an incoming request to a microservice in the mesh.</p></li>
<li><p>stats: added metrics service API implementation.</p></li>
<li><p>stats: added native <a class="reference internal" href="../api-v2/config/metrics/v2/stats.proto.html#envoy-api-msg-config-metrics-v2-dogstatsdsink"><span class="std std-ref">DogStatsd</span></a> support.</p></li>
<li><p>stats: added support for <a class="reference internal" href="../api-v2/config/metrics/v2/stats.proto.html#envoy-api-field-config-metrics-v2-tagspecifier-fixed-value"><span class="std std-ref">fixed stats tag values</span></a> which will be added to all metrics.</p></li>
<li><p>tcp proxy: added support for specifying a <a class="reference internal" href="../api-v2/config/filter/network/tcp_proxy/v2/tcp_proxy.proto.html#envoy-api-field-config-filter-network-tcp-proxy-v2-tcpproxy-metadata-match"><span class="std std-ref">metadata matcher</span></a> for upstream
clusters in the tcp filter.</p></li>
<li><p>tcp proxy: improved TCP proxy to correctly proxy TCP half-close.</p></li>
<li><p>tcp proxy: added <a class="reference internal" href="../api-v2/config/filter/network/tcp_proxy/v2/tcp_proxy.proto.html#envoy-api-field-config-filter-network-tcp-proxy-v2-tcpproxy-idle-timeout"><span class="std std-ref">idle timeout</span></a>.</p></li>
<li><p>tcp proxy: access logs now bring an IP address without a port when using DOWNSTREAM_ADDRESS.
Use <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format"><span class="std std-ref">DOWNSTREAM_REMOTE_ADDRESS</span></a> instead.</p></li>
<li><p>tracing: added support for dynamically loading an <a class="reference internal" href="../api-v2/config/trace/v2/trace.proto.html#envoy-api-msg-config-trace-v2-dynamicotconfig"><span class="std std-ref">OpenTracing tracer</span></a>.</p></li>
<li><p>tracing: when using the Zipkin tracer, it is now possible for clients to specify the sampling
decision (using the <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-b3-sampled"><span class="std std-ref">x-b3-sampled</span></a> header) and
have the decision propagated through to subsequently invoked services.</p></li>
<li><p>tracing: when using the Zipkin tracer, it is no longer necessary to propagate the
<a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-ot-span-context"><span class="std std-ref">x-ot-span-context</span></a> header.
See more on trace context propagation <a class="reference internal" href="arch_overview/observability/tracing.html#arch-overview-tracing"><span class="std std-ref">here</span></a>.</p></li>
<li><p>transport sockets: added transport socket interface to allow custom implementations of transport
sockets. A transport socket provides read and write logic with buffer encryption and decryption
(if applicable). The existing TLS implementation has been refactored with the interface.</p></li>
<li><p>upstream: added support for specifying an <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-alt-stat-name"><span class="std std-ref">alternate stats name</span></a> while emitting stats for clusters.</p></li>
<li><p>Many small bug fixes and performance improvements not listed.</p></li>
</ul>
</div>
<div class="section" id="december-4-2017">
<h2>1.5.0 (December 4, 2017)<a class="headerlink" href="#december-4-2017" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added fields for <a class="reference internal" href="../configuration/observability/access_log.html#config-access-log-format"><span class="std std-ref">UPSTREAM_LOCAL_ADDRESS and DOWNSTREAM_ADDRESS</span></a>.</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#operations-admin-interface-stats"><span class="std std-ref">JSON output</span></a> for stats admin endpoint.</p></li>
<li><p>admin: added basic <a class="reference internal" href="../operations/admin.html#operations-admin-interface-stats"><span class="std std-ref">Prometheus output</span></a> for stats admin
endpoint. Histograms are not currently output.</p></li>
<li><p>admin: added <code class="docutils literal notranslate"><span class="pre">version_info</span></code> to the <a class="reference internal" href="../operations/admin.html#operations-admin-interface-clusters"><span class="std std-ref">/clusters admin endpoint</span></a>.</p></li>
<li><p>config: the <a class="reference internal" href="../configuration/overview/overview.html#config-overview"><span class="std std-ref">v2 API</span></a> is now considered production ready.</p></li>
<li><p>config: added –v2-config-only CLI flag.</p></li>
<li><p>cors: added <a class="reference internal" href="../configuration/http/http_filters/cors_filter.html#config-http-filters-cors"><span class="std std-ref">CORS filter</span></a>.</p></li>
<li><p>health check: added <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-immediate-health-check-fail"><span class="std std-ref">x-envoy-immediate-health-check-fail</span></a> header support.</p></li>
<li><p>health check: added <a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-reuse-connection"><span class="std std-ref">reuse_connection</span></a> option.</p></li>
<li><p>http: added <a class="reference internal" href="../configuration/http/http_conn_man/stats.html#config-http-conn-man-stats-per-listener"><span class="std std-ref">per-listener stats</span></a>.</p></li>
<li><p>http: end-to-end HTTP flow control is now complete across both connections, streams, and filters.</p></li>
<li><p>load balancer: added <a class="reference internal" href="arch_overview/upstream/load_balancing/subsets.html#arch-overview-load-balancer-subsets"><span class="std std-ref">subset load balancer</span></a>.</p></li>
<li><p>load balancer: added ring size and hash <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-msg-cluster-ringhashlbconfig"><span class="std std-ref">configuration options</span></a>. This used to be configurable via runtime. The runtime
configuration was deleted without deprecation as we are fairly certain no one is using it.</p></li>
<li><p>log: added the ability to optionally log to a file instead of stderr via the
<a class="reference internal" href="../operations/cli.html#cmdoption-log-path"><code class="xref std std-option docutils literal notranslate"><span class="pre">--log-path</span></code></a> option.</p></li>
<li><p>listeners: added <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-drain-type"><span class="std std-ref">drain_type</span></a> option.</p></li>
<li><p>lua: added experimental <a class="reference internal" href="../configuration/http/http_filters/lua_filter.html#config-http-filters-lua"><span class="std std-ref">Lua filter</span></a>.</p></li>
<li><p>mongo filter: added <a class="reference internal" href="../configuration/listeners/network_filters/mongo_proxy_filter.html#config-network-filters-mongo-proxy-fault-injection"><span class="std std-ref">fault injection</span></a>.</p></li>
<li><p>mongo filter: added <a class="reference internal" href="arch_overview/operations/draining.html#arch-overview-draining"><span class="std std-ref">“drain close”</span></a> support.</p></li>
<li><p>outlier detection: added <a class="reference internal" href="arch_overview/upstream/outlier.html#arch-overview-outlier-detection"><span class="std std-ref">HTTP gateway failure type</span></a>.
See <a class="reference internal" href="deprecated.html#deprecated"><span class="std std-ref">deprecated log</span></a>
for outlier detection stats deprecations in this release.</p></li>
<li><p>redis: the <a class="reference internal" href="../configuration/listeners/network_filters/redis_proxy_filter.html#config-network-filters-redis-proxy"><span class="std std-ref">redis proxy filter</span></a> is now considered
production ready.</p></li>
<li><p>redis: added <a class="reference internal" href="arch_overview/operations/draining.html#arch-overview-draining"><span class="std std-ref">“drain close”</span></a> functionality.</p></li>
<li><p>router: added <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-overloaded-set"><span class="std std-ref">x-envoy-overloaded</span></a> support.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routematch-regex"><span class="std std-ref">regex</span></a> route matching.</p></li>
<li><p>router: added <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">custom request headers</span></a>
for upstream requests.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-hashpolicy-connection-properties"><span class="std std-ref">downstream IP hashing</span></a> for HTTP ketama routing.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-hashpolicy-cookie"><span class="std std-ref">cookie hashing</span></a>.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/config/filter/http/router/v2/router.proto.html#envoy-api-field-config-filter-http-router-v2-router-start-child-span"><span class="std std-ref">start_child_span</span></a> option
to create child span for egress calls.</p></li>
<li><p>router: added optional <a class="reference internal" href="../api-v2/config/filter/http/router/v2/router.proto.html#envoy-api-field-config-filter-http-router-v2-router-upstream-log"><span class="std std-ref">upstream logs</span></a>.</p></li>
<li><p>router: added complete <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">custom append/override/remove support</span></a> of request/response headers.</p></li>
<li><p>router: added support to <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-redirectaction-response-code"><span class="std std-ref">specify response code during redirect</span></a>.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routeaction-cluster-not-found-response-code"><span class="std std-ref">configuration</span></a>
to return either a 404 or 503 if the upstream cluster does not exist.</p></li>
<li><p>runtime: added <a class="reference internal" href="../configuration/operations/runtime.html#config-runtime-comments"><span class="std std-ref">comment capability</span></a>.</p></li>
<li><p>server: change default log level (<a class="reference internal" href="../operations/cli.html#cmdoption-l"><code class="xref std std-option docutils literal notranslate"><span class="pre">-l</span></code></a>) to <cite>info</cite>.</p></li>
<li><p>stats: maximum stat/name sizes and maximum number of stats are now variable via the
<cite>–max-obj-name-len</cite> and <cite>–max-stats</cite> options.</p></li>
<li><p>tcp proxy: added <a class="reference internal" href="../api-v2/config/filter/network/tcp_proxy/v2/tcp_proxy.proto.html#envoy-api-field-config-filter-network-tcp-proxy-v2-tcpproxy-access-log"><span class="std std-ref">access logging</span></a>.</p></li>
<li><p>tcp proxy: added <a class="reference internal" href="../api-v2/config/filter/network/tcp_proxy/v2/tcp_proxy.proto.html#envoy-api-field-config-filter-network-tcp-proxy-v2-tcpproxy-max-connect-attempts"><span class="std std-ref">configurable connect retries</span></a>.</p></li>
<li><p>tcp proxy: enable use of <a class="reference internal" href="arch_overview/upstream/outlier.html#arch-overview-outlier-detection"><span class="std std-ref">outlier detector</span></a>.</p></li>
<li><p>tls: added <a class="reference internal" href="../faq/configuration/sni.html#faq-how-to-setup-sni"><span class="std std-ref">SNI support</span></a>.</p></li>
<li><p>tls: added support for specifying <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys"><span class="std std-ref">TLS session ticket keys</span></a>.</p></li>
<li><p>tls: allow configuration of the <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-tlsparameters-tls-minimum-protocol-version"><span class="std std-ref">min</span></a> and <a class="reference internal" href="../api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-tlsparameters-tls-maximum-protocol-version"><span class="std std-ref">max</span></a> TLS protocol versions.</p></li>
<li><p>tracing: added <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-route-decorator"><span class="std std-ref">custom trace span decorators</span></a>.</p></li>
<li><p>Many small bug fixes and performance improvements not listed.</p></li>
</ul>
</div>
<div class="section" id="august-24-2017">
<h2>1.4.0 (August 24, 2017)<a class="headerlink" href="#august-24-2017" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>macOS is <a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.14.2//bazel#quick-start-bazel-build-for-developers">now supported</a>. (A few features
are missing such as hot restart and original destination routing).</p></li>
<li><p>YAML is now directly supported for config files.</p></li>
<li><p>Added /routes admin endpoint.</p></li>
<li><p>End-to-end flow control is now supported for TCP proxy, HTTP/1, and HTTP/2. HTTP flow control
that includes filter buffering is incomplete and will be implemented in 1.5.0.</p></li>
<li><p>Log verbosity <a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.14.2//bazel#log-verbosity">compile time flag</a> added.</p></li>
<li><p>Hot restart <a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.14.2//bazel#hot-restart">compile time flag</a> added.</p></li>
<li><p>Original destination <a class="reference internal" href="arch_overview/upstream/service_discovery.html#arch-overview-service-discovery-types-original-destination"><span class="std std-ref">cluster</span></a>
and <a class="reference internal" href="arch_overview/upstream/load_balancing/original_dst.html#arch-overview-load-balancing-types-original-destination"><span class="std std-ref">load balancer</span></a> added.</p></li>
<li><p><a class="reference internal" href="arch_overview/http/websocket.html#arch-overview-websocket"><span class="std std-ref">WebSocket</span></a> is now supported.</p></li>
<li><p>Virtual cluster priorities have been hard removed without deprecation as we are reasonably sure
no one is using this feature.</p></li>
<li><p>Route <cite>validate_clusters</cite> option added.</p></li>
<li><p><a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-downstream-service-node"><span class="std std-ref">x-envoy-downstream-service-node</span></a>
header added.</p></li>
<li><p><a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-forwarded-client-cert"><span class="std std-ref">x-forwarded-client-cert</span></a> header
added.</p></li>
<li><p>Initial HTTP/1 forward proxy support for absolute URLs has been added.</p></li>
<li><p>HTTP/2 codec settings are now configurable.</p></li>
<li><p>gRPC/JSON transcoder <a class="reference internal" href="../configuration/http/http_filters/grpc_json_transcoder_filter.html#config-http-filters-grpc-json-transcoder"><span class="std std-ref">filter</span></a> added.</p></li>
<li><p>gRPC web <a class="reference internal" href="../configuration/http/http_filters/grpc_web_filter.html#config-http-filters-grpc-web"><span class="std std-ref">filter</span></a> added.</p></li>
<li><p>Configurable timeout for the rate limit service call in the <a class="reference internal" href="../configuration/listeners/network_filters/rate_limit_filter.html#config-network-filters-rate-limit"><span class="std std-ref">network</span></a> and <a class="reference internal" href="../configuration/http/http_filters/rate_limit_filter.html#config-http-filters-rate-limit"><span class="std std-ref">HTTP</span></a> rate limit
filters.</p></li>
<li><p><a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-grpc-on"><span class="std std-ref">x-envoy-retry-grpc-on</span></a> header added.</p></li>
<li><p><a class="reference internal" href="arch_overview/operations/dynamic_configuration.html#arch-overview-dynamic-config-lds"><span class="std std-ref">LDS API</span></a> added.</p></li>
<li><p>TLS :<cite>require_client_certificate</cite> option added.</p></li>
<li><p><a class="reference internal" href="../install/tools/config_load_check_tool.html#install-tools-config-load-check-tool"><span class="std std-ref">Configuration check tool</span></a> added.</p></li>
<li><p><a class="reference internal" href="../install/tools/schema_validator_check_tool.html#install-tools-schema-validator-check-tool"><span class="std std-ref">JSON schema check tool</span></a> added.</p></li>
<li><p>Config validation mode added via the <a class="reference internal" href="../operations/cli.html#cmdoption-mode"><code class="xref std std-option docutils literal notranslate"><span class="pre">--mode</span></code></a> option.</p></li>
<li><p><a class="reference internal" href="../operations/cli.html#cmdoption-local-address-ip-version"><code class="xref std std-option docutils literal notranslate"><span class="pre">--local-address-ip-version</span></code></a> option added.</p></li>
<li><p>IPv6 support is now complete.</p></li>
<li><p>UDP <cite>statsd_ip_address</cite> option added.</p></li>
<li><p>Per-cluster DNS resolvers added.</p></li>
<li><p><a class="reference internal" href="../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection"><span class="std std-ref">Fault filter</span></a> enhancements and fixes.</p></li>
<li><p>Several features are <a class="reference internal" href="deprecated.html#deprecated"><span class="std std-ref">deprecated as of the 1.4.0 release</span></a>. They
will be removed at the beginning of the 1.5.0 release cycle. We explicitly call out that the
<cite>HttpFilterConfigFactory</cite> filter API has been deprecated in favor of
<cite>NamedHttpFilterConfigFactory</cite>.</p></li>
<li><p>Many small bug fixes and performance improvements not listed.</p></li>
</ul>
</div>
<div class="section" id="may-17-2017">
<h2>1.3.0 (May 17, 2017)<a class="headerlink" href="#may-17-2017" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>As of this release, we now have an official <a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.14.2//CONTRIBUTING.md#breaking-change-policy">breaking change policy</a>. Note that there are numerous breaking configuration
changes in this release. They are not listed here. Future releases will adhere to the policy and
have clear documentation on deprecations and changes.</p></li>
<li><p>Bazel is now the canonical build system (replacing CMake). There have been a huge number of
changes to the development/build/test flow. See <a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.14.2//bazel/README.md">/bazel/README.md</a> and
<a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.14.2//ci/README.md">/ci/README.md</a> for more information.</p></li>
<li><p><a class="reference internal" href="arch_overview/upstream/outlier.html#arch-overview-outlier-detection"><span class="std std-ref">Outlier detection</span></a> has been expanded to include success
rate variance, and all parameters are now configurable in both runtime and in the JSON
configuration.</p></li>
<li><p>TCP level listener and cluster connections now have configurable receive buffer
limits at which point connection level back pressure is applied.
Full end to end flow control will be available in a future release.</p></li>
<li><p><a class="reference internal" href="../configuration/upstream/cluster_manager/cluster_hc.html#config-cluster-manager-cluster-hc"><span class="std std-ref">Redis health checking</span></a> has been added as an active
health check type. Full Redis support will be documented/supported in 1.4.0.</p></li>
<li><p><a class="reference internal" href="../configuration/upstream/cluster_manager/cluster_hc.html#config-cluster-manager-cluster-hc-tcp-health-checking"><span class="std std-ref">TCP health checking</span></a> now supports a
“connect only” mode that only checks if the remote server can be connected to without
writing/reading any data.</p></li>
<li><p><a class="reference external" href="https://boringssl.googlesource.com/boringssl">BoringSSL</a> is now the only supported TLS provider.
The default cipher suites and ECDH curves have been updated with more modern defaults for both
listener and cluster connections.</p></li>
<li><p>The <cite>header value match</cite> rate limit action has been expanded to include an <cite>expect
match</cite> parameter.</p></li>
<li><p>Route level HTTP rate limit configurations now do not inherit the virtual host level
configurations by default. Use <cite>include_vh_rate_limits</cite> to inherit the virtual host
level options if desired.</p></li>
<li><p>HTTP routes can now add request headers on a per route and per virtual host basis via the
<a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">request_headers_to_add</span></a> option.</p></li>
<li><p>The <a class="reference internal" href="../install/ref_configs.html#install-ref-configs"><span class="std std-ref">example configurations</span></a> have been refreshed to demonstrate the
latest features.</p></li>
<li><p><cite>per_try_timeout_ms</cite> can now be configured in
a route’s retry policy in addition to via the <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-upstream-rq-per-try-timeout-ms"><span class="std std-ref">x-envoy-upstream-rq-per-try-timeout-ms</span></a> HTTP header.</p></li>
<li><p>HTTP virtual host matching now includes support for prefix wildcard domains (e.g., <cite>*.lyft.com</cite>).</p></li>
<li><p>The default for tracing random sampling has been changed to 100% and is still configurable in
<a class="reference internal" href="../configuration/http/http_conn_man/runtime.html#config-http-conn-man-runtime"><span class="std std-ref">runtime</span></a>.</p></li>
<li><p>HTTP tracing configuration has been extended to allow tags
to be populated from arbitrary HTTP headers.</p></li>
<li><p>The <a class="reference internal" href="../configuration/http/http_filters/rate_limit_filter.html#config-http-filters-rate-limit"><span class="std std-ref">HTTP rate limit filter</span></a> can now be applied to internal,
external, or all requests via the <cite>request_type</cite> option.</p></li>
<li><p><a class="reference internal" href="../configuration/listeners/listeners.html#config-listeners"><span class="std std-ref">Listener binding</span></a> now requires specifying an <cite>address</cite> field. This can be
used to bind a listener to both a specific address as well as a port.</p></li>
<li><p>The <a class="reference internal" href="../configuration/listeners/network_filters/mongo_proxy_filter.html#config-network-filters-mongo-proxy"><span class="std std-ref">MongoDB filter</span></a> now emits a stat for queries that
do not have <cite>$maxTimeMS</cite> set.</p></li>
<li><p>The <a class="reference internal" href="../configuration/listeners/network_filters/mongo_proxy_filter.html#config-network-filters-mongo-proxy"><span class="std std-ref">MongoDB filter</span></a> now emits logs that are fully valid
JSON.</p></li>
<li><p>The CPU profiler output path is now configurable.</p></li>
<li><p>A watchdog system has been added that can kill the server if a deadlock is detected.</p></li>
<li><p>A <a class="reference internal" href="../install/tools/route_table_check_tool.html#install-tools-route-table-check-tool"><span class="std std-ref">route table checking tool</span></a> has been added that can
be used to test route tables before use.</p></li>
<li><p>We have added an <a class="reference internal" href="../extending/extending.html#extending"><span class="std std-ref">example repo</span></a> that shows how to compile/link a custom filter.</p></li>
<li><p>Added additional cluster wide information related to outlier detection to the <a class="reference internal" href="../operations/admin.html#operations-admin-interface"><span class="std std-ref">/clusters
admin endpoint</span></a>.</p></li>
<li><p>Multiple SANs can now be verified via the <cite>verify_subject_alt_name</cite> setting.
Additionally, URI type SANs can be verified.</p></li>
<li><p>HTTP filters can now be passed opaque configuration specified on a per route basis.</p></li>
<li><p>By default Envoy now has a built in crash handler that will print a back trace. This behavior can
be disabled if desired via the <code class="docutils literal notranslate"><span class="pre">--define=signal_trace=disabled</span></code> Bazel option.</p></li>
<li><p>Zipkin has been added as a supported <a class="reference internal" href="arch_overview/observability/tracing.html#arch-overview-tracing"><span class="std std-ref">tracing provider</span></a>.</p></li>
<li><p>Numerous small changes and fixes not listed here.</p></li>
</ul>
</div>
<div class="section" id="march-7-2017">
<h2>1.2.0 (March 7, 2017)<a class="headerlink" href="#march-7-2017" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../configuration/upstream/cluster_manager/cds.html#config-cluster-manager-cds"><span class="std std-ref">Cluster discovery service (CDS) API</span></a>.</p></li>
<li><p><a class="reference internal" href="arch_overview/upstream/outlier.html#arch-overview-outlier-detection"><span class="std std-ref">Outlier detection</span></a> (passive health checking).</p></li>
<li><p>Envoy configuration is now checked against a JSON schema.</p></li>
<li><p><a class="reference internal" href="arch_overview/upstream/load_balancing/load_balancers.html#arch-overview-load-balancing-types"><span class="std std-ref">Ring hash</span></a> consistent load balancer, as well as HTTP
consistent hash routing based on a policy.</p></li>
<li><p>Vastly <a class="reference internal" href="arch_overview/other_features/global_rate_limiting.html#arch-overview-global-rate-limit"><span class="std std-ref">enhanced global rate limit configuration</span></a> via the HTTP
rate limiting filter.</p></li>
<li><p>HTTP routing to a cluster retrieved from a header.</p></li>
<li><p>Weighted cluster HTTP routing.</p></li>
<li><p>Auto host rewrite during HTTP routing.</p></li>
<li><p>Regex header matching during HTTP routing.</p></li>
<li><p>HTTP access log runtime filter.</p></li>
<li><p>LightStep tracer <a class="reference internal" href="arch_overview/observability/tracing.html#arch-overview-tracing"><span class="std std-ref">parent/child span association</span></a>.</p></li>
<li><p><a class="reference internal" href="../configuration/http/http_conn_man/rds.html#config-http-conn-man-rds"><span class="std std-ref">Route discovery service (RDS) API</span></a>.</p></li>
<li><p>HTTP router <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-upstream-rq-timeout-alt-response"><span class="std std-ref">x-envoy-upstream-rq-timeout-alt-response header</span></a> support.</p></li>
<li><p><em>use_original_dst</em> and <em>bind_to_port</em> <a class="reference internal" href="../configuration/listeners/listeners.html#config-listeners"><span class="std std-ref">listener options</span></a> (useful for
iptables based transparent proxy support).</p></li>
<li><p>TCP proxy filter <a class="reference internal" href="../configuration/listeners/network_filters/tcp_proxy_filter.html#config-network-filters-tcp-proxy"><span class="std std-ref">route table support</span></a>.</p></li>
<li><p>Configurable stats flush interval.</p></li>
<li><p>Various <a class="reference internal" href="../install/building.html#install-requirements"><span class="std std-ref">third party library upgrades</span></a>, including using BoringSSL as
the default SSL provider.</p></li>
<li><p>No longer maintain closed HTTP/2 streams for priority calculations. Leads to substantial memory
savings for large meshes.</p></li>
<li><p>Numerous small changes and fixes not listed here.</p></li>
</ul>
</div>
<div class="section" id="november-30-2016">
<h2>1.1.0 (November 30, 2016)<a class="headerlink" href="#november-30-2016" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Switch from Jannson to RapidJSON for our JSON library (allowing for a configuration schema in
1.2.0).</p></li>
<li><p>Upgrade <a class="reference internal" href="../install/building.html#install-requirements"><span class="std std-ref">recommended version</span></a> of various other libraries.</p></li>
<li><p>Configurable DNS refresh rate for DNS service discovery types.</p></li>
<li><p>Upstream circuit breaker configuration can be <a class="reference internal" href="../configuration/upstream/cluster_manager/cluster_runtime.html#config-cluster-manager-cluster-runtime"><span class="std std-ref">overridden via runtime</span></a>.</p></li>
<li><p><a class="reference internal" href="arch_overview/upstream/load_balancing/zone_aware.html#arch-overview-load-balancing-zone-aware-routing"><span class="std std-ref">Zone aware routing support</span></a>.</p></li>
<li><p>Generic header matching routing rule.</p></li>
<li><p>HTTP/2 graceful connection draining (double GOAWAY).</p></li>
<li><p>DynamoDB filter <a class="reference internal" href="../configuration/http/http_filters/dynamodb_filter.html#config-http-filters-dynamo"><span class="std std-ref">per shard statistics</span></a> (pre-release AWS
feature).</p></li>
<li><p>Initial release of the <a class="reference internal" href="../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection"><span class="std std-ref">fault injection HTTP filter</span></a>.</p></li>
<li><p>HTTP <a class="reference internal" href="../configuration/http/http_filters/rate_limit_filter.html#config-http-filters-rate-limit"><span class="std std-ref">rate limit filter</span></a> enhancements (note that the
configuration for HTTP rate limiting is going to be overhauled in 1.2.0).</p></li>
<li><p>Added <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-on"><span class="std std-ref">refused-stream retry policy</span></a>.</p></li>
<li><p>Multiple <a class="reference internal" href="arch_overview/http/http_routing.html#arch-overview-http-routing-priority"><span class="std std-ref">priority queues</span></a> for upstream clusters
(configurable on a per route basis, with separate connection pools, circuit breakers, etc.).</p></li>
<li><p>Added max connection circuit breaking to the <a class="reference internal" href="arch_overview/listeners/tcp_proxy.html#arch-overview-tcp-proxy"><span class="std std-ref">TCP proxy filter</span></a>.</p></li>
<li><p>Added <a class="reference internal" href="../operations/cli.html#operations-cli"><span class="std std-ref">CLI</span></a> options for setting the logging file flush interval as well
as the drain/shutdown time during hot restart.</p></li>
<li><p>A very large number of performance enhancements for core HTTP/TCP proxy flows as well as a
few new configuration flags to allow disabling expensive features if they are not needed
(specifically request ID generation and dynamic response code stats).</p></li>
<li><p>Support Mongo 3.2 in the <a class="reference internal" href="../configuration/listeners/network_filters/mongo_proxy_filter.html#config-network-filters-mongo-proxy"><span class="std std-ref">Mongo sniffing filter</span></a>.</p></li>
<li><p>Lots of other small fixes and enhancements not listed.</p></li>
</ul>
</div>
<div class="section" id="september-12-2016">
<h2>1.0.0 (September 12, 2016)<a class="headerlink" href="#september-12-2016" title="Permalink to this headline">¶</a></h2>
<p>Initial open source release.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="deprecated.html" class="btn btn-neutral float-right" title="Deprecated" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_help.html" class="btn btn-neutral float-left" title="Getting help" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2020, Envoy Project Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>