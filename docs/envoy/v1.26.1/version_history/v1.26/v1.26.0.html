<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.26.0 (April 17, 2023) &mdash; envoy 1.26.1-c7e8e7 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/envoy.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" src="../../_static/jquery.js"></script>
        <script integrity="sha384-lSZeSIVKp9myfKbDQ3GkN/KHjUc+mzg17VKDN4Y2kUeBSJioB9QSM639vM9fuY//" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="v1.25" href="../v1.25/v1.25.html" />
    <link rel="prev" title="1.26.1 (April 25, 2023)" href="v1.26.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.26.1-c7e8e7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../version_history.html">Version history</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../version_history.html#stable-versions">Stable versions</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="v1.26.html">v1.26: 1.26.1 (April 25, 2023)</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="v1.26.1.html">1.26.1 (April 25, 2023)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">1.26.0 (April 17, 2023)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../v1.25/v1.25.html">v1.25: 1.25.6 (April 27, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.24/v1.24.html">v1.24: 1.24.7 (April 26, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.23/v1.23.html">v1.23: 1.23.9 (April 26, 2023)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#archived-versions">Archived versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#deprecation-policy">Deprecation Policy</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../version_history.html">Version history</a></li>
          <li class="breadcrumb-item"><a href="v1.26.html">v1.26</a></li>
      <li class="breadcrumb-item active">1.26.0 (April 17, 2023)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/version_history/v1.26/v1.26.0.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="april-17-2023">
<span id="version-history-1-26-0"></span><h1>1.26.0 (April 17, 2023)<a class="headerlink" href="#april-17-2023" title="Permalink to this heading"></a></h1>
<section id="incompatible-behavior-changes">
<h2>Incompatible behavior changes<a class="headerlink" href="#incompatible-behavior-changes" title="Permalink to this heading"></a></h2>
<p><em>Changes that are expected to cause an incompatibility if applicable; deployment changes are likely required</em></p>
<ul class="simple">
<li><p><strong>admin</strong>: Adds a new admin stats format option <code class="docutils literal notranslate"><span class="pre">html-active</span></code> to display a periodically updated list of the top most frequently
changed stats.</p></li>
<li><p><strong>build</strong>: Moved the tcp, http, and grpc health checkers to extensions. If you use these and override <code class="docutils literal notranslate"><span class="pre">extensions_build_config.bzl</span></code>
you will now need to include them explicitly.</p></li>
<li><p><strong>http</strong>: Validate upstream request header names and values. The new runtime flag
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.validate_upstream_headers</span></code> can be used for revert this behavior.</p></li>
<li><p><strong>oauth2</strong>: OAuth filter now URL-encodes URL in query parameters. These query parameters are decoded, leaving intact character
sequences that must remain encoded in URLs. This behavioral change can be temporarily reverted by setting runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.oauth_use_url_encoding</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
</ul>
</section>
<section id="minor-behavior-changes">
<h2>Minor behavior changes<a class="headerlink" href="#minor-behavior-changes" title="Permalink to this heading"></a></h2>
<p><em>Changes that may cause incompatibilities for some users, but should not for most</em></p>
<ul class="simple">
<li><p><strong>access_logs</strong>: Using <code class="docutils literal notranslate"><span class="pre">%DURATION%</span></code> in access logs will either resolve the total duration of the stream, or mid-stream duration.
This is useful to track stream duration with periodic access logs.</p></li>
<li><p><strong>build</strong>: Moved the REST and filesystem config subscripton code into extensions. If you use them for config updates and
override <code class="docutils literal notranslate"><span class="pre">extensions_build_config.bzl</span></code> you will now need to include them explicitly.</p></li>
<li><p><strong>custom response</strong>: Changed how the uri for redirect policy is specified. It can now be specified either as a single fully qualified string,
or by specifying individual components of the uri.
If <code class="docutils literal notranslate"><span class="pre">status_code</span></code> in <a class="reference internal" href="../../api-v3/extensions/http/custom_response/redirect_policy/v3/redirect_policy.proto.html#envoy-v3-api-msg-extensions-http-custom-response-redirect-policy-v3-redirectpolicy"><span class="std std-ref">RedirectPolicy</span></a>
is not specified, Envoy now returns the original response code, instead of the response code returned after redirection
to the error service.</p></li>
<li><p><strong>event</strong>: <code class="docutils literal notranslate"><span class="pre">Event::PostCb</span></code> type changed from <code class="docutils literal notranslate"><span class="pre">std::function</span></code> to <code class="docutils literal notranslate"><span class="pre">absl::AnyInvocable</span></code>. This makes it possible
to capture <code class="docutils literal notranslate"><span class="pre">unique_ptrs</span></code> in dispatcher callbacks. If you have used <code class="docutils literal notranslate"><span class="pre">Event::PostCb</span></code> as shorthand for
<code class="docutils literal notranslate"><span class="pre">std::function&lt;void()&gt;</span></code> in a non-post-callback-related context, you will have to change that.
If you have used <code class="docutils literal notranslate"><span class="pre">std::function</span></code> in a mock dispatcher, you will have to change that to <code class="docutils literal notranslate"><span class="pre">Event::PostCb</span></code>
and may need to make it moveable. See <a class="reference external" href="https://github.com/envoyproxy/envoy/pull/26296">https://github.com/envoyproxy/envoy/pull/26296</a> for a variety of
example fixes.</p></li>
<li><p><strong>ext_authz</strong>: ext_authz will add <code class="docutils literal notranslate"><span class="pre">x-envoy-auth-failure-mode-allowed</span></code> header when <code class="docutils literal notranslate"><span class="pre">failure_mode_allow</span></code> is enable.
This behavior can be reverted by setting runtime flag
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http_ext_auth_failure_mode_allow_header_add</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>ext_proc</strong>: Make the <a class="reference internal" href="../../api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-grpc-service"><span class="std std-ref">grpc service</span></a>
required.</p></li>
<li><p><strong>healthcheck</strong>: If active HC is enabled and a host is ejected by outlier detection, a successful active health check unejects the host
and consider it healthy. This also clears all the outlier detection counters. This behavior change can be reverted by
setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features_successful_active_health_check_uneject_host</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>http</strong>: Prohibit route refresh after the response headers have been sent, and clear the cached route table to more
aggressively free memory. Attempting to refresh or clear the route cache when it is blocked will result in an error. This
behavior can be reverted by setting runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.prohibit_route_refresh_after_response_headers_sent</span></code>
to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>http stream</strong>: Extended the lifetime of the protocol agnostic stream object to correct discrepancies between what is access logged and
what occurred with the protocol specific stream. This behavior change can be reverted by setting
<code class="docutils literal notranslate"><span class="pre">envoy_reloadable_features_expand_agnostic_stream_lifetime</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>http2</strong>: Metadata is parsed with the QUICHE HPACK library, rather than nghttp2. This behavior change can be reverted by setting
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http2_decode_metadata_with_quiche</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>http2</strong>: Request authorities are now validated with a library function from QUICHE rather than nghttp2. This behavior change can
be reverted by setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http2_validate_authority_with_quiche</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>http3</strong>: Convert HTTP/3 extended connect to/from HTTP/1 upgrade. This behavior change can be reverted by setting
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.use_http3_header_normalisation</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>local_ratelimit</strong>: Tokens from local descriptor’s token buckets are burned before tokens from the default token bucket.</p></li>
<li><p><strong>lua</strong>: Dropped moonjit support.</p></li>
<li><p><strong>matchers</strong>: Added dynamic metadata to the <code class="docutils literal notranslate"><span class="pre">MatchingData</span></code> object to enable writing <code class="docutils literal notranslate"><span class="pre">matcher_tree</span></code> input objects that can parse
provided dynamic metadata.</p></li>
<li><p><strong>matchers</strong>: Moved all of the network input matchers to extensions. If you use network matchers and override
extensions_build_config.bzl you will now need to include them explicitly.</p></li>
<li><p><strong>quic</strong>: Access logging is now deferred to the QUIC ack listener, and roundtrip response time is added as a downstream timing
metric. New runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.quic_defer_logging_to_ack_listener</span></code> can be used for revert this
behavior.</p></li>
<li><p><strong>skywalking</strong>: If sw8 header is invalid, skywalking extension will create a new trace context and a null span respectively when
sampling is enabled and disabled.</p></li>
<li><p><strong>uhv</strong>: Translate backslash to slash in the default header validator. This behavior can be reverted by setting runtime flag
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.uhv_translate_backslash_to_slash</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>, in which case requests with backslash in path
are rejected. This setting is only applicable when the Unversal Header Validator is enabled and has no effect otherwise.</p></li>
<li><p><strong>upstream</strong>: Changed HTTP/1 and HTTP/3 upstream streams not to disable reading (in case where downstream buffer reaches high
watermark) till the full response headers have been received. This fixes a bug where Envoy upstream timeouts were not
correctly adjusting to the fact that the response headers have already been sent from upstream. This behavior change can
be reverted by setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.upstream_wait_for_response_headers_before_disabling_read</span></code> to
<code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
</ul>
</section>
<section id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this heading"></a></h2>
<p><em>Changes expected to improve the state of the world and are unlikely to have negative effects</em></p>
<ul class="simple">
<li><p><strong>access log</strong>: In JSON logs, port numbers were logged as strings and are now logged as numbers (<code class="docutils literal notranslate"><span class="pre">%DOWNSTREAM_LOCAL_PORT%</span></code>,
<code class="docutils literal notranslate"><span class="pre">%DOWNSTREAM_REMOTE_PORT%</span></code>, <code class="docutils literal notranslate"><span class="pre">%DOWNSTREAM_DIRECT_REMOTE_PORT%</span></code>, <code class="docutils literal notranslate"><span class="pre">%UPSTREAM_LOCAL_PORT%</span></code>,
<code class="docutils literal notranslate"><span class="pre">%UPSTREAM_REMOTE_PORT%</span></code>). This behavioral change can be temporarily reverted by setting runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.format_ports_as_numbers</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>dependency</strong>: Add boringssl patch to resolve CVE-2023-0286. Note that the FIPS build is not patched/fixed.</p></li>
<li><p><strong>dubbo</strong>: Fix a bug that the Dubbo proxy will treat the response with status 80 as a illegal response.</p></li>
<li><p><strong>ecds</strong>: Delay listener activation until after the new ECDS filter configuration is created. Previously, listeners were activated
with the xDS acceptance before the new extension config is fully processed.</p></li>
<li><p><strong>eds</strong>: Added <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.multiplex_eds</span></code> to disable EDS multiplexing. EDS multiplexing is enabled by default,
so that all subscriptions for the same resource type and management server reuse a single channel/mux. When EDS
multiplexing is disabled each subscription uses a dedicated channel/mux.</p></li>
<li><p><strong>ext_proc</strong>: Ensure the route configuration will be used to overwrite global configuration when processing the local reply.</p></li>
<li><p><strong>ext_proc</strong>: Let <code class="docutils literal notranslate"><span class="pre">onData</span></code> always raise <code class="docutils literal notranslate"><span class="pre">StopIterationAndWatermark</span></code> when waiting for headers response, to avoid http errors (413 on
request path, and 500 on response path) when data size goes above high watermark.</p></li>
<li><p><strong>grpc</strong>: The <a class="reference internal" href="../../configuration/http/http_filters/connect_grpc_bridge_filter.html#config-http-filters-connect-grpc-bridge"><span class="std std-ref">connect_grpc_bridge filter</span></a>
filter now works correctly when the request payload is compressed on a unary buf connect request.</p></li>
<li><p><strong>grpc</strong>: When Envoy was configured to use ext_authz, ext_proc, tap, ratelimit filters, and gRPC access log service and an http header
with non-UTF-8 data was received, Envoy would generate an invalid protobuf message and send it to the configured service. The
receiving service would typically generate an error when decoding the protobuf message. For ext_authz that was configured with
<code class="docutils literal notranslate"><span class="pre">failure_mode_allow:</span> <span class="pre">true</span></code>, the request would have been allowed in this case. For the other services, this could have resulted
in other unforseen errors such as a lack of visibility into requests (eg request not logged). Envoy will now by default sanitize
the values sent in gRPC service calls to be valid UTF-8, replacing data that is not valid UTF-8 with a <code class="docutils literal notranslate"><span class="pre">!</span></code> character. This
behavioral change can be temporarily reverted by setting runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.service_sanitize_non_utf8_strings</span></code> to false.</p></li>
<li><p><strong>http</strong>: Fixed a bug where <code class="docutils literal notranslate"><span class="pre">x-envoy-original-path</span></code> was not being sanitized when sent from untrusted users. The header is <em>only</em>
removed when sent from untrusted users, and not also before being sent to an upstream server. This behavioral change can
be temporarily reverted by setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.sanitize_original_path</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>http</strong>: Fixed a bug where terminating <code class="docutils literal notranslate"><span class="pre">CONNECT</span></code> on a preconnected connection could result in session stalls.</p></li>
<li><p><strong>http</strong>: Sanitization of the referer header has been relaxed to allow relative URLs, and also tightened to remove referers
containing user info or fragment components, as documented here <a class="reference internal" href="../../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-referer"><span class="std std-ref">here</span></a>. This
behavioral change can be temporarily reverted by setting runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http_allow_partial_urls_in_referer</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>http</strong>: Stop forwarding <code class="docutils literal notranslate"><span class="pre">:method</span></code> value which is not a valid token defined in <a class="reference external" href="https://www.rfc-editor.org/rfc/rfc9110#section-5.6.2">https://www.rfc-editor.org/rfc/rfc9110#section-5.6.2</a>.
Also, reject <code class="docutils literal notranslate"><span class="pre">:method</span></code> and <code class="docutils literal notranslate"><span class="pre">:scheme</span></code> headers with multiple values.</p></li>
<li><p><strong>http filter</strong>: Fix possible illegal memory access in the header_mutaion filter when the request is aborted before the request headers
are received completely.</p></li>
<li><p><strong>http3</strong>: Reject pseudo headers violating RFC 9114. Specifically, pseudo-header fields with more than one value for the <code class="docutils literal notranslate"><span class="pre">:method</span></code>
(non-<code class="docutils literal notranslate"><span class="pre">CONNECT</span></code>), <code class="docutils literal notranslate"><span class="pre">:scheme</span></code>, and <code class="docutils literal notranslate"><span class="pre">:path</span></code>; or pseudo-header fields after regular header fields; or undefined pseudo-headers.</p></li>
<li><p><strong>lua</strong>: Lua coroutine should not execute after local reply is sent.</p></li>
<li><p><strong>oauth2</strong>: Fixed a bug where the Oauth2 filter would crash if it received a redirect URL without a state query param set.</p></li>
<li><p><strong>router</strong>: Fixed outlier detection ejections caused by opened circuit breakers.</p></li>
<li><p><strong>router</strong>: Fixed the bug that custom tags of the route metadata type are not set for upstream spans.</p></li>
<li><p><strong>stats</strong>: Now updating upstream total connection stats as happy eyeballs connections are created.</p></li>
<li><p><strong>upstream</strong>: Initialize upstream network read filters via their <code class="docutils literal notranslate"><span class="pre">onNewConnection()</span></code> callback once the upstream connection has been
established even if there is no data available for reading on the new upstream connection. This behavior change can be
reverted by setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.initialize_upstream_filters</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
</ul>
</section>
<section id="removed-config-or-runtime">
<h2>Removed config or runtime<a class="headerlink" href="#removed-config-or-runtime" title="Permalink to this heading"></a></h2>
<p><em>Normally occurs at the end of the</em> <a class="reference internal" href="../version_history.html#deprecated"><span class="std std-ref">deprecation period</span></a></p>
<ul class="simple">
<li><p><strong>config</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.admin_stats_filter_use_re2</span></code> and legacy code paths. removed
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.combine_sds_requests</span></code> and legacy code paths.</p></li>
<li><p><strong>dns</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.cares_accept_nodata</span></code> and legacy code paths.</p></li>
<li><p><strong>dns</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.dns_multiple_addresses</span></code> runtime flag and legacy code paths.</p></li>
<li><p><strong>http</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.allow_concurrency_for_alpn_pool</span></code> and legacy code path.</p></li>
<li><p><strong>http</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http2_delay_keepalive_timeout</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http_skip_adding_content_length_to_upgrade</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.local_ratelimit_match_all_descriptors</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.lua_respond_with_send_local_reply</span></code> and legacy code path.</p></li>
<li><p><strong>http</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.use_rfc_connect</span></code> and legacy code path.</p></li>
<li><p><strong>http3</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.conn_pool_new_stream_with_early_data_and_http3</span></code> and legacy code paths.</p></li>
<li><p><strong>http3</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http3_sends_early_data</span></code> and legacy code paths.</p></li>
<li><p><strong>http3</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.postpone_h3_client_connect_to_next_loop</span></code> and legacy code paths.</p></li>
<li><p><strong>router</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.get_route_config_factory_by_type</span></code> runtime flag. The flag is no longer needed as the
behavior is now the default.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New features<a class="headerlink" href="#new-features" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>access_log</strong>: Added support for <a class="reference internal" href="../../configuration/observability/access_log/usage.html#config-access-log-format-downstream-transport-failure-reason"><span class="std std-ref">%DOWNSTREAM_TRANSPORT_FAILURE_REASON%</span></a> as a log command operator about why listener may have
failed due to a transport socket error, including TLS handshake failures. added the field
<a class="reference internal" href="../../api-v3/data/accesslog/v3/accesslog.proto.html#envoy-v3-api-field-data-accesslog-v3-accesslogcommon-downstream-transport-failure-reason"><span class="std std-ref">downstream_transport_failure_reason</span></a> for common usage as well.</p></li>
<li><p><strong>access_log</strong>: Added upstream/downstream header and wire bytes fields to the grpc access log service proto.</p></li>
<li><p><strong>access_log</strong>: Enhanced observability into local close for <a class="reference internal" href="../../configuration/http/http_conn_man/response_code_details.html#config-http-conn-man-details"><span class="std std-ref">%RESPONSE_CODE_DETAILS%</span></a>.</p></li>
<li><p><strong>config</strong>: Added <a class="reference internal" href="../../api-v3/config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-retrypolicy"><span class="std std-ref">RetryPolicy</span></a> to
<a class="reference internal" href="../../api-v3/config/core/v3/grpc_service.proto.html#envoy-v3-api-msg-config-core-v3-grpcservice-envoygrpc"><span class="std std-ref">EnvoyGrpc</span></a> to make
EnvoyGrpc channel retry backoff timing values configurable.</p></li>
<li><p><strong>ext_authz</strong>: Added <a class="reference internal" href="../../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-include-tls-session"><span class="std std-ref">include_tls_session</span></a>
to support sending TLS SNI data as part of CheckRequest for authorization check.</p></li>
<li><p><strong>ext_proc</strong>: Added the support <a class="reference internal" href="../../api-v3/service/ext_proc/v3/external_processor.proto.html#envoy-v3-api-field-service-ext-proc-v3-processingresponse-override-message-timeout"><span class="std std-ref">override_message_timeout</span></a> for the ext_proc server to send
back a message to Envoy to extend the ext_proc timer. added the field <a class="reference internal" href="../../api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-max-message-timeout"><span class="std std-ref">max_message_timeout</span></a> for specifying the max
override_message_timeout could be sent back by the ext_proc server.</p></li>
<li><p><strong>generic_proxy</strong>: Added <a class="reference internal" href="../../api-v3/extensions/filters/network/generic_proxy/v3/generic_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-generic-proxy-v3-genericproxy-tracing"><span class="std std-ref">tracing support</span></a> for
the generic proxy.</p></li>
<li><p><strong>grpc</strong>: Added support for buf connect HTTP GET requests in the
<a class="reference internal" href="../../configuration/http/http_filters/connect_grpc_bridge_filter.html#config-http-filters-connect-grpc-bridge"><span class="std std-ref">connect_grpc_bridge filter</span></a>.</p></li>
<li><p><strong>http</strong>: Add <a class="reference internal" href="../../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-flush-access-log-on-new-request"><span class="std std-ref">flush access log on new request</span></a>
to allow recording an access log entry when a new HTTP request is received by the HTTP connection manager. Details
related to upstream cluster, such as upstream host, will not be available for this log. This option does not require
periodic access logging enabled, and the other way around.</p></li>
<li><p><strong>http</strong>: Add <a class="reference internal" href="../../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-access-log-flush-interval"><span class="std std-ref">periodic access logging</span></a>
to http access logs for long-lived requests (Websockets, CONNECT, etc). <a class="reference internal" href="../../configuration/observability/access_log/usage.html#config-access-log-format-duration"><span class="std std-ref">%DURATION%</span></a> will be empty for mid-request logs. Enabling this may affect access loggers and
filters that register as access loggers that expect to be called only once.</p></li>
<li><p><strong>http</strong>: Added capability for continuing filter chain iteration or send local replies from (decode|encode)Metadata. Additionally,
reset idle timer on metadata actions.</p></li>
<li><p><strong>http</strong>: Make adding ProxyProtocolFilterState in the HCM optional.</p></li>
<li><p><strong>http filter</strong>: Added <a class="reference internal" href="../../configuration/http/http_filters/header_mutation_filter.html#config-http-filters-header-mutation"><span class="std std-ref">header mutation http filter</span></a> which adds the ability to modify request
and response headers in any position of HTTP filter chain.</p></li>
<li><p><strong>jwt_authn</strong>: Added <a class="reference internal" href="../../api-v3/extensions/filters/http/jwt_authn/v3/config.proto.html#envoy-v3-api-field-extensions-filters-http-jwt-authn-v3-jwtprovider-failed-status-in-metadata"><span class="std std-ref">failed_status_in_metadata</span></a> to support setting the
JWT authentication failure status code and message in dynamic metadata.</p></li>
<li><p><strong>load shed point</strong>: Added load shed point <code class="docutils literal notranslate"><span class="pre">envoy.load_shed_points.tcp_listener_accept</span></code> that rejects new tcp connections
by closing the connection before the new connection accept phase.</p></li>
<li><p><strong>lua</strong>: Added an new option to the options of lua <code class="docutils literal notranslate"><span class="pre">httpCall</span></code>. This allows to skip adding <code class="docutils literal notranslate"><span class="pre">x-forwarded-for</span></code> by setting
<code class="docutils literal notranslate"><span class="pre">{[&quot;send_xff&quot;]</span> <span class="pre">=</span> <span class="pre">false}</span></code> as the <code class="docutils literal notranslate"><span class="pre">options</span></code>.</p></li>
<li><p><strong>maglev</strong>: Added <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.allow_compact_maglev</span></code> to allow the use of a more compact maglev load balancer
representation. This can be reverted by setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.allow_compact_maglev</span></code> to false.</p></li>
<li><p><strong>matching</strong>: Added <a class="reference internal" href="../../api-v3/extensions/matching/common_inputs/network/v3/network_inputs.proto.html#envoy-v3-api-msg-extensions-matching-common-inputs-network-v3-filterstateinput"><span class="std std-ref">Filter State Input</span></a> for
matching based on filter state objects.</p></li>
<li><p><strong>metrics_service</strong>: Added new configuration field <a class="reference internal" href="../../api-v3/config/metrics/v3/metrics_service.proto.html#envoy-v3-api-field-config-metrics-v3-metricsserviceconfig-histogram-emit-mode"><span class="std std-ref">histogram_emit_mode</span></a> to configure which stats
should be emitted for histograms.</p></li>
<li><p><strong>oauth filter</strong>: Extended <a class="reference internal" href="../../api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2credentials-cookie-names"><span class="std std-ref">cookie_names</span></a> to
allow overriding (default) cookie names (<code class="docutils literal notranslate"><span class="pre">IdToken</span></code>, <code class="docutils literal notranslate"><span class="pre">RefreshToken</span></code>) set by the filter.</p></li>
<li><p><strong>overload manager</strong>: Added stat <code class="docutils literal notranslate"><span class="pre">overload.refresh_interval_delay</span></code> to track the delay between overload manager resource loop refresh in
milliseconds.</p></li>
<li><p><strong>proxy_protocol</strong>: Added the support <a class="reference internal" href="../../api-v3/extensions/filters/listener/proxy_protocol/v3/proxy_protocol.proto.html#envoy-v3-api-field-extensions-filters-listener-proxy-protocol-v3-proxyprotocol-pass-through-tlvs"><span class="std std-ref">pass_through_tlvs for listener</span></a> and
<a class="reference internal" href="../../api-v3/config/core/v3/proxy_protocol.proto.html#envoy-v3-api-field-config-core-v3-proxyprotocolconfig-pass-through-tlvs"><span class="std std-ref">pass_through_tlvs for upsteam</span></a>. They can
control which Proxy Protocol V2 TLVs can be passed through by listener and upstream separately.</p></li>
<li><p><strong>ratelimit</strong>: Added local rate limit listener filter to enable rate limit before TLS handshake and filter matching.</p></li>
<li><p><strong>redis</strong>: Added <a class="reference internal" href="../../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-wait-for-warm-on-init"><span class="std std-ref">wait_for_warm_on_init</span></a> support for
<a class="reference internal" href="../../intro/arch_overview/other_protocols/redis.html#arch-overview-redis"><span class="std std-ref">Redis Cluster</span></a>.</p></li>
<li><p><strong>redis_health_check</strong>: Added <a class="reference internal" href="../../configuration/upstream/health_checkers/redis.html#config-health-checkers-redis"><span class="std std-ref">exists_failure</span></a> stat to indicate health check failures caused by EXISTS check
failure.</p></li>
<li><p><strong>route</strong>: Support dynamic clusters for <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-virtualhost-matcher"><span class="std std-ref">VirtualHost.matcher</span></a>.</p></li>
<li><p><strong>route</strong>: Support route callback after route matches for <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-virtualhost-matcher"><span class="std std-ref">VirtualHost.matcher</span></a>.</p></li>
<li><p><strong>router</strong>: Add <a class="reference internal" href="../../api-v3/extensions/filters/http/router/v3/router.proto.html#envoy-v3-api-field-extensions-filters-http-router-v3-router-upstreamaccesslogoptions-flush-upstream-log-on-upstream-stream"><span class="std std-ref">flush upstream log on upstream stream</span></a>
to allow recording an upstream access log entry when a new HTTP request is received, and the upstream stream is created.
Note that in case a retry is applied for the received request, a start of request upstream access
log will be recorded for each retry.</p></li>
<li><p><strong>router</strong>: Support route info in upstream access log.</p></li>
<li><p><strong>sni_dynamic_forward_proxy</strong>: Added an option to dynamically set the host used by the SNI dynamic forward proxy filter, by setting a filter state
object under the key <code class="docutils literal notranslate"><span class="pre">envoy.upstream.dynamic_host</span></code>.</p></li>
<li><p><strong>sni_dynamic_forward_proxy</strong>: Added an option to dynamically set the port used by the SNI dynamic forward proxy filter, by setting a filter state
object under the key <code class="docutils literal notranslate"><span class="pre">envoy.upstream.dynamic_port</span></code>.</p></li>
<li><p><strong>tcp_proxy</strong>: Add <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-flush-access-log-on-connected"><span class="std std-ref">flush access log on connected</span></a> to allow recording
an access log entry on the connection open event. This option does not require periodic access logging enabled, and the
other way around.</p></li>
<li><p><strong>tcp_proxy</strong>: Added an option to dynamically disable TCP tunneling even if set in the filter config, by setting a filter state object
for the key <code class="docutils literal notranslate"><span class="pre">envoy.tcp_proxy.disable_tunneling</span></code>.</p></li>
<li><p><strong>tcp_proxy</strong>: Added support for propagating the response trailers in <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-tunnelingconfig-propagate-response-trailers"><span class="std std-ref">TunnelingConfig</span></a> to
the downstream info filter state.</p></li>
<li><p><strong>tls</strong>: Added new field <a class="reference internal" href="../../api-v3/extensions/transport_sockets/tls/v3/common.proto.html#envoy-v3-api-field-extensions-transport-sockets-tls-v3-tlsparameters-signature-algorithms"><span class="std std-ref">signature_algorithms</span></a> to set signature
algorithms.</p></li>
<li><p><strong>tracing</strong>: Allow <a class="reference internal" href="../../api-v3/config/trace/v3/opentelemetry.proto.html#envoy-v3-api-field-config-trace-v3-opentelemetryconfig-grpc-service"><span class="std std-ref">grpc_service</span></a> to be optional. This
enables a means to disable collection of traces.</p></li>
<li><p><strong>upstream</strong>: Added <a class="reference internal" href="../../api-v3/extensions/load_balancing_policies/maglev/v3/maglev.proto.html#envoy-v3-api-msg-extensions-load-balancing-policies-maglev-v3-maglev"><span class="std std-ref">maglev extension</span></a> to suppport the
<a class="reference internal" href="../../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-load-balancing-policy"><span class="std std-ref">load balancer policy</span></a>.</p></li>
<li><p><strong>upstream</strong>: Added <a class="reference internal" href="../../api-v3/extensions/load_balancing_policies/ring_hash/v3/ring_hash.proto.html#envoy-v3-api-msg-extensions-load-balancing-policies-ring-hash-v3-ringhash"><span class="std std-ref">ring hash extension</span></a> to suppport
the <a class="reference internal" href="../../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-load-balancing-policy"><span class="std std-ref">load balancer policy</span></a>.</p></li>
</ul>
</section>
<section id="deprecated">
<h2>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>ext_authz</strong>: Deprecated (1.25.0) <a class="reference internal" href="../../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationrequest-allowed-headers"><span class="std std-ref">ext_authz.v3.AuthorizationRequest.allowed_headers</span></a> in favour of
<a class="reference internal" href="../../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-allowed-headers"><span class="std std-ref">ext_authz.v3.ExtAuthz.allowed_headers</span></a>.</p></li>
<li><p><strong>http</strong>: Deprecated (1.25.0) <a class="reference internal" href="../../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-flush-access-log-on-new-request"><span class="std std-ref">flush access log on new request</span></a>
in favour of <a class="reference internal" href="../../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-hcmaccesslogoptions-flush-access-log-on-new-request"><span class="std std-ref">flush access log on new request</span></a>.</p></li>
<li><p><strong>http</strong>: Deprecated (1.25.0) <a class="reference internal" href="../../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-access-log-flush-interval"><span class="std std-ref">periodic access logging</span></a>
in favour of <a class="reference internal" href="../../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-hcmaccesslogoptions-access-log-flush-interval"><span class="std std-ref">periodic access logging</span></a>.</p></li>
<li><p><strong>tcp_proxy</strong>: Deprecated (1.25.0) <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-access-log-flush-interval"><span class="std std-ref">access_log_flush_interval</span></a> in favour
of <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-tcpaccesslogoptions-access-log-flush-interval"><span class="std std-ref">access_log_flush_interval</span></a>.</p></li>
<li><p><strong>tcp_proxy</strong>: Deprecated (1.25.0) <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-flush-access-log-on-connected"><span class="std std-ref">flush_access_log_on_connected</span></a> in favour
of <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-tcpaccesslogoptions-flush-access-log-on-connected"><span class="std std-ref">flush_access_log_on_connected</span></a>.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="v1.26.1.html" class="btn btn-neutral float-left" title="1.26.1 (April 25, 2023)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../v1.25/v1.25.html" class="btn btn-neutral float-right" title="v1.25" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>