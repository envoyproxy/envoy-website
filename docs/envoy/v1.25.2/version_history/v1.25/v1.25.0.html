<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.25.0 (January 18, 2023) &mdash; envoy 1.25.2-afa988 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/envoy.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" src="../../_static/jquery.js"></script>
        <script integrity="sha384-lSZeSIVKp9myfKbDQ3GkN/KHjUc+mzg17VKDN4Y2kUeBSJioB9QSM639vM9fuY//" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="v1.24" href="../v1.24/v1.24.html" />
    <link rel="prev" title="1.25.1 (February 7, 2023)" href="v1.25.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.25.2-afa988
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../version_history.html">Version history</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../version_history.html#stable-versions">Stable versions</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="v1.25.html">v1.25: 1.25.2 (March 1, 2023)</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="v1.25.2.html">1.25.2 (March 1, 2023)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.25.1.html">1.25.1 (February 7, 2023)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">1.25.0 (January 18, 2023)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../v1.24/v1.24.html">v1.24: 1.24.3 (February 28, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.23/v1.23.html">v1.23: 1.23.5 (February 27, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.22/v1.22.html">v1.22: 1.22.8 (February 24, 2023)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#archived-versions">Archived versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#deprecation-policy">Deprecation Policy</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../version_history.html">Version history</a></li>
          <li class="breadcrumb-item"><a href="v1.25.html">v1.25</a></li>
      <li class="breadcrumb-item active">1.25.0 (January 18, 2023)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/version_history/v1.25/v1.25.0.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="january-18-2023">
<span id="version-history-1-25-0"></span><h1>1.25.0 (January 18, 2023)<a class="headerlink" href="#january-18-2023" title="Permalink to this heading"></a></h1>
<section id="incompatible-behavior-changes">
<h2>Incompatible behavior changes<a class="headerlink" href="#incompatible-behavior-changes" title="Permalink to this heading"></a></h2>
<p><em>Changes that are expected to cause an incompatibility if applicable; deployment changes are likely required</em></p>
<ul class="simple">
<li><p><strong>build</strong>: moved the <code class="docutils literal notranslate"><span class="pre">strict_dns</span></code>, <code class="docutils literal notranslate"><span class="pre">original_dst</span></code>, <code class="docutils literal notranslate"><span class="pre">logical_dns</span></code>, <code class="docutils literal notranslate"><span class="pre">static</span></code>, and <code class="docutils literal notranslate"><span class="pre">eds</span></code> clusters to extensions. If you use these clusters and override <code class="docutils literal notranslate"><span class="pre">extensions_build_config.bzl</span></code> you will now need to include it explicitly.</p></li>
<li><p><strong>build</strong>: removed the c-ares and apple resolvers as required extensions. Envoy now only creates DNS resolvers when necessary (e.g. for logical DNS cluster); as such, it does not require these resolvers to always be included. If your Envoys do DNS resolution and override <code class="docutils literal notranslate"><span class="pre">extensions_build_config.bzl</span></code> you will need to include c-ares / apple resolver explicitly.</p></li>
<li><p><strong>listener</strong>: Previously a listener update with different <a class="reference internal" href="../../api-v3/config/listener/v3/listener.proto.html#envoy-v3-api-field-config-listener-v3-listener-transparent"><span class="std std-ref">transparent</span></a>, <a class="reference internal" href="../../api-v3/config/listener/v3/listener.proto.html#envoy-v3-api-field-config-listener-v3-listener-freebind"><span class="std std-ref">freebind</span></a>,
<a class="reference internal" href="../../api-v3/config/listener/v3/listener.proto.html#envoy-v3-api-field-config-listener-v3-listener-tcp-fast-open-queue-length"><span class="std std-ref">tcp_fast_open_queue_length</span></a> or <a class="reference internal" href="../../api-v3/config/listener/v3/listener.proto.html#envoy-v3-api-field-config-listener-v3-listener-socket-options"><span class="std std-ref">socket_options</span></a> was ignored.
Now, when those fields are updated, a new socket will be created for
the listener and the updated values of those fields will be applied to it. This only happens when <a class="reference internal" href="../../api-v3/config/listener/v3/listener.proto.html#envoy-v3-api-field-config-listener-v3-listener-enable-reuse-port"><span class="std std-ref">enable_reuse_port</span></a> is true.
Otherwise if those fields change the update is rejected.
The runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.enable_update_listener_socket_options</span></code> can be used to revert this behavior.</p></li>
<li><p><strong>loadbalancing</strong>: When active health checking is enabled per cluster, slow start calculations will now start after first passing health check. The cluster membership duration condition is dropped from the slow start calculation.
Endpoints can now re-enter slow start if active health checking is configured per cluster, on each <code class="docutils literal notranslate"><span class="pre">unhealthy</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">healthy</span></code> state transition.</p></li>
<li><p><strong>stats http ext_authz</strong>: Fixed <code class="docutils literal notranslate"><span class="pre">ext_authz</span></code> metric tag extraction so that <a class="reference internal" href="../../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-extauthz"><span class="std std-ref">stat_prefix</span></a>
is properly extracted. This changes the Prometheus name from
<code class="docutils literal notranslate"><span class="pre">envoy_http_ext_authz_prefixval_denied{}</span></code> to <code class="docutils literal notranslate"><span class="pre">envoy_http_ext_authz_denied{envoy_ext_authz_prefix=&quot;prefixval&quot;}</span></code>.
<code class="docutils literal notranslate"><span class="pre">envoy_cluster_X_ext_authz_Y_denied</span></code> follows the same pattern.</p></li>
</ul>
</section>
<section id="minor-behavior-changes">
<h2>Minor behavior changes<a class="headerlink" href="#minor-behavior-changes" title="Permalink to this heading"></a></h2>
<p><em>Changes that may cause incompatibilities for some users, but should not for most</em></p>
<ul class="simple">
<li><p><strong>cache_filter</strong>: add a completion callback to <code class="docutils literal notranslate"><span class="pre">updateHeaders</span></code> interface. Any external cache implementations should be updated to match this new interface. See changes to simple_http_cache in <a class="reference external" href="https://github.com/envoyproxy/envoy/pull/23666">PR #23666</a> for example.</p></li>
<li><p><strong>cache_filter</strong>: api path of work-in-progress extension changed from <code class="docutils literal notranslate"><span class="pre">api/extensions/cache/simple_http_cache</span></code> to <code class="docutils literal notranslate"><span class="pre">api/extensions/http/cache/simple_http_cache</span></code>, and source code moved to match extension category.</p></li>
<li><p><strong>config</strong>: add support for thrift connection draining. This can be disabled by setting the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.thrift_connection_draining</span></code> to false.</p></li>
<li><p><strong>http</strong>: reverted the behavioral change to have <code class="docutils literal notranslate"><span class="pre">CONNECT</span></code> and upgrade requests over HTTP/1.1 not delay close.  One can reinstate
delay close for upgrades by setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.no_delay_close_for_upgrades</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><strong>http filter</strong>: Avoid re-entrant filter invocations if we do a local reply via the filter chain when executing decoder filters. This behavioral change can be temporarily reverted by setting runtime flag <code class="docutils literal notranslate"><span class="pre">envoy_reloadable_features_http_filter_avoid_reentrant_local_reply</span></code> to false.</p></li>
<li><p><strong>http filters</strong>: change <code class="docutils literal notranslate"><span class="pre">StreamEncoderFilter::encode1xxHeaders</span></code> to use its own enum class <code class="docutils literal notranslate"><span class="pre">Http::Filter1xxHeadersStatus</span></code>. Previously we shared the same enum class for general headers, but the implementation did not support most of them. We also fixed <code class="docutils literal notranslate"><span class="pre">StreamEncoderFilter::encode1xxHeaders</span></code> to send local replies without trailing 1xx headers afterward.</p></li>
<li><p><strong>jwt_authn</strong>: adjust the refetch time for <code class="docutils literal notranslate"><span class="pre">remote_jwks</span></code> <code class="docutils literal notranslate"><span class="pre">async_fetch</span></code> feature. For a good fetch, refetch 5 seconds before jwks cache duration. For a failed fetch, refetch time can be specified by <a class="reference internal" href="../../api-v3/extensions/filters/http/jwt_authn/v3/config.proto.html#envoy-v3-api-field-extensions-filters-http-jwt-authn-v3-jwksasyncfetch-failed-refetch-duration"><span class="std std-ref">failed_refetch_duration</span></a> with default 1 second.</p></li>
<li><p><strong>oauth2</strong>: Requests which match the passthrough header now have their own metric <code class="docutils literal notranslate"><span class="pre">oauth_passthrough</span></code> and aren’t included in <code class="docutils literal notranslate"><span class="pre">oauth_success</span></code> anymore.</p></li>
<li><p><strong>oauth2</strong>: query parameters in the <a class="reference internal" href="../../api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-authorization-endpoint"><span class="std std-ref">authorization_endpoint</span></a> are now preserved.</p></li>
<li><p><strong>rate_limit</strong>: add <code class="docutils literal notranslate"><span class="pre">MONTH</span></code> and <code class="docutils literal notranslate"><span class="pre">YEAR</span></code> to the unit of time for rate limit.</p></li>
<li><p><strong>router</strong>: Virtual cluster statistics are no longer created for routes without any <code class="docutils literal notranslate"><span class="pre">virtual_clusters</span></code>. Previously statistics for a <code class="docutils literal notranslate"><span class="pre">catch</span> <span class="pre">all</span></code> virtual cluster were created, but never updated.</p></li>
<li><p><strong>tcp</strong>: added <a class="reference internal" href="../../api-v3/extensions/upstreams/tcp/v3/tcp_protocol_options.proto.html#envoy-v3-api-field-extensions-upstreams-tcp-v3-tcpprotocoloptions-idle-timeout"><span class="std std-ref">idle_timeout</span></a> to support per client idle timeout for tcp connection pool. The timeout is guarded by <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.tcp_pool_idle_timeout</span></code> and timeout defaults to 10 minutes if runtime flag is enabled.</p></li>
<li><p><strong>tls</strong>: added support for intermediate CA as trusted CA. The peer certificate issued by an intermediate CA will be trusted by
building valid partial chain. Before, it could not be verified without trusting its ancestor root CA and building
a full chain.
<a class="reference internal" href="../../api-v3/extensions/transport_sockets/tls/v3/common.proto.html#envoy-v3-api-field-extensions-transport-sockets-tls-v3-certificatevalidationcontext-trusted-ca"><span class="std std-ref">trust_ca</span></a>.
This change can be reverted via the runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.enable_intermediate_ca</span></code>.</p></li>
<li><p><strong>upstream</strong>: detailed health status is used for override host selection. This behavior can be reverted by setting runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.validate_detailed_override_host_statuses</span></code> to false.</p></li>
</ul>
</section>
<section id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this heading"></a></h2>
<p><em>Changes expected to improve the state of the world and are unlikely to have negative effects</em></p>
<ul class="simple">
<li><p><strong>aws_lambda</strong>: fix a bug when <a class="reference internal" href="../../api-v3/extensions/filters/http/aws_lambda/v3/aws_lambda.proto.html#envoy-v3-api-msg-extensions-filters-http-aws-lambda-v3-perrouteconfig"><span class="std std-ref">PerRouteConfig</span></a> is defined and was routing to a target cluster’s AWS Lambda endpoint
in a region that is different from the region obtained in <a class="reference internal" href="../../api-v3/extensions/filters/http/aws_lambda/v3/aws_lambda.proto.html#envoy-v3-api-field-extensions-filters-http-aws-lambda-v3-config-arn"><span class="std std-ref">arn</span></a> of <code class="docutils literal notranslate"><span class="pre">aws_lambda</span></code> <code class="docutils literal notranslate"><span class="pre">http_filter</span></code> configuration
then the authorization header included in the request towards AWS Lambda was not signed with the region specified in <code class="docutils literal notranslate"><span class="pre">PerRouteConfig</span></code>.</p></li>
<li><p><strong>generic_proxy</strong>: fixed a bug that encoder filters and decoder filters of generic proxy will be executed in the same order. The encoder filters’ execuate order should be the reverse of decoder filters’ in the generic proxy.</p></li>
<li><p><strong>grpc_http_bridge</strong>: fixed a bug where response data could be lost for requests that were upgraded from Protobuf.</p></li>
<li><p><strong>grpc_json_transcoder</strong>: fix a bug when using http2, request body has <code class="docutils literal notranslate"><span class="pre">google.api.HttpBody</span></code> and the size is &lt; 16KB, it will cause EOF from the backend grpc server.</p></li>
<li><p><strong>health_checker</strong>: prevent writing pending data for health checkers by introducing <code class="docutils literal notranslate"><span class="pre">ConnectionCloseType::Abort</span></code> to avoid cascading handshake overhead from health checker’s requests on timeout. This fix is related to <a class="reference external" href="https://github.com/envoyproxy/envoy/issues/23718">issue #23718</a>.</p></li>
<li><p><strong>http</strong>: fixed a bug where <code class="docutils literal notranslate"><span class="pre">Utility::PercentEncoding::encode()</span></code> encodes some characters incorrectly because it was treating the value as negative.</p></li>
<li><p><strong>jwt_authn</strong>: fix a bug that <code class="docutils literal notranslate"><span class="pre">jwt_cache</span></code> breaks the <a class="reference internal" href="../../api-v3/extensions/filters/http/jwt_authn/v3/config.proto.html#envoy-v3-api-field-extensions-filters-http-jwt-authn-v3-jwtrequirement-provider-and-audiences"><span class="std std-ref">provider_and_audiences</span></a> JWT requirement.</p></li>
<li><p><strong>oauth2</strong>: fixed a bug when passthrough header was matched, envoy would always remove the authorization header. This behavioral change can be temporarily reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.oauth_header_passthrough_fix</span></code> to false.</p></li>
<li><p><strong>quic</strong>: reject configs that specify require_client_certificate with QUIC since clients certificates are currently unsupported in QUIC. This behavioral change can be temporarily reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.reject_require_client_certificate_with_quic</span></code> to false.</p></li>
<li><p><strong>router</strong>: fixed a bug that incorrectly rewrote the path when using <code class="docutils literal notranslate"><span class="pre">regex_rewrite</span></code> for redirects matched on prefix.</p></li>
<li><p><strong>router</strong>: fixed a bug that truncated query parameters from paths rewritten with a <code class="docutils literal notranslate"><span class="pre">path_rewrite_policy</span></code>, query parameters are now appended. <code class="docutils literal notranslate"><span class="pre">envoy_reloadable_features_append_query_parameters_path_rewriter</span></code> can be used to revert to truncation.</p></li>
<li><p><strong>skywalking</strong>: fixed a crash that could happen when skywalking tracer is enabled and illegal <code class="docutils literal notranslate"><span class="pre">sw8</span></code> header is received.</p></li>
<li><p><strong>tcp_proxy</strong>: When tunneling TCP over HTTP, mark the upstream connection as done reading when upstream trailers are read. This behavioral change can be temporarily reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.finish_reading_on_decode_trailers</span></code> to false.</p></li>
<li><p><strong>upstream</strong>: fixed a bug for tcp upstream where we did not count the header and data to/from the upstream.</p></li>
<li><p><strong>upstream</strong>: fixed a bug that only coarse health status is used for override host selection.</p></li>
<li><p><strong>upstream</strong>: fixed a bug when specify both a single address in bootstrap and cluster upstream binding config but with a different IP version. It should be allowed but it is rejected.</p></li>
<li><p><strong>validation</strong>: fixed a crash that could happen when optional <code class="docutils literal notranslate"><span class="pre">engine_type</span></code> is not provided in regex.</p></li>
</ul>
</section>
<section id="removed-config-or-runtime">
<h2>Removed config or runtime<a class="headerlink" href="#removed-config-or-runtime" title="Permalink to this heading"></a></h2>
<p><em>Normally occurs at the end of the</em> <a class="reference internal" href="../version_history.html#deprecated"><span class="std std-ref">deprecation period</span></a></p>
<ul class="simple">
<li><p><strong>ecds</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.top_level_ecds_stats</span></code> and legacy code paths.</p></li>
<li><p><strong>eds</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.support_locality_update_on_eds_cluster_endpoints</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.allow_adding_content_type_in_local_replies</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.allow_upstream_inline_write</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.append_or_truncate</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.deprecate_global_ints</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http_100_continue_case_insensitive</span></code> and legacy code paths.
removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.override_request_timeout_by_gateway_timeout</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.skip_delay_close</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.use_new_codec_wrapper</span></code> and legacy code paths.
removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.append_to_accept_content_encoding_only_once</span></code> and legacy code paths.
removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http1_lazy_read_disable</span></code> and legacy code paths.</p></li>
<li><p><strong>listener</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.strict_check_on_ipv4_compat</span></code> and legacy code paths.</p></li>
<li><p><strong>router</strong>: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.do_not_await_headers_on_upstream_timeout_to_emit_stats</span></code> and legacy code paths.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New features<a class="headerlink" href="#new-features" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>access_log</strong>: added a new field <a class="reference internal" href="../../api-v3/data/accesslog/v3/accesslog.proto.html#envoy-v3-api-field-data-accesslog-v3-accesslogcommon-intermediate-log-entry"><span class="std std-ref">intermediate_log_entry</span></a> to detect if the gRPC log entry is an intermediate log entry or not and added
support to flush TCP log entries periodly according to the configured <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-access-log-flush-interval"><span class="std std-ref">inteval</span></a>.</p></li>
<li><p><strong>access_log</strong>: added support for <a class="reference internal" href="../../configuration/observability/access_log/usage.html#config-access-log-format-stream-id"><span class="std std-ref">%STREAM_ID%</span></a> for stream unique identifier.</p></li>
<li><p><strong>attributes</strong>: added <a class="reference internal" href="../../intro/arch_overview/advanced/attributes.html#arch-overview-attributes"><span class="std std-ref">attributes</span></a> for looking up xDS configuration information.</p></li>
<li><p><strong>aws</strong>: added support to prefer fetching AWS instance role credentials securely
(<a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/configuring-instance-metadata-service.html">IMDSv2</a>)
from EC2 instance metadata by getting the token first or falling back to insecure way (IMDSv1) if token fetch fails.</p></li>
<li><p><strong>bandwidth_limit</strong>: added two new response trailers <code class="docutils literal notranslate"><span class="pre">bandwidth-request-filter-delay-ms</span></code> and <code class="docutils literal notranslate"><span class="pre">bandwidth-response-filter-delay-ms</span></code> to measure the delays added by this filter.</p></li>
<li><p><strong>build</strong>: added an option <code class="docutils literal notranslate"><span class="pre">--define=library_autolink=disabled</span></code> to disable autolinking libraries.</p></li>
<li><p><strong>build</strong>: added compile-time option <code class="docutils literal notranslate"><span class="pre">--define=static_extension_registration=disabled</span></code> to disable the automatic static registration of extension factories.</p></li>
<li><p><strong>compression</strong>: added <a class="reference internal" href="../../api-v3/extensions/filters/http/compressor/v3/compressor.proto.html#envoy-v3-api-msg-extensions-filters-http-compressor-v3-compressorperroute"><span class="std std-ref">CompressorPerRoute proto</span></a> for per-route configuration.</p></li>
<li><p><strong>custom response http filter</strong>: added <a class="reference internal" href="../../configuration/http/http_filters/custom_response_filter.html#config-http-filters-custom-response"><span class="std std-ref">custom response http filter</span></a> which adds the ability to customize responses sent to downstreams using local or remote sources.</p></li>
<li><p><strong>ext_authz</strong>: added support to allowlist headers included in the check request to gRPC authorization server (previously only available for HTTP authorization server).
Pre-existing field <a class="reference internal" href="../../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationrequest-allowed-headers"><span class="std std-ref">allowed_headers</span></a> is deprecated in favour
of the new field <a class="reference internal" href="../../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-allowed-headers"><span class="std std-ref">allowed_headers</span></a>.</p></li>
<li><p><strong>gcp_authn</strong>: added support for configuring header that holds token fetched from GCE metadata server in new field <a class="reference internal" href="../../api-v3/extensions/filters/http/gcp_authn/v3/gcp_authn.proto.html#envoy-v3-api-field-extensions-filters-http-gcp-authn-v3-gcpauthnfilterconfig-token-header"><span class="std std-ref">token_header</span></a>.</p></li>
<li><p><strong>generic_proxy</strong>: added <a class="reference internal" href="../../api-v3/extensions/filters/network/generic_proxy/codecs/dubbo/v3/dubbo.proto.html#envoy-v3-api-msg-extensions-filters-network-generic-proxy-codecs-dubbo-v3-dubbocodecconfig"><span class="std std-ref">dubbo codec support</span></a> to the
<a class="reference internal" href="../../api-v3/extensions/filters/network/generic_proxy/v3/generic_proxy.proto.html#envoy-v3-api-msg-extensions-filters-network-generic-proxy-v3-genericproxy"><span class="std std-ref">generic_proxy filter</span></a>.</p></li>
<li><p><strong>generic_proxy</strong>: added <a class="reference internal" href="../../api-v3/extensions/filters/network/generic_proxy/v3/generic_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-generic-proxy-v3-genericproxy-generic-rds"><span class="std std-ref">generic rds support</span></a>.</p></li>
<li><p><strong>generic_proxy</strong>: added drain support to generic proxy to doing graceful closes on connections when possible.</p></li>
<li><p><strong>golang</strong>: added new <a class="reference internal" href="../../configuration/http/http_filters/golang_filter.html#config-http-filters-golang"><span class="std std-ref">HTTP golang extension filter</span></a>.</p></li>
<li><p><strong>grpc_json_transcoder</strong>: added <code class="docutils literal notranslate"><span class="pre">max_request_body_size</span></code> and <code class="docutils literal notranslate"><span class="pre">max_response_body_size</span></code> fields, which can either increase or decrease
the size of messages that can be processed. It can increase (but does not decrease) the stream buffer size,
and can reject messages even if they’re smaller than the stream buffer size if configured smaller.</p></li>
<li><p><strong>health_check</strong>: added an optional bool flag <a class="reference internal" href="../../api-v3/config/endpoint/v3/endpoint_components.proto.html#envoy-v3-api-field-config-endpoint-v3-endpoint-healthcheckconfig-disable-active-health-check"><span class="std std-ref">disable_active_health_check</span></a> to disable the active health check for the endpoint.</p></li>
<li><p><strong>http</strong>: added <a class="reference internal" href="../../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-append-x-forwarded-port"><span class="std std-ref">append_x_forwarded_port</span></a> to append the <code class="docutils literal notranslate"><span class="pre">x-forwarded-port</span></code> header to HTTP upstream requests.</p></li>
<li><p><strong>http</strong>: added support of <a class="reference internal" href="../../api-v3/extensions/http/early_header_mutation/header_mutation/v3/header_mutation.proto.html#envoy-v3-api-msg-extensions-http-early-header-mutation-header-mutation-v3-headermutation"><span class="std std-ref">header mutation</span></a> to the HTTP connection manager via <a class="reference internal" href="../../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-early-header-mutation-extensions"><span class="std std-ref">early header mutation</span></a> field.</p></li>
<li><p><strong>http</strong>: enhanced dynamic forward proxy cluster to <a class="reference internal" href="../../api-v3/extensions/clusters/dynamic_forward_proxy/v3/cluster.proto.html#envoy-v3-api-field-extensions-clusters-dynamic-forward-proxy-v3-clusterconfig-allow-coalesced-connections"><span class="std std-ref">allow_coalesced_connections</span></a> for HTTP/2 and HTTP/3 connections.</p></li>
<li><p><strong>jwt_authn</strong>: added support for copying jwt claims to http headers.</p></li>
<li><p><strong>listener</strong>: added <code class="docutils literal notranslate"><span class="pre">continueFilterChain()</span></code> and <code class="docutils literal notranslate"><span class="pre">dispatcher()</span></code> methods to the <code class="docutils literal notranslate"><span class="pre">ListenerFilterCallback</span></code>. This allows listener filters to continue listener filter iteration after stopping iteration e.g. if the listener filter depends on an async process.</p></li>
<li><p><strong>listener</strong>: added a new field <a class="reference internal" href="../../api-v3/config/listener/v3/listener.proto.html#envoy-v3-api-field-config-listener-v3-additionaladdress-socket-options"><span class="std std-ref">socket_options</span></a> to the <code class="docutils literal notranslate"><span class="pre">AdditionalAddress</span></code>, allowing specifying discrete socket options for each listener address.</p></li>
<li><p><strong>matching</strong>: support filter chain selection based on the dynamic metadata and the filter state using <a class="reference internal" href="../../intro/arch_overview/advanced/matching/matching_api.html#extension-envoy-matching-actions-format-string"><span class="std std-ref">formatter actions</span></a>.</p></li>
<li><p><strong>mobile</strong>: merged the Envoy mobile library into the main Envoy repo.</p></li>
<li><p><strong>postgres</strong>: added support for upstream SSL.</p></li>
<li><p><strong>redis</strong>: extended <a class="reference internal" href="../../intro/arch_overview/other_protocols/redis.html#arch-overview-redis-cluster-support"><span class="std std-ref">cluster support</span></a> by adding a <a class="reference internal" href="../../api-v3/extensions/filters/network/redis_proxy/v3/redis_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-redis-proxy-v3-redisproxy-connpoolsettings-dns-cache-config"><span class="std std-ref">dns_cache_config</span></a> option that can be used to resolve hostnames returned by <code class="docutils literal notranslate"><span class="pre">MOVED</span></code>/<code class="docutils literal notranslate"><span class="pre">ASK</span></code> responses.</p></li>
<li><p><strong>router</strong>: added <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-msg-config-route-v3-routelist"><span class="std std-ref">RouteList</span></a> to support route list in <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-virtualhost-matcher"><span class="std std-ref">VirtualHost.matcher</span></a>.</p></li>
<li><p><strong>router</strong>: added a <a class="reference internal" href="../../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-is-timeout-retry"><span class="std std-ref">x-envoy-is-timeout-retry</span></a> request header on retries initiated by request timeouts; enabled by setting <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-virtualhost-include-is-timeout-retry-header"><span class="std std-ref">include_is_timeout_retry_header</span></a> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><strong>stats</strong>: added <code class="docutils literal notranslate"><span class="pre">includeHistogram()</span></code> method to <code class="docutils literal notranslate"><span class="pre">Stats::SinkPredicates</span></code> to filter histograms to be flushed to stat sinks. Use <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.enable_include_histograms</span></code> to enable this feature, which is disabled by default.</p></li>
<li><p><strong>tcp</strong>: added <a class="reference internal" href="../../api-v3/extensions/upstreams/tcp/v3/tcp_protocol_options.proto.html#envoy-v3-api-field-extensions-upstreams-tcp-v3-tcpprotocoloptions-idle-timeout"><span class="std std-ref">idle_timeout</span></a> to support per client idle timeout for tcp connection pool. See also <a class="reference external" href="#minor-behavior-changes">minor behaviour changes</a>.</p></li>
<li><p><strong>tcp_proxy</strong>: added new config <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-tunnelingconfig-post-path"><span class="std std-ref">post_path field</span></a> to specifiy a custom path for HTTP tunneling with POST method.</p></li>
<li><p><strong>thrift</strong>: added payload to metadata filter which matches a given payload field’s value would be extracted and attached to the request as dynamic metadata.</p></li>
<li><p><strong>thrift_proxy</strong>: added <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.thrift_allow_negative_field_ids</span></code> to support negative field ids for legacy thrift service.</p></li>
<li><p><strong>tls</strong>: added support for SNI-based cert selection in tls downstream transport socket. Detailed documentation is available <a class="reference internal" href="../../intro/arch_overview/security/ssl.html#arch-overview-ssl-cert-select"><span class="std std-ref">cert selection</span></a>.
New config option <a class="reference internal" href="../../api-v3/extensions/transport_sockets/tls/v3/tls.proto.html#envoy-v3-api-field-extensions-transport-sockets-tls-v3-downstreamtlscontext-full-scan-certs-on-sni-mismatch"><span class="std std-ref">full_scan_certs_on_sni_mismatch</span></a>
is introduced to disable or enable full scan when no cert matches to SNI, defaults to false.
New runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.no_full_scan_certs_on_sni_mismatch</span></code> can be used for override the default value.</p></li>
<li><p><strong>tracing</strong>: added support for setting the hostname used when sending spans to a Datadog collector using the <a class="reference internal" href="../../api-v3/config/trace/v3/datadog.proto.html#envoy-v3-api-field-config-trace-v3-datadogconfig-collector-hostname"><span class="std std-ref">collector_hostname</span></a> field.</p></li>
<li><p><strong>udp_proxy</strong>: added support for <a class="reference internal" href="../../api-v3/extensions/filters/udp/udp_proxy/v3/udp_proxy.proto.html#envoy-v3-api-field-extensions-filters-udp-udp-proxy-v3-udpproxyconfig-proxy-access-log"><span class="std std-ref">proxy_access_log</span></a>.</p></li>
<li><p><strong>upstream</strong>: added <a class="reference internal" href="../../api-v3/extensions/load_balancing_policies/least_request/v3/least_request.proto.html#envoy-v3-api-msg-extensions-load-balancing-policies-least-request-v3-leastrequest"><span class="std std-ref">least request extension</span></a> to suppport the <a class="reference internal" href="../../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-load-balancing-policy"><span class="std std-ref">load balancer policy</span></a>.</p></li>
<li><p><strong>upstream</strong>: added <a class="reference internal" href="../../api-v3/extensions/load_balancing_policies/random/v3/random.proto.html#envoy-v3-api-msg-extensions-load-balancing-policies-random-v3-random"><span class="std std-ref">random extension</span></a> to suppport the <a class="reference internal" href="../../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-load-balancing-policy"><span class="std std-ref">load balancer policy</span></a>.</p></li>
<li><p><strong>upstream</strong>: added <a class="reference internal" href="../../api-v3/extensions/load_balancing_policies/round_robin/v3/round_robin.proto.html#envoy-v3-api-msg-extensions-load-balancing-policies-round-robin-v3-roundrobin"><span class="std std-ref">round robin extension</span></a> to suppport the <a class="reference internal" href="../../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-load-balancing-policy"><span class="std std-ref">load balancer policy</span></a>.</p></li>
<li><p><strong>upstream</strong>: added a new field <a class="reference internal" href="../../api-v3/config/core/v3/address.proto.html#envoy-v3-api-field-config-core-v3-extrasourceaddress-socket-options"><span class="std std-ref">socket_options</span></a> to the <code class="docutils literal notranslate"><span class="pre">ExtraSourceAddress</span></code>, allowing specifying discrete socket options for each source address.</p></li>
<li><p><strong>upstream</strong>: allow configuring <a class="reference internal" href="../../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-upstream-bind-config"><span class="std std-ref">cluster bind config</span></a> and
<a class="reference internal" href="../../api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-clustermanager-upstream-bind-config"><span class="std std-ref">cluster manager bind config</span></a> without specifying a
<a class="reference internal" href="../../api-v3/config/core/v3/address.proto.html#envoy-v3-api-field-config-core-v3-bindconfig-source-address"><span class="std std-ref">source_address</span></a>. This allows setting
<a class="reference internal" href="../../api-v3/config/core/v3/address.proto.html#envoy-v3-api-field-config-core-v3-bindconfig-socket-options"><span class="std std-ref">socket options</span></a> when using the default unspecified bind address
is desired.</p></li>
<li><p><strong>xds</strong>: added an api configuration <a class="reference internal" href="../../api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-bootstrap-xds-config-tracker-extension"><span class="std std-ref">xds_config_tracker_extension</span></a> in the bootstrap
to allow tracking xDS responses in external components, and provided the extension interface.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="v1.25.1.html" class="btn btn-neutral float-left" title="1.25.1 (February 7, 2023)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../v1.24/v1.24.html" class="btn btn-neutral float-right" title="v1.24" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>