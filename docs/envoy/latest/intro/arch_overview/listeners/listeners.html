

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Listeners &mdash; envoy 1.18.0-dev-ba9a3a documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Listener filters" href="listener_filters.html" />
    <link rel="prev" title="Listeners" href="listeners_toc.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.18.0-dev-ba9a3a
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../intro.html">Introduction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../what_is_envoy.html">What is Envoy</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../arch_overview.html">Architecture overview</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../intro/intro.html">Introduction</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="listeners_toc.html">Listeners</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Listeners</a></li>
<li class="toctree-l4"><a class="reference internal" href="listener_filters.html">Listener filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="network_filter_chain.html">Network Filter Chain</a></li>
<li class="toctree-l4"><a class="reference internal" href="network_filters.html">Network (L3/L4) filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="tcp_proxy.html">TCP proxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="udp_proxy.html">UDP proxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="dns_filter.html">DNS Filter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../http/http.html">HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upstream/upstream.html">Upstream clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../observability/observability.html">Observability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/security.html">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operations/operations.html">Operations &amp; configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../other_features/other_features.html">Other features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../other_protocols/other_protocols.html">Other protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced/advanced.html">Advanced</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../life_of_a_request.html">Life of a Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../deployment_types/deployment_types.html">Deployment types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_help.html">Getting help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../version_history/version_history.html">Version history</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../intro.html">Introduction</a> &raquo;</li>
        
          <li><a href="../arch_overview.html">Architecture overview</a> &raquo;</li>
        
          <li><a href="listeners_toc.html">Listeners</a> &raquo;</li>
        
      <li>Listeners</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/intro/arch_overview/listeners/listeners.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="listeners">
<span id="arch-overview-listeners"></span><h1>Listeners<a class="headerlink" href="#listeners" title="Permalink to this headline">¶</a></h1>
<p>The Envoy configuration supports any number of listeners within a single process. Generally we
recommend running a single Envoy per machine regardless of the number of configured listeners. This
allows for easier operation and a single source of statistics. Envoy supports both TCP and UDP
listeners.</p>
<div class="section" id="tcp">
<h2>TCP<a class="headerlink" href="#tcp" title="Permalink to this headline">¶</a></h2>
<p>Each listener is independently configured with some number <a class="reference internal" href="../../../api-v3/config/listener/v3/listener_components.proto.html#envoy-v3-api-msg-config-listener-v3-filterchain"><span class="std std-ref">filter chains</span></a>, where an individual chain is selected based on its
<a class="reference internal" href="../../../api-v3/config/listener/v3/listener_components.proto.html#envoy-v3-api-msg-config-listener-v3-filterchainmatch"><span class="std std-ref">match criteria</span></a>. An individual filter chain is
composed of one or more network level (L3/L4) <a class="reference internal" href="network_filters.html#arch-overview-network-filters"><span class="std std-ref">filters</span></a>. When
a new connection is received on a listener, the appropriate filter chain is selected, and the
configured connection local filter stack is instantiated and begins processing subsequent events.
The generic listener architecture is used to perform the vast majority of different proxy tasks that
Envoy is used for (e.g., <a class="reference internal" href="../other_features/global_rate_limiting.html#arch-overview-global-rate-limit"><span class="std std-ref">rate limiting</span></a>, <a class="reference internal" href="../security/ssl.html#arch-overview-ssl-auth-filter"><span class="std std-ref">TLS client
authentication</span></a>, <a class="reference internal" href="../http/http_connection_management.html#arch-overview-http-conn-man"><span class="std std-ref">HTTP connection management</span></a>, MongoDB <a class="reference internal" href="../other_protocols/mongo.html#arch-overview-mongo"><span class="std std-ref">sniffing</span></a>, raw <a class="reference internal" href="tcp_proxy.html#arch-overview-tcp-proxy"><span class="std std-ref">TCP proxy</span></a>, etc.).</p>
<p>Listeners are optionally also configured with some number of <a class="reference internal" href="listener_filters.html#arch-overview-listener-filters"><span class="std std-ref">listener filters</span></a>. These filters are processed before the network level filters,
and have the opportunity to manipulate the connection metadata, usually to influence how the
connection is processed by later filters or clusters.</p>
<p>Listeners can also be fetched dynamically via the <a class="reference internal" href="../../../configuration/listeners/lds.html#config-listeners-lds"><span class="std std-ref">listener discovery service (LDS)</span></a>.</p>
<p>Listener <a class="reference internal" href="../../../configuration/listeners/listeners.html#config-listeners"><span class="std std-ref">configuration</span></a>.</p>
</div>
<div class="section" id="udp">
<span id="arch-overview-listeners-udp"></span><h2>UDP<a class="headerlink" href="#udp" title="Permalink to this headline">¶</a></h2>
<p>Envoy also supports UDP listeners and specifically <a class="reference internal" href="../../../configuration/listeners/udp_filters/udp_filters.html#config-udp-listener-filters"><span class="std std-ref">UDP listener filters</span></a>. UDP listener filters are instantiated once per worker and are global
to that worker. Each listener filter processes each UDP datagram that is received by the worker
listening on the port. In practice, UDP listeners are configured with the SO_REUSEPORT kernel option
which will cause the kernel to consistently hash each UDP 4-tuple to the same worker. This allows a
UDP listener filter to be “session” oriented if it so desires. A built-in example of this
functionality is the <a class="reference internal" href="../../../configuration/listeners/udp_filters/udp_proxy.html#config-udp-listener-filters-udp-proxy"><span class="std std-ref">UDP proxy</span></a> listener filter.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="listener_filters.html" class="btn btn-neutral float-right" title="Listener filters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="listeners_toc.html" class="btn btn-neutral float-left" title="Listeners" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016-2021, Envoy Project Authors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>