

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>gRPC &mdash; envoy 1.18.0-dev-cfbb1a documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="MongoDB" href="mongo.html" />
    <link rel="prev" title="Other protocols" href="other_protocols.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.18.0-dev-cfbb1a
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../intro.html">Introduction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../what_is_envoy.html">What is Envoy</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../arch_overview.html">Architecture overview</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../intro/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../listeners/listeners_toc.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http.html">HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upstream/upstream.html">Upstream clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../observability/observability.html">Observability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/security.html">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operations/operations.html">Operations &amp; configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../other_features/other_features.html">Other features</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="other_protocols.html">Other protocols</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">gRPC</a></li>
<li class="toctree-l4"><a class="reference internal" href="mongo.html">MongoDB</a></li>
<li class="toctree-l4"><a class="reference internal" href="dynamo.html">DynamoDB</a></li>
<li class="toctree-l4"><a class="reference internal" href="redis.html">Redis</a></li>
<li class="toctree-l4"><a class="reference internal" href="postgres.html">Postgres</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced/advanced.html">Advanced</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../life_of_a_request.html">Life of a Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../deployment_types/deployment_types.html">Deployment types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_help.html">Getting help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../version_history/version_history.html">Version history</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../intro.html">Introduction</a> &raquo;</li>
        
          <li><a href="../arch_overview.html">Architecture overview</a> &raquo;</li>
        
          <li><a href="other_protocols.html">Other protocols</a> &raquo;</li>
        
      <li>gRPC</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/intro/arch_overview/other_protocols/grpc.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="grpc">
<span id="arch-overview-grpc"></span><h1>gRPC<a class="headerlink" href="#grpc" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://www.grpc.io/">gRPC</a> is an RPC framework from Google. It uses protocol buffers as the
underlying serialization/IDL format. At the transport layer it uses HTTP/2 for request/response
multiplexing. Envoy has first class support for gRPC both at the transport layer as well as at the
application layer:</p>
<ul class="simple">
<li><p>gRPC makes use of HTTP/2 trailers to convey request status. Envoy is one of very few HTTP proxies
that correctly supports HTTP/2 trailers and is thus one of the few proxies that can transport
gRPC requests and responses.</p></li>
<li><p>The gRPC runtime for some languages is relatively immature. See <a class="reference internal" href="#arch-overview-grpc-bridging"><span class="std std-ref">below</span></a>
for an overview of filters that can help bring gRPC to more languages.</p></li>
<li><p>gRPC-Web is supported by a <a class="reference internal" href="../../../configuration/http/http_filters/grpc_web_filter.html#config-http-filters-grpc-web"><span class="std std-ref">filter</span></a> that allows a gRPC-Web
client to send requests to Envoy over HTTP/1.1 and get proxied to a gRPC server. It’s under
active development and is expected to be the successor to the gRPC <a class="reference internal" href="../../../configuration/http/http_filters/grpc_http1_bridge_filter.html#config-http-filters-grpc-bridge"><span class="std std-ref">bridge filter</span></a>.</p></li>
<li><p>gRPC-JSON transcoder is supported by a <a class="reference internal" href="../../../configuration/http/http_filters/grpc_json_transcoder_filter.html#config-http-filters-grpc-json-transcoder"><span class="std std-ref">filter</span></a>
that allows a RESTful JSON API client to send requests to Envoy over HTTP and get proxied to a
gRPC service.</p></li>
</ul>
<div class="section" id="grpc-bridging">
<span id="arch-overview-grpc-bridging"></span><h2>gRPC bridging<a class="headerlink" href="#grpc-bridging" title="Permalink to this headline">¶</a></h2>
<p>Envoy supports two gRPC bridges:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../configuration/http/http_filters/grpc_http1_bridge_filter.html#config-http-filters-grpc-bridge"><span class="std std-ref">grpc_http1_bridge filter</span></a> which allows gRPC requests to be sent to Envoy over
HTTP/1.1. Envoy then translates the requests to HTTP/2 for transport to the target server. The response is translated back to HTTP/1.1.
When installed, the bridge filter gathers per RPC statistics in addition to the standard array of global HTTP statistics.</p></li>
<li><p><a class="reference internal" href="../../../configuration/http/http_filters/grpc_http1_reverse_bridge_filter.html#config-http-filters-grpc-http1-reverse-bridge"><span class="std std-ref">grpc_http1_reverse_bridge filter</span></a> which allows gRPC requests to be sent to Envoy
and then translated to HTTP/1.1 when sent to the upstream. The response is then converted back into gRPC when sent to the downstream.
This filter can also optionally manage the gRPC frame header, allowing the upstream to not have to be gRPC aware at all.</p></li>
</ul>
</div>
<div class="section" id="grpc-services">
<span id="arch-overview-grpc-services"></span><h2>gRPC services<a class="headerlink" href="#grpc-services" title="Permalink to this headline">¶</a></h2>
<p>In addition to proxying gRPC on the data plane, Envoy makes use of gRPC for its
control plane, where it <a class="reference internal" href="../../../configuration/overview/overview.html#config-overview"><span class="std std-ref">fetches configuration from management server(s)</span></a> and in filters, such as for <a class="reference internal" href="../../../configuration/http/http_filters/rate_limit_filter.html#config-http-filters-rate-limit"><span class="std std-ref">rate limiting</span></a> or authorization checks. We refer to these as
<em>gRPC services</em>.</p>
<p>When specifying gRPC services, it’s necessary to specify the use of either the
<a class="reference internal" href="../../../api-v3/config/core/v3/grpc_service.proto.html#envoy-v3-api-field-config-core-v3-grpcservice-envoy-grpc"><span class="std std-ref">Envoy gRPC client</span></a> or the
<a class="reference internal" href="../../../api-v3/config/core/v3/grpc_service.proto.html#envoy-v3-api-field-config-core-v3-grpcservice-google-grpc"><span class="std std-ref">Google C++ gRPC client</span></a>. We
discuss the tradeoffs in this choice below.</p>
<p>The Envoy gRPC client is a minimal custom implementation of gRPC that makes use
of Envoy’s HTTP/2 upstream connection management. Services are specified as
regular Envoy <a class="reference internal" href="../upstream/cluster_manager.html#arch-overview-cluster-manager"><span class="std std-ref">clusters</span></a>, with regular
treatment of <a class="reference internal" href="../http/http_connection_management.html#arch-overview-http-conn-man"><span class="std std-ref">timeouts, retries</span></a>, endpoint
<a class="reference internal" href="../operations/dynamic_configuration.html#arch-overview-dynamic-config-eds"><span class="std std-ref">discovery</span></a>/<a class="reference internal" href="../upstream/load_balancing/overview.html#arch-overview-load-balancing"><span class="std std-ref">load
balancing/failover</span></a>/load reporting, <a class="reference internal" href="../upstream/circuit_breaking.html#arch-overview-circuit-break"><span class="std std-ref">circuit
breaking</span></a>, <a class="reference internal" href="../upstream/health_checking.html#arch-overview-health-checking"><span class="std std-ref">health checks</span></a>, <a class="reference internal" href="../upstream/outlier.html#arch-overview-outlier-detection"><span class="std std-ref">outlier detection</span></a>. They share the same <a class="reference internal" href="../upstream/connection_pooling.html#arch-overview-conn-pool"><span class="std std-ref">connection pooling</span></a> mechanism as the Envoy data plane. Similarly, cluster
<a class="reference internal" href="../observability/statistics.html#arch-overview-statistics"><span class="std std-ref">statistics</span></a> are available for gRPC services.
Since the client is minimal, it does not include advanced gRPC features such as
<a class="reference external" href="https://oauth.net/2/">OAuth2</a> or <a class="reference external" href="https://grpc.io/blog/loadbalancing">gRPC-LB</a> lookaside.</p>
<p>The Google C++ gRPC client is based on the reference implementation of gRPC
provided by Google at <a class="reference external" href="https://github.com/grpc/grpc">https://github.com/grpc/grpc</a>. It provides advanced gRPC
features that are missing in the Envoy gRPC client. The Google C++ gRPC client
performs its own load balancing, retries, timeouts, endpoint management, etc,
independent of Envoy’s cluster management. The Google C++ gRPC client also
supports <a class="reference external" href="https://grpc.io/docs/guides/auth.html#extending-grpc-to-support-other-authentication-mechanisms">custom authentication plugins</a>.</p>
<p>It is recommended to use the Envoy gRPC client in most cases, where the advanced
features in the Google C++ gRPC client are not required. This provides
configuration and monitoring simplicity. Where necessary features are missing
in the Envoy gRPC client, the Google C++ gRPC client should be used instead.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="mongo.html" class="btn btn-neutral float-right" title="MongoDB" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="other_protocols.html" class="btn btn-neutral float-left" title="Other protocols" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016-2021, Envoy Project Authors.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>