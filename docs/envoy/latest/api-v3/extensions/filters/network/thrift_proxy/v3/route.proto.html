

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Thrift Proxy Route Configuration &mdash; envoy 1.15.0-dev-7f90cb documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <link rel="next" title="Thrift Proxy" href="thrift_proxy.proto.html" />
    <link rel="prev" title="TCP Proxy" href="../../tcp_proxy/v3/tcp_proxy.proto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../../index.html">
          

          
            
            <img src="../../../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.15.0-dev-7f90cb
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../version_history/version_history.html">Version history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api-v2/api.html">v2 API reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../../../config/config.html">Extensions</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../../../../../config/filter/filter.html">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/accesslog/accesslog.html">Access loggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/rbac/rbac.html">RBAC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/health_checker/health_checker.html">Health checkers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/transport_socket/transport_socket.html">Transport sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/resource_monitor/resource_monitor.html">Resource monitors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/common/common.html">Common</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/compression/compression.html">Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/cluster/cluster.html">Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/grpc_credential/grpc_credential.html">Grpc Credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/retry/retry.html">Retry Predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/trace/trace.html">HTTP Tracers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/internal_redirect/internal_redirect.html">Internal Redirect Predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/endpoint/endpoint.html">Endpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/upstream/upstream.html">Upstream Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../service/service.html">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../../../api/api.html">API</a> &raquo;</li>
        
          <li><a href="../../../../../api.html">v3 API reference</a> &raquo;</li>
        
          <li><a href="../../../../../config/config.html">Extensions</a> &raquo;</li>
        
          <li><a href="../../../../../config/filter/filter.html">Filters</a> &raquo;</li>
        
          <li><a href="../../../../../config/filter/network/network.html">Network filters</a> &raquo;</li>
        
      <li>Thrift Proxy Route Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../../_sources/api-v3/extensions/filters/network/thrift_proxy/v3/route.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="thrift-proxy-route-configuration">
<span id="envoy-v3-api-file-envoy-extensions-filters-network-thrift-proxy-v3-route-proto"></span><h1>Thrift Proxy Route Configuration<a class="headerlink" href="#thrift-proxy-route-configuration" title="Permalink to this headline">¶</a></h1>
<p>Thrift Proxy <a class="reference internal" href="../../../../../../configuration/listeners/network_filters/thrift_proxy_filter.html#config-network-filters-thrift-proxy"><span class="std std-ref">configuration overview</span></a>.</p>
<div class="section" id="extensions-filters-network-thrift-proxy-v3-routeconfiguration">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routeconfiguration"></span><h2>extensions.filters.network.thrift_proxy.v3.RouteConfiguration<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-routeconfiguration" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/7f90cbf717c9dce71ad096906fa249feeea338c9/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L21">[extensions.filters.network.thrift_proxy.v3.RouteConfiguration proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;routes&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeconfiguration-name">
<dt>name</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The name of the route configuration. Reserved for future use in asynchronous route discovery.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeconfiguration-routes">
<dt>routes</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-route"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.Route</span></a>) The list of routes that will be matched, in order, against incoming requests. The first route
that matches will be used.</p>
</dd>
</dl>
</div>
<div class="section" id="extensions-filters-network-thrift-proxy-v3-route">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-route"></span><h2>extensions.filters.network.thrift_proxy.v3.Route<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-route" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/7f90cbf717c9dce71ad096906fa249feeea338c9/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L33">[extensions.filters.network.thrift_proxy.v3.Route proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;route&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-route-match">
<dt>match</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routematch"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.RouteMatch</span></a>, <em>REQUIRED</em>) Route matching parameters.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-route-route">
<dt>route</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routeaction"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.RouteAction</span></a>, <em>REQUIRED</em>) Route request to some upstream cluster.</p>
</dd>
</dl>
</div>
<div class="section" id="extensions-filters-network-thrift-proxy-v3-routematch">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routematch"></span><h2>extensions.filters.network.thrift_proxy.v3.RouteMatch<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-routematch" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/7f90cbf717c9dce71ad096906fa249feeea338c9/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L44">[extensions.filters.network.thrift_proxy.v3.RouteMatch proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;method_name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;service_name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;invert&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;headers&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-method-name">
<dt>method_name</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) If specified, the route must exactly match the request method name. As a special case, an
empty string matches any request method name.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-method-name"><span class="std std-ref">method_name</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-service-name"><span class="std std-ref">service_name</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-service-name">
<dt>service_name</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) If specified, the route must have the service name as the request method name prefix. As a
special case, an empty string matches any service name. Only relevant when service
multiplexing.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-method-name"><span class="std std-ref">method_name</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-service-name"><span class="std std-ref">service_name</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-invert">
<dt>invert</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Inverts whatever matching is done in the <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-method-name"><span class="std std-ref">method_name</span></a> or
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-service-name"><span class="std std-ref">service_name</span></a> fields.
Cannot be combined with wildcard matching as that would result in routes never being matched.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This does not invert matching done as part of the <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-headers"><span class="std std-ref">headers field</span></a> field. To
invert header matching, see <a class="reference internal" href="../../../../../config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-headermatcher-invert-match"><span class="std std-ref">invert_match</span></a>.</p>
</div>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-headers">
<dt>headers</dt><dd><p>(<a class="reference internal" href="../../../../../config/route/v3/route_components.proto.html#envoy-v3-api-msg-config-route-v3-headermatcher"><span class="std std-ref">config.route.v3.HeaderMatcher</span></a>) Specifies a set of headers that the route should match on. The router will check the request’s
headers against all the specified headers in the route config. A match will happen if all the
headers in the route are present in the request with the same values (or based on presence if
the value field is not in the config). Note that this only applies for Thrift transports and/or
protocols that support headers.</p>
</dd>
</dl>
</div>
<div class="section" id="extensions-filters-network-thrift-proxy-v3-routeaction">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routeaction"></span><h2>extensions.filters.network.thrift_proxy.v3.RouteAction<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-routeaction" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/7f90cbf717c9dce71ad096906fa249feeea338c9/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L84">[extensions.filters.network.thrift_proxy.v3.RouteAction proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;cluster&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;weighted_clusters&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cluster_header&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metadata_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;rate_limits&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;strip_service_name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster">
<dt>cluster</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Indicates a single upstream cluster to which the request should be routed
to.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster"><span class="std std-ref">cluster</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster-header"><span class="std std-ref">cluster_header</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-weighted-clusters">
<dt>weighted_clusters</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-weightedcluster"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.WeightedCluster</span></a>) Multiple upstream clusters can be specified for a given route. The
request is routed to one of the upstream clusters based on weights
assigned to each cluster.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster"><span class="std std-ref">cluster</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster-header"><span class="std std-ref">cluster_header</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster-header">
<dt>cluster_header</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Envoy will determine the cluster to route to by reading the value of the
Thrift header named by cluster_header from the request headers. If the
header is not found or the referenced cluster does not exist Envoy will
respond with an unknown method exception or an internal error exception,
respectively.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster"><span class="std std-ref">cluster</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster-header"><span class="std std-ref">cluster_header</span></a> must be set.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-metadata-match">
<dt>metadata_match</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-metadata"><span class="std std-ref">config.core.v3.Metadata</span></a>) Optional endpoint metadata match criteria used by the subset load balancer. Only endpoints in
the upstream cluster with metadata matching what is set in this field will be considered.
Note that this will be merged with what’s provided in <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight-metadata-match"><span class="std std-ref">WeightedCluster.metadata_match</span></a>,
with values there taking precedence. Keys and values should be provided under the “envoy.lb”
metadata key.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-rate-limits">
<dt>rate_limits</dt><dd><p>(<a class="reference internal" href="../../../../../config/route/v3/route_components.proto.html#envoy-v3-api-msg-config-route-v3-ratelimit"><span class="std std-ref">config.route.v3.RateLimit</span></a>) Specifies a set of rate limit configurations that could be applied to the route.
N.B. Thrift service or method name matching can be achieved by specifying a RequestHeaders
action with the header name “:method-name”.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-strip-service-name">
<dt>strip_service_name</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Strip the service prefix from the method name, if there’s a prefix. For
example, the method call <a class="reference external" href="Service:method">Service:method</a> would end up being just method.</p>
</dd>
</dl>
</div>
<div class="section" id="extensions-filters-network-thrift-proxy-v3-weightedcluster">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-weightedcluster"></span><h2>extensions.filters.network.thrift_proxy.v3.WeightedCluster<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-weightedcluster" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/7f90cbf717c9dce71ad096906fa249feeea338c9/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L129">[extensions.filters.network.thrift_proxy.v3.WeightedCluster proto]</a></p>
<p>Allows for specification of multiple upstream clusters along with weights that indicate the
percentage of traffic to be forwarded to each cluster. The router selects an upstream cluster
based on these weights.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;clusters&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusters">
<dt>clusters</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.WeightedCluster.ClusterWeight</span></a>, <em>REQUIRED</em>) Specifies one or more upstream clusters associated with the route.</p>
</dd>
</dl>
</div>
<div class="section" id="extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight"></span><h2>extensions.filters.network.thrift_proxy.v3.WeightedCluster.ClusterWeight<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/7f90cbf717c9dce71ad096906fa249feeea338c9/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L133">[extensions.filters.network.thrift_proxy.v3.WeightedCluster.ClusterWeight proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;weight&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metadata_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight-name">
<dt>name</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) Name of the upstream cluster.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight-weight">
<dt>weight</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) When a request matches the route, the choice of an upstream cluster is determined by its
weight. The sum of weights across all entries in the clusters array determines the total
weight.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight-metadata-match">
<dt>metadata_match</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-metadata"><span class="std std-ref">config.core.v3.Metadata</span></a>) Optional endpoint metadata match criteria used by the subset load balancer. Only endpoints in
the upstream cluster with metadata matching what is set in this field, combined with what’s
provided in <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-metadata-match"><span class="std std-ref">RouteAction’s metadata_match</span></a>,
will be considered. Values here will take precedence. Keys and values should be provided
under the “envoy.lb” metadata key.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="thrift_proxy.proto.html" class="btn btn-neutral float-right" title="Thrift Proxy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../tcp_proxy/v3/tcp_proxy.proto.html" class="btn btn-neutral float-left" title="TCP Proxy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2020, Envoy Project Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>