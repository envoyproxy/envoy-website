

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>DNS Filter &mdash; envoy 1.20.0-dev-3bdf78 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/tabs.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../../_static/jquery.js"></script>
        <script src="../../../../../../_static/underscore.js"></script>
        <script src="../../../../../../_static/doctools.js"></script>
        <script src="../../../../../../_static/clipboard.min.js"></script>
        <script src="../../../../../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <link rel="next" title="HTTP filters" href="../../../../../config/filter/http/http.html" />
    <link rel="prev" title="UDP proxy" href="../../udp_proxy/v3/udp_proxy.proto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../../index.html">
          

          
            
            <img src="../../../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.20.0-dev-3bdf78
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../../../config/config.html">Extensions</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../../../../../config/filter/filter.html">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/accesslog/accesslog.html">Access loggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/rbac/rbac.html">RBAC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/health_checker/health_checker.html">Health checkers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/transport_socket/transport_socket.html">Transport sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/resource_monitor/resource_monitor.html">Resource monitors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/common/common.html">Common</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/compression/compression.html">Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/cluster/cluster.html">Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/grpc_credential/grpc_credential.html">Grpc Credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/retry/retry.html">Retry Predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/trace/trace.html">HTTP Tracers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/internal_redirect/internal_redirect.html">Internal Redirect Predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/endpoint/endpoint.html">Endpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/upstream/upstream.html">Upstream Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/wasm/wasm.html">WASM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/watchdog/watchdog.html">Watchdog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/descriptors/descriptors.html">Rate limit descriptors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/request_id/request_id.html">Request ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/header_formatters.html">HTTP header formatters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/original_ip_detection.html">Original IP Detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/stat_sinks/stat_sinks.html">Stat sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/quic/quic_extensions.html">Quic Extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/formatter/formatter.html">Access log formatters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../service/service.html">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../version_history/version_history.html">Version history</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../../../api/api.html">API</a> &raquo;</li>
        
          <li><a href="../../../../../api.html">v3 API reference</a> &raquo;</li>
        
          <li><a href="../../../../../config/config.html">Extensions</a> &raquo;</li>
        
          <li><a href="../../../../../config/filter/filter.html">Filters</a> &raquo;</li>
        
          <li><a href="../../../../../config/filter/udp/udp.html">UDP listener filters</a> &raquo;</li>
        
      <li>DNS Filter</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../../_sources/api-v3/extensions/filters/udp/dns_filter/v3alpha/dns_filter.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dns-filter">
<span id="envoy-v3-api-file-envoy-extensions-filters-udp-dns-filter-v3alpha-dns-filter-proto"></span><h1>DNS Filter<a class="headerlink" href="#dns-filter" title="Permalink to this headline">¶</a></h1>
<p id="extension-envoy-filters-udp-listener-dns-filter">This extension may be referenced by the qualified name <code class="docutils literal notranslate"><span class="pre">envoy.filters.udp_listener.dns_filter</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This extension is functional but has not had substantial production burn time, use only with this caveat.</p>
<p>This extension is intended to be robust against untrusted downstream traffic. It assumes that the upstream is trusted.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This extension extends and can be used with the following extension category:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../../../config/listener/v3/listener_components.proto.html#extension-category-envoy-filters-udp-listener"><span class="std std-ref">envoy.filters.udp_listener</span></a></p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This API is work-in-progress and is subject to breaking changes.</p>
</div>
<p>DNS Filter <a class="reference internal" href="../../../../../../configuration/listeners/udp_filters/dns_filter.html#config-udp-listener-filters-dns-filter"><span class="std std-ref">configuration overview</span></a>.</p>
<div class="section" id="extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig">
<span id="envoy-v3-api-msg-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig"></span><h2>extensions.filters.udp.dns_filter.v3alpha.DnsFilterConfig<a class="headerlink" href="#extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/3bdf7863c71bdeff2313522942a012b4a8339021/api/envoy/extensions/filters/udp/dns_filter/v3alpha/dns_filter.proto#L24">[extensions.filters.udp.dns_filter.v3alpha.DnsFilterConfig proto]</a></p>
<p>Configuration for the DNS filter.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;stat_prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;server_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;client_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-stat-prefix">
<dt>stat_prefix</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) The stat prefix used when emitting DNS filter statistics</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-server-config">
<dt>server_config</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-servercontextconfig"><span class="std std-ref">extensions.filters.udp.dns_filter.v3alpha.DnsFilterConfig.ServerContextConfig</span></a>) Server context configuration contains the data that the filter uses to respond
to DNS requests.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-client-config">
<dt>client_config</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-clientcontextconfig"><span class="std std-ref">extensions.filters.udp.dns_filter.v3alpha.DnsFilterConfig.ClientContextConfig</span></a>) Client context configuration controls Envoy’s behavior when it must use external
resolvers to answer a query. This object is optional and if omitted instructs
the filter to resolve queries from the data in the server_config</p>
</dd>
</dl>
</div>
<div class="section" id="extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-servercontextconfig">
<span id="envoy-v3-api-msg-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-servercontextconfig"></span><h2>extensions.filters.udp.dns_filter.v3alpha.DnsFilterConfig.ServerContextConfig<a class="headerlink" href="#extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-servercontextconfig" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/3bdf7863c71bdeff2313522942a012b4a8339021/api/envoy/extensions/filters/udp/dns_filter/v3alpha/dns_filter.proto#L28">[extensions.filters.udp.dns_filter.v3alpha.DnsFilterConfig.ServerContextConfig proto]</a></p>
<p>This message contains the configuration for the DNS Filter operating
in a server context. This message will contain the virtual hosts and
associated addresses with which Envoy will respond to queries</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;inline_dns_table&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;external_dns_table&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-servercontextconfig-inline-dns-table">
<dt>inline_dns_table</dt><dd><p>(<a class="reference internal" href="../../../../../data/dns/v3/dns_table.proto.html#envoy-v3-api-msg-data-dns-v3-dnstable"><span class="std std-ref">data.dns.v3.DnsTable</span></a>) Load the configuration specified from the control plane</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-servercontextconfig-inline-dns-table"><span class="std std-ref">inline_dns_table</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-servercontextconfig-external-dns-table"><span class="std std-ref">external_dns_table</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-servercontextconfig-external-dns-table">
<dt>external_dns_table</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-datasource"><span class="std std-ref">config.core.v3.DataSource</span></a>) Seed the filter configuration from an external path. This source
is a yaml formatted file that contains the DnsTable driving Envoy’s
responses to DNS queries</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-servercontextconfig-inline-dns-table"><span class="std std-ref">inline_dns_table</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-servercontextconfig-external-dns-table"><span class="std std-ref">external_dns_table</span></a> must be set.</p>
</dd>
</dl>
</div>
<div class="section" id="extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-clientcontextconfig">
<span id="envoy-v3-api-msg-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-clientcontextconfig"></span><h2>extensions.filters.udp.dns_filter.v3alpha.DnsFilterConfig.ClientContextConfig<a class="headerlink" href="#extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-clientcontextconfig" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/3bdf7863c71bdeff2313522942a012b4a8339021/api/envoy/extensions/filters/udp/dns_filter/v3alpha/dns_filter.proto#L46">[extensions.filters.udp.dns_filter.v3alpha.DnsFilterConfig.ClientContextConfig proto]</a></p>
<p>This message contains the configuration for the DNS Filter operating
in a client context. This message will contain the timeouts, retry,
and forwarding configuration for Envoy to make DNS requests to other
resolvers</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;resolver_timeout&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;dns_resolution_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;max_pending_lookups&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-clientcontextconfig-resolver-timeout">
<dt>resolver_timeout</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) Sets the maximum time we will wait for the upstream query to complete
We allow 5s for the upstream resolution to complete, so the minimum
value here is 1. Note that the total latency for a failed query is the
number of retries multiplied by the resolver_timeout.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-clientcontextconfig-dns-resolution-config">
<dt>dns_resolution_config</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/resolver.proto.html#envoy-v3-api-msg-config-core-v3-dnsresolutionconfig"><span class="std std-ref">config.core.v3.DnsResolutionConfig</span></a>) DNS resolution configuration which includes the underlying dns resolver addresses and options.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-clientcontextconfig-max-pending-lookups">
<dt>max_pending_lookups</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint64</a>) Controls how many outstanding external lookup contexts the filter tracks.
The context structure allows the filter to respond to every query even if the external
resolution times out or is otherwise unsuccessful</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../../../../../config/filter/http/http.html" class="btn btn-neutral float-right" title="HTTP filters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../../udp_proxy/v3/udp_proxy.proto.html" class="btn btn-neutral float-left" title="UDP proxy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016-2021, Envoy Project Authors.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>