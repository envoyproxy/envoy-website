

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Common tap configuration &mdash; envoy 1.15.0-dev-582915 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Trace service" href="../../../service/trace/v3/trace_service.proto.html" />
    <link rel="prev" title="Tap discovery service" href="../../../service/tap/v3/tapds.proto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html">
          

          
            
            <img src="../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.15.0-dev-582915
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../version_history/version_history.html">Version history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api-v2/api.html">v2 API reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config.html">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../service/service.html">Services</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../../service/accesslog/v3/als.proto.html">gRPC Access Log Service (ALS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/load_stats/v3/lrs.proto.html">Load Reporting service (LRS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/auth/v3/attribute_context.proto.html">Attribute Context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/auth/v3/external_auth.proto.html">Authorization Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/health/v3/hds.proto.html">Health Discovery Service (HDS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/metrics/v3/metrics_service.proto.html">Metrics service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/ratelimit/v3/rls.proto.html">Rate Limit Service (RLS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/runtime/v3/rtds.proto.html">Runtime Discovery Service (RTDS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/status/v3/csds.proto.html">Client Status Discovery Service (CSDS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/tap/v3/tap.proto.html">Tap Sink Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/tap/v3/tapds.proto.html">Tap discovery service</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Common tap configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../service/trace/v3/trace_service.proto.html">Trace service</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../api/api.html">API</a> &raquo;</li>
        
          <li><a href="../../../api.html">v3 API reference</a> &raquo;</li>
        
          <li><a href="../../../service/service.html">Services</a> &raquo;</li>
        
      <li>Common tap configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/api-v3/config/tap/v3/common.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="common-tap-configuration">
<span id="envoy-v3-api-file-envoy-config-tap-v3-common-proto"></span><h1>Common tap configuration<a class="headerlink" href="#common-tap-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="config-tap-v3-tapconfig">
<span id="envoy-v3-api-msg-config-tap-v3-tapconfig"></span><h2>config.tap.v3.TapConfig<a class="headerlink" href="#config-tap-v3-tapconfig" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/58291523f107fd703cff09463bb36068e6fe8dc2/api/envoy/config/tap/v3/common.proto#L22">[config.tap.v3.TapConfig proto]</a></p>
<p>Tap configuration.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;match_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;output_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-config-tap-v3-tapconfig-match-config">
<dt>match_config</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-matchpredicate"><span class="std std-ref">config.tap.v3.MatchPredicate</span></a>, <em>REQUIRED</em>) The match configuration. If the configuration matches the data source being tapped, a tap will
occur, with the result written to the configured output.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-config-tap-v3-tapconfig-output-config">
<dt>output_config</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-outputconfig"><span class="std std-ref">config.tap.v3.OutputConfig</span></a>, <em>REQUIRED</em>) The tap output configuration. If a match configuration matches a data source being tapped,
a tap will occur and the data will be written to the configured output.</p>
</dd>
</dl>
</div>
<div class="section" id="config-tap-v3-matchpredicate">
<span id="envoy-v3-api-msg-config-tap-v3-matchpredicate"></span><h2>config.tap.v3.MatchPredicate<a class="headerlink" href="#config-tap-v3-matchpredicate" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/58291523f107fd703cff09463bb36068e6fe8dc2/api/envoy/config/tap/v3/common.proto#L50">[config.tap.v3.MatchPredicate proto]</a></p>
<p>Tap match configuration. This is a recursive structure which allows complex nested match
configurations to be built using various logical operators.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;or_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;and_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;not_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;any_match&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;http_request_headers_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;http_request_trailers_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;http_response_headers_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;http_response_trailers_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-config-tap-v3-matchpredicate-or-match">
<dt>or_match</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-matchpredicate-matchset"><span class="std std-ref">config.tap.v3.MatchPredicate.MatchSet</span></a>) A set that describes a logical OR. If any member of the set matches, the match configuration
matches.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-or-match"><span class="std std-ref">or_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-and-match"><span class="std std-ref">and_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-not-match"><span class="std std-ref">not_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-any-match"><span class="std std-ref">any_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-headers-match"><span class="std std-ref">http_request_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-trailers-match"><span class="std std-ref">http_request_trailers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-headers-match"><span class="std std-ref">http_response_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-trailers-match"><span class="std std-ref">http_response_trailers_match</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-config-tap-v3-matchpredicate-and-match">
<dt>and_match</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-matchpredicate-matchset"><span class="std std-ref">config.tap.v3.MatchPredicate.MatchSet</span></a>) A set that describes a logical AND. If all members of the set match, the match configuration
matches.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-or-match"><span class="std std-ref">or_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-and-match"><span class="std std-ref">and_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-not-match"><span class="std std-ref">not_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-any-match"><span class="std std-ref">any_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-headers-match"><span class="std std-ref">http_request_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-trailers-match"><span class="std std-ref">http_request_trailers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-headers-match"><span class="std std-ref">http_response_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-trailers-match"><span class="std std-ref">http_response_trailers_match</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-config-tap-v3-matchpredicate-not-match">
<dt>not_match</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-matchpredicate"><span class="std std-ref">config.tap.v3.MatchPredicate</span></a>) A negation match. The match configuration will match if the negated match condition matches.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-or-match"><span class="std std-ref">or_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-and-match"><span class="std std-ref">and_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-not-match"><span class="std std-ref">not_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-any-match"><span class="std std-ref">any_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-headers-match"><span class="std std-ref">http_request_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-trailers-match"><span class="std std-ref">http_request_trailers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-headers-match"><span class="std std-ref">http_response_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-trailers-match"><span class="std std-ref">http_response_trailers_match</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-config-tap-v3-matchpredicate-any-match">
<dt>any_match</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) The match configuration will always match.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-or-match"><span class="std std-ref">or_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-and-match"><span class="std std-ref">and_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-not-match"><span class="std std-ref">not_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-any-match"><span class="std std-ref">any_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-headers-match"><span class="std std-ref">http_request_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-trailers-match"><span class="std std-ref">http_request_trailers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-headers-match"><span class="std std-ref">http_response_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-trailers-match"><span class="std std-ref">http_response_trailers_match</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-headers-match">
<dt>http_request_headers_match</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-httpheadersmatch"><span class="std std-ref">config.tap.v3.HttpHeadersMatch</span></a>) HTTP request headers match configuration.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-or-match"><span class="std std-ref">or_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-and-match"><span class="std std-ref">and_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-not-match"><span class="std std-ref">not_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-any-match"><span class="std std-ref">any_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-headers-match"><span class="std std-ref">http_request_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-trailers-match"><span class="std std-ref">http_request_trailers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-headers-match"><span class="std std-ref">http_response_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-trailers-match"><span class="std std-ref">http_response_trailers_match</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-trailers-match">
<dt>http_request_trailers_match</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-httpheadersmatch"><span class="std std-ref">config.tap.v3.HttpHeadersMatch</span></a>) HTTP request trailers match configuration.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-or-match"><span class="std std-ref">or_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-and-match"><span class="std std-ref">and_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-not-match"><span class="std std-ref">not_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-any-match"><span class="std std-ref">any_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-headers-match"><span class="std std-ref">http_request_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-trailers-match"><span class="std std-ref">http_request_trailers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-headers-match"><span class="std std-ref">http_response_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-trailers-match"><span class="std std-ref">http_response_trailers_match</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-headers-match">
<dt>http_response_headers_match</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-httpheadersmatch"><span class="std std-ref">config.tap.v3.HttpHeadersMatch</span></a>) HTTP response headers match configuration.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-or-match"><span class="std std-ref">or_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-and-match"><span class="std std-ref">and_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-not-match"><span class="std std-ref">not_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-any-match"><span class="std std-ref">any_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-headers-match"><span class="std std-ref">http_request_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-trailers-match"><span class="std std-ref">http_request_trailers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-headers-match"><span class="std std-ref">http_response_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-trailers-match"><span class="std std-ref">http_response_trailers_match</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-trailers-match">
<dt>http_response_trailers_match</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-httpheadersmatch"><span class="std std-ref">config.tap.v3.HttpHeadersMatch</span></a>) HTTP response trailers match configuration.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-or-match"><span class="std std-ref">or_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-and-match"><span class="std std-ref">and_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-not-match"><span class="std std-ref">not_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-any-match"><span class="std std-ref">any_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-headers-match"><span class="std std-ref">http_request_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-request-trailers-match"><span class="std std-ref">http_request_trailers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-headers-match"><span class="std std-ref">http_response_headers_match</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-matchpredicate-http-response-trailers-match"><span class="std std-ref">http_response_trailers_match</span></a> must be set.</p>
</dd>
</dl>
</div>
<div class="section" id="config-tap-v3-matchpredicate-matchset">
<span id="envoy-v3-api-msg-config-tap-v3-matchpredicate-matchset"></span><h2>config.tap.v3.MatchPredicate.MatchSet<a class="headerlink" href="#config-tap-v3-matchpredicate-matchset" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/58291523f107fd703cff09463bb36068e6fe8dc2/api/envoy/config/tap/v3/common.proto#L55">[config.tap.v3.MatchPredicate.MatchSet proto]</a></p>
<p>A set of match configurations used for logical operations.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-config-tap-v3-matchpredicate-matchset-rules">
<dt>rules</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-matchpredicate"><span class="std std-ref">config.tap.v3.MatchPredicate</span></a>, <em>REQUIRED</em>) The list of rules that make up the set.</p>
</dd>
</dl>
</div>
<div class="section" id="config-tap-v3-httpheadersmatch">
<span id="envoy-v3-api-msg-config-tap-v3-httpheadersmatch"></span><h2>config.tap.v3.HttpHeadersMatch<a class="headerlink" href="#config-tap-v3-httpheadersmatch" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/58291523f107fd703cff09463bb36068e6fe8dc2/api/envoy/config/tap/v3/common.proto#L95">[config.tap.v3.HttpHeadersMatch proto]</a></p>
<p>HTTP headers match configuration.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;headers&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-config-tap-v3-httpheadersmatch-headers">
<dt>headers</dt><dd><p>(<a class="reference internal" href="../../route/v3/route_components.proto.html#envoy-v3-api-msg-config-route-v3-headermatcher"><span class="std std-ref">config.route.v3.HeaderMatcher</span></a>) HTTP headers to match.</p>
</dd>
</dl>
</div>
<div class="section" id="config-tap-v3-outputconfig">
<span id="envoy-v3-api-msg-config-tap-v3-outputconfig"></span><h2>config.tap.v3.OutputConfig<a class="headerlink" href="#config-tap-v3-outputconfig" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/58291523f107fd703cff09463bb36068e6fe8dc2/api/envoy/config/tap/v3/common.proto#L104">[config.tap.v3.OutputConfig proto]</a></p>
<p>Tap output configuration.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;sinks&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;max_buffered_rx_bytes&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;max_buffered_tx_bytes&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;streaming&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-config-tap-v3-outputconfig-sinks">
<dt>sinks</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-outputsink"><span class="std std-ref">config.tap.v3.OutputSink</span></a>, <em>REQUIRED</em>) Output sinks for tap data. Currently a single sink is allowed in the list. Once multiple
sink types are supported this constraint will be relaxed.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-config-tap-v3-outputconfig-max-buffered-rx-bytes">
<dt>max_buffered_rx_bytes</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) For buffered tapping, the maximum amount of received body that will be buffered prior to
truncation. If truncation occurs, the <a class="reference internal" href="../../../data/tap/v3/common.proto.html#envoy-v3-api-field-data-tap-v3-body-truncated"><span class="std std-ref">truncated</span></a> field will be set. If not specified, the
default is 1KiB.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-config-tap-v3-outputconfig-max-buffered-tx-bytes">
<dt>max_buffered_tx_bytes</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) For buffered tapping, the maximum amount of transmitted body that will be buffered prior to
truncation. If truncation occurs, the <a class="reference internal" href="../../../data/tap/v3/common.proto.html#envoy-v3-api-field-data-tap-v3-body-truncated"><span class="std std-ref">truncated</span></a> field will be set. If not specified, the
default is 1KiB.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-config-tap-v3-outputconfig-streaming">
<dt>streaming</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Indicates whether taps produce a single buffered message per tap, or multiple streamed
messages per tap in the emitted <a class="reference internal" href="../../../data/tap/v3/wrapper.proto.html#envoy-v3-api-msg-data-tap-v3-tracewrapper"><span class="std std-ref">TraceWrapper</span></a> messages. Note that streamed tapping does not
mean that no buffering takes place. Buffering may be required if data is processed before a
match can be determined. See the HTTP tap filter <a class="reference internal" href="../../../../configuration/http/http_filters/tap_filter.html#config-http-filters-tap-streaming"><span class="std std-ref">streaming</span></a> documentation for more information.</p>
</dd>
</dl>
</div>
<div class="section" id="config-tap-v3-outputsink">
<span id="envoy-v3-api-msg-config-tap-v3-outputsink"></span><h2>config.tap.v3.OutputSink<a class="headerlink" href="#config-tap-v3-outputsink" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/58291523f107fd703cff09463bb36068e6fe8dc2/api/envoy/config/tap/v3/common.proto#L134">[config.tap.v3.OutputSink proto]</a></p>
<p>Tap output sink configuration.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;streaming_admin&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;file_per_tap&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-config-tap-v3-outputsink-format">
<dt>format</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-enum-config-tap-v3-outputsink-format"><span class="std std-ref">config.tap.v3.OutputSink.Format</span></a>) Sink output format.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-config-tap-v3-outputsink-streaming-admin">
<dt>streaming_admin</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-streamingadminsink"><span class="std std-ref">config.tap.v3.StreamingAdminSink</span></a>) Tap output will be streamed out the <a class="reference internal" href="../../../../operations/admin.html#post--tap" title="POST /tap"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/tap</span></code></a> admin endpoint.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>It is only allowed to specify the streaming admin output sink if the tap is being
configured from the <a class="reference internal" href="../../../../operations/admin.html#post--tap" title="POST /tap"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/tap</span></code></a> admin endpoint. Thus, if an extension has
been configured to receive tap configuration from some other source (e.g., static
file, XDS, etc.) configuring the streaming admin output type will fail.</p>
</div>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-outputsink-streaming-admin"><span class="std std-ref">streaming_admin</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-outputsink-file-per-tap"><span class="std std-ref">file_per_tap</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-config-tap-v3-outputsink-file-per-tap">
<dt>file_per_tap</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-config-tap-v3-filepertapsink"><span class="std std-ref">config.tap.v3.FilePerTapSink</span></a>) Tap output will be written to a file per tap sink.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-outputsink-streaming-admin"><span class="std std-ref">streaming_admin</span></a>, <a class="reference internal" href="#envoy-v3-api-field-config-tap-v3-outputsink-file-per-tap"><span class="std std-ref">file_per_tap</span></a> must be set.</p>
</dd>
</dl>
</div>
<div class="section" id="enum-config-tap-v3-outputsink-format">
<span id="envoy-v3-api-enum-config-tap-v3-outputsink-format"></span><h2>Enum config.tap.v3.OutputSink.Format<a class="headerlink" href="#enum-config-tap-v3-outputsink-format" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/58291523f107fd703cff09463bb36068e6fe8dc2/api/envoy/config/tap/v3/common.proto#L142">[config.tap.v3.OutputSink.Format proto]</a></p>
<p>Output format. All output is in the form of one or more <a class="reference internal" href="../../../data/tap/v3/wrapper.proto.html#envoy-v3-api-msg-data-tap-v3-tracewrapper"><span class="std std-ref">TraceWrapper</span></a> messages. This enumeration indicates
how those messages are written. Note that not all sinks support all output formats. See
individual sink documentation for more information.</p>
<dl class="simple" id="envoy-v3-api-enum-value-config-tap-v3-outputsink-format-json-body-as-bytes">
<dt>JSON_BODY_AS_BYTES</dt><dd><p><em>(DEFAULT)</em> ⁣Each message will be written as JSON. Any <a class="reference internal" href="../../../data/tap/v3/common.proto.html#envoy-v3-api-msg-data-tap-v3-body"><span class="std std-ref">body</span></a>
data will be present in the <a class="reference internal" href="../../../data/tap/v3/common.proto.html#envoy-v3-api-field-data-tap-v3-body-as-bytes"><span class="std std-ref">as_bytes</span></a> field. This means that body data will be
base64 encoded as per the <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto3#json">proto3 JSON mappings</a>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-enum-value-config-tap-v3-outputsink-format-json-body-as-string">
<dt>JSON_BODY_AS_STRING</dt><dd><p>⁣Each message will be written as JSON. Any <a class="reference internal" href="../../../data/tap/v3/common.proto.html#envoy-v3-api-msg-data-tap-v3-body"><span class="std std-ref">body</span></a>
data will be present in the <a class="reference internal" href="../../../data/tap/v3/common.proto.html#envoy-v3-api-field-data-tap-v3-body-as-string"><span class="std std-ref">as_string</span></a> field. This means that body data will be
string encoded as per the <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto3#json">proto3 JSON mappings</a>. This format type is
useful when it is known that that body is human readable (e.g., JSON over HTTP) and the
user wishes to view it directly without being forced to base64 decode the body.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-enum-value-config-tap-v3-outputsink-format-proto-binary">
<dt>PROTO_BINARY</dt><dd><p>⁣Binary proto format. Note that binary proto is not self-delimiting. If a sink writes
multiple binary messages without any length information the data stream will not be
useful. However, for certain sinks that are self-delimiting (e.g., one message per file)
this output format makes consumption simpler.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-enum-value-config-tap-v3-outputsink-format-proto-binary-length-delimited">
<dt>PROTO_BINARY_LENGTH_DELIMITED</dt><dd><p>⁣Messages are written as a sequence tuples, where each tuple is the message length encoded
as a <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.io.coded_stream">protobuf 32-bit varint</a>
followed by the binary message. The messages can be read back using the language specific
protobuf coded stream implementation to obtain the message length and the message.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-enum-value-config-tap-v3-outputsink-format-proto-text">
<dt>PROTO_TEXT</dt><dd><p>⁣Text proto format.</p>
</dd>
</dl>
</div>
<div class="section" id="config-tap-v3-streamingadminsink">
<span id="envoy-v3-api-msg-config-tap-v3-streamingadminsink"></span><h2>config.tap.v3.StreamingAdminSink<a class="headerlink" href="#config-tap-v3-streamingadminsink" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/58291523f107fd703cff09463bb36068e6fe8dc2/api/envoy/config/tap/v3/common.proto#L202">[config.tap.v3.StreamingAdminSink proto]</a></p>
<p>Streaming admin sink configuration.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{}</span>
</pre></div>
</div>
</div>
<div class="section" id="config-tap-v3-filepertapsink">
<span id="envoy-v3-api-msg-config-tap-v3-filepertapsink"></span><h2>config.tap.v3.FilePerTapSink<a class="headerlink" href="#config-tap-v3-filepertapsink" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/58291523f107fd703cff09463bb36068e6fe8dc2/api/envoy/config/tap/v3/common.proto#L208">[config.tap.v3.FilePerTapSink proto]</a></p>
<p>The file per tap sink outputs a discrete file for every tapped stream.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;path_prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-config-tap-v3-filepertapsink-path-prefix">
<dt>path_prefix</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) Path prefix. The output file will be of the form &lt;path_prefix&gt;_&lt;id&gt;.pb, where &lt;id&gt; is an
identifier distinguishing the recorded trace for stream instances (the Envoy
connection ID, HTTP stream ID, etc.).</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../service/trace/v3/trace_service.proto.html" class="btn btn-neutral float-right" title="Trace service" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../../service/tap/v3/tapds.proto.html" class="btn btn-neutral float-left" title="Tap discovery service" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2020, Envoy Project Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>