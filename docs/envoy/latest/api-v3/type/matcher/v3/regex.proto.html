

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Regex matcher &mdash; envoy 1.17.0-dev-d9ea34 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="String matcher" href="string.proto.html" />
    <link rel="prev" title="Path matcher" href="path.proto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html">
          

          
            
            <img src="../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.17.0-dev-d9ea34
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api-v2/api.html">v2 API reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../config/config.html">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../service/service.html">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../types/types.html">Types</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../v3/hash_policy.proto.html">Hash Policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../v3/http.proto.html">HTTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../v3/http_status.proto.html">HTTP status codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../v3/percent.proto.html">Percent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../v3/range.proto.html">Range</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../v3/ratelimit_unit.proto.html">Ratelimit Time Unit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../v3/semantic_version.proto.html">Semantic Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../v3/token_bucket.proto.html">Token bucket</a></li>
<li class="toctree-l4"><a class="reference internal" href="metadata.proto.html">Metadata matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="node.proto.html">Node matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="number.proto.html">Number matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="path.proto.html">Path matcher</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Regex matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="string.proto.html">String matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="struct.proto.html">Struct matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="value.proto.html">Value matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/v3/metadata.proto.html">Metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tracing/v3/custom_tag.proto.html">Custom Tag</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../version_history/version_history.html">Version history</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../api/api.html">API</a> &raquo;</li>
        
          <li><a href="../../../api.html">v3 API reference</a> &raquo;</li>
        
          <li><a href="../../../types/types.html">Types</a> &raquo;</li>
        
      <li>Regex matcher</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/api-v3/type/matcher/v3/regex.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="regex-matcher">
<span id="envoy-v3-api-file-envoy-type-matcher-v3-regex-proto"></span><h1>Regex matcher<a class="headerlink" href="#regex-matcher" title="Permalink to this headline">¶</a></h1>
<div class="section" id="type-matcher-v3-regexmatcher">
<span id="envoy-v3-api-msg-type-matcher-v3-regexmatcher"></span><h2>type.matcher.v3.RegexMatcher<a class="headerlink" href="#type-matcher-v3-regexmatcher" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/d9ea34f616a26057bc4f9d3d0d9637d3e255f951/api/envoy/type/matcher/v3/regex.proto#L18">[type.matcher.v3.RegexMatcher proto]</a></p>
<p>A regex matcher designed for safety when used with untrusted input.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;google_re2&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-type-matcher-v3-regexmatcher-google-re2">
<dt>google_re2</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-type-matcher-v3-regexmatcher-googlere2"><span class="std std-ref">type.matcher.v3.RegexMatcher.GoogleRE2</span></a>, <em>REQUIRED</em>) Google’s RE2 regex engine.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-type-matcher-v3-regexmatcher-regex">
<dt>regex</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) The regex match string. The string must be supported by the configured engine.</p>
</dd>
</dl>
</div>
<div class="section" id="type-matcher-v3-regexmatcher-googlere2">
<span id="envoy-v3-api-msg-type-matcher-v3-regexmatcher-googlere2"></span><h2>type.matcher.v3.RegexMatcher.GoogleRE2<a class="headerlink" href="#type-matcher-v3-regexmatcher-googlere2" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/d9ea34f616a26057bc4f9d3d0d9637d3e255f951/api/envoy/type/matcher/v3/regex.proto#L34">[type.matcher.v3.RegexMatcher.GoogleRE2 proto]</a></p>
<p>Google’s <a class="reference external" href="https://github.com/google/re2">RE2</a> regex engine. The regex string must adhere to
the documented <a class="reference external" href="https://github.com/google/re2/wiki/Syntax">syntax</a>. The engine is designed
to complete execution in linear time as well as limit the amount of memory used.</p>
<p>Envoy supports program size checking via runtime. The runtime keys <cite>re2.max_program_size.error_level</cite>
and <cite>re2.max_program_size.warn_level</cite> can be set to integers as the maximum program size or
complexity that a compiled regex can have before an exception is thrown or a warning is
logged, respectively. <cite>re2.max_program_size.error_level</cite> defaults to 100, and
<cite>re2.max_program_size.warn_level</cite> has no default if unset (will not check/log a warning).</p>
<p>Envoy emits two stats for tracking the program size of regexes: the histogram <cite>re2.program_size</cite>,
which records the program size, and the counter <cite>re2.exceeded_warn_level</cite>, which is incremented
each time the program size exceeds the warn level threshold.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;max_program_size&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-type-matcher-v3-regexmatcher-googlere2-max-program-size">
<dt>max_program_size</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) This field controls the RE2 “program size” which is a rough estimate of how complex a
compiled regex is to evaluate. A regex that has a program size greater than the configured
value will fail to compile. In this case, the configured max program size can be increased
or the regex can be simplified. If not specified, the default is 100.</p>
<p>This field is deprecated; regexp validation should be performed on the management server
instead of being done by each individual client.</p>
</dd>
</dl>
</div>
<div class="section" id="type-matcher-v3-regexmatchandsubstitute">
<span id="envoy-v3-api-msg-type-matcher-v3-regexmatchandsubstitute"></span><h2>type.matcher.v3.RegexMatchAndSubstitute<a class="headerlink" href="#type-matcher-v3-regexmatchandsubstitute" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/d9ea34f616a26057bc4f9d3d0d9637d3e255f951/api/envoy/type/matcher/v3/regex.proto#L61">[type.matcher.v3.RegexMatchAndSubstitute proto]</a></p>
<p>Describes how to match a string and then produce a new string using a regular
expression and a substitution string.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;substitution&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-type-matcher-v3-regexmatchandsubstitute-pattern">
<dt>pattern</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-type-matcher-v3-regexmatcher"><span class="std std-ref">type.matcher.v3.RegexMatcher</span></a>, <em>REQUIRED</em>) The regular expression used to find portions of a string (hereafter called
the “subject string”) that should be replaced. When a new string is
produced during the substitution operation, the new string is initially
the same as the subject string, but then all matches in the subject string
are replaced by the substitution string. If replacing all matches isn’t
desired, regular expression anchors can be used to ensure a single match,
so as to replace just one occurrence of a pattern. Capture groups can be
used in the pattern to extract portions of the subject string, and then
referenced in the substitution string.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-type-matcher-v3-regexmatchandsubstitute-substitution">
<dt>substitution</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The string that should be substituted into matching portions of the
subject string during a substitution operation to produce a new string.
Capture groups in the pattern can be referenced in the substitution
string. Note, however, that the syntax for referring to capture groups is
defined by the chosen regular expression engine. Google’s <a class="reference external" href="https://github.com/google/re2">RE2</a> regular expression engine uses a
backslash followed by the capture group number to denote a numbered
capture group. E.g., <code class="docutils literal notranslate"><span class="pre">\1</span></code> refers to capture group 1, and <code class="docutils literal notranslate"><span class="pre">\2</span></code> refers
to capture group 2.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="string.proto.html" class="btn btn-neutral float-right" title="String matcher" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="path.proto.html" class="btn btn-neutral float-left" title="Path matcher" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016-2020, Envoy Project Authors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>