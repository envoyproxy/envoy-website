

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Clusters and CDS &mdash; envoy 1.6.0-data-plane-api-dd8a7f documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="envoy 1.6.0-data-plane-api-dd8a7f documentation" href="../index.html"/>
        <link rel="up" title="v2 API reference" href="api.html"/>
        <link rel="next" title="Endpoints and EDS" href="eds.proto.html"/>
        <link rel="prev" title="Listeners and LDS" href="lds.proto.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> envoy
          

          
          </a>

          
            
            
              <div class="version">
                1.6.0-data-plane-api-dd8a7f
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-v1/api.html">v1 API reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">v2 API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="bootstrap.proto.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="lds.proto.html">Listeners and LDS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Clusters and CDS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cluster">Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cluster-edsclusterconfig">Cluster.EdsClusterConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cluster-outlierdetection">Cluster.OutlierDetection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cluster-lbsubsetconfig">Cluster.LbSubsetConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cluster-lbsubsetconfig-lbsubsetselector">Cluster.LbSubsetConfig.LbSubsetSelector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enum-cluster-lbsubsetconfig-lbsubsetfallbackpolicy">Enum Cluster.LbSubsetConfig.LbSubsetFallbackPolicy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cluster-ringhashlbconfig">Cluster.RingHashLbConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cluster-ringhashlbconfig-deprecatedv1">Cluster.RingHashLbConfig.DeprecatedV1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enum-cluster-discoverytype">Enum Cluster.DiscoveryType</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enum-cluster-lbpolicy">Enum Cluster.LbPolicy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enum-cluster-dnslookupfamily">Enum Cluster.DnsLookupFamily</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upstreambindconfig">UpstreamBindConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="#circuitbreakers">CircuitBreakers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#circuitbreakers-thresholds">CircuitBreakers.Thresholds</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="eds.proto.html">Endpoints and EDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="health_check.proto.html">Health check</a></li>
<li class="toctree-l2"><a class="reference internal" href="rds.proto.html">HTTP route management and RDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="sds.proto.html">Common TLS configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats.proto.html">Stats</a></li>
<li class="toctree-l2"><a class="reference internal" href="trace.proto.html">Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="base.proto.html">Common types</a></li>
<li class="toctree-l2"><a class="reference internal" href="address.proto.html">Network addresses</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol.proto.html">Protocol options</a></li>
<li class="toctree-l2"><a class="reference internal" href="discovery.proto.html">Common discovery API components</a></li>
<li class="toctree-l2"><a class="reference internal" href="rls.proto.html">Common rate limit components</a></li>
<li class="toctree-l2"><a class="reference internal" href="filter/filter.html">Filters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">envoy</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="api.html">v2 API reference</a> &raquo;</li>
        
      <li>Clusters and CDS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api-v2/cds.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="clusters-and-cds">
<span id="envoy-api-file-api-cds-proto"></span><h1>Clusters and CDS<a class="headerlink" href="#clusters-and-cds" title="Permalink to this headline">¶</a></h1>
<div class="section" id="cluster">
<span id="envoy-api-msg-cluster"></span><h2>Cluster<a class="headerlink" href="#cluster" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L34">[Cluster proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;eds_cluster_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;connect_timeout&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;per_connection_buffer_limit_bytes&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;lb_policy&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;hosts&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;health_checks&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;max_requests_per_connection&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;circuit_breakers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;tls_context&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;http_protocol_options&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;http2_protocol_options&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;dns_refresh_rate&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;dns_lookup_family&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;dns_resolvers&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;outlier_detection&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cleanup_interval&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;upstream_bind_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;lb_subset_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ring_hash_lb_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;transport_socket&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-cluster-name">
<dt>name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) Supplies the name of the cluster which must be unique across all clusters.
The cluster name is used when emitting
<a class="reference internal" href="../configuration/cluster_manager/cluster_stats.html#config-cluster-manager-cluster-stats"><span class="std std-ref">statistics</span></a>.
Any <code class="docutils literal"><span class="pre">:</span></code> in the cluster name will be converted to <code class="docutils literal"><span class="pre">_</span></code> when emitting statistics.
By default, the maximum length of a cluster name is limited to 60
characters. This limit can be increased by setting the
<a class="reference internal" href="../operations/cli.html#cmdoption-max-obj-name-len"><code class="xref std std-option docutils literal"><span class="pre">--max-obj-name-len</span></code></a> command line argument to the desired value.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-type">
<dt>type</dt>
<dd>(<a class="reference internal" href="#envoy-api-enum-cluster-discoverytype"><span class="std std-ref">Cluster.DiscoveryType</span></a>) The <a class="reference internal" href="../intro/arch_overview/service_discovery.html#arch-overview-service-discovery-types"><span class="std std-ref">service discovery type</span></a>
to use for resolving the cluster.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-eds-cluster-config">
<dt>eds_cluster_config</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-cluster-edsclusterconfig"><span class="std std-ref">Cluster.EdsClusterConfig</span></a>) Configuration to use for EDS updates for the Cluster.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-connect-timeout">
<dt>connect_timeout</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) The timeout for new network connections to hosts in the cluster.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-per-connection-buffer-limit-bytes">
<dt>per_connection_buffer_limit_bytes</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) Soft limit on size of the cluster’s connections read and write buffers. If
unspecified, an implementation defined default is applied (1MiB).</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-lb-policy">
<dt>lb_policy</dt>
<dd>(<a class="reference internal" href="#envoy-api-enum-cluster-lbpolicy"><span class="std std-ref">Cluster.LbPolicy</span></a>) The <a class="reference internal" href="../intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types"><span class="std std-ref">load balancer type</span></a> to use
when picking a host in the cluster.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-hosts">
<dt>hosts</dt>
<dd>(<a class="reference internal" href="address.proto.html#envoy-api-msg-address"><span class="std std-ref">Address</span></a>) If the service discovery type is
<a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-static"><span class="std std-ref">STATIC</span></a>,
<a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-strict-dns"><span class="std std-ref">STRICT_DNS</span></a>
or <a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-logical-dns"><span class="std std-ref">LOGICAL_DNS</span></a>,
then hosts is required.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-health-checks">
<dt>health_checks</dt>
<dd>(<a class="reference internal" href="health_check.proto.html#envoy-api-msg-healthcheck"><span class="std std-ref">HealthCheck</span></a>) Optional <a class="reference internal" href="../intro/arch_overview/health_checking.html#arch-overview-health-checking"><span class="std std-ref">active health checking</span></a>
configuration for the cluster. If no
configuration is specified no health checking will be done and all cluster
members will be considered healthy at all times.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-max-requests-per-connection">
<dt>max_requests_per_connection</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) Optional maximum requests for a single upstream connection. This parameter
is respected by both the HTTP/1.1 and HTTP/2 connection pool
implementations. If not specified, there is no limit. Setting this
parameter to 1 will effectively disable keep alive.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-circuit-breakers">
<dt>circuit_breakers</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-circuitbreakers"><span class="std std-ref">CircuitBreakers</span></a>) Optional <a class="reference internal" href="../intro/arch_overview/circuit_breaking.html#arch-overview-circuit-break"><span class="std std-ref">circuit breaking</span></a> for the cluster.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-tls-context">
<dt>tls_context</dt>
<dd><p class="first">(<a class="reference internal" href="sds.proto.html#envoy-api-msg-upstreamtlscontext"><span class="std std-ref">UpstreamTlsContext</span></a>) The TLS configuration for connections to the upstream cluster. If no TLS
configuration is specified, TLS will not be used for new connections.</p>
<div class="last admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Server certificate verification is not enabled by default. Configure
<a class="reference internal" href="sds.proto.html#envoy-api-field-certificatevalidationcontext-trusted-ca"><span class="std std-ref">trusted_ca</span></a> to enable
verification.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-http-protocol-options">
<dt>http_protocol_options</dt>
<dd><p class="first">(<a class="reference internal" href="protocol.proto.html#envoy-api-msg-http1protocoloptions"><span class="std std-ref">Http1ProtocolOptions</span></a>) Additional options when handling HTTP1 requests.</p>
<p class="last">Only one of <a class="reference internal" href="#envoy-api-field-cluster-http-protocol-options"><span class="std std-ref">http_protocol_options</span></a>, <a class="reference internal" href="#envoy-api-field-cluster-http2-protocol-options"><span class="std std-ref">http2_protocol_options</span></a> may be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-http2-protocol-options">
<dt>http2_protocol_options</dt>
<dd><p class="first">(<a class="reference internal" href="protocol.proto.html#envoy-api-msg-http2protocoloptions"><span class="std std-ref">Http2ProtocolOptions</span></a>) Even if default HTTP2 protocol options are desired, this field must be
set so that Envoy will assume that the upstream supports HTTP/2 when
making new HTTP connection pool connections. Currently, Envoy only
supports prior knowledge for upstream connections. Even if TLS is used
with ALPN, <cite>http2_protocol_options</cite> must be specified. As an aside this allows HTTP/2
connections to happen over plain text.</p>
<p class="last">Only one of <a class="reference internal" href="#envoy-api-field-cluster-http-protocol-options"><span class="std std-ref">http_protocol_options</span></a>, <a class="reference internal" href="#envoy-api-field-cluster-http2-protocol-options"><span class="std std-ref">http2_protocol_options</span></a> may be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-dns-refresh-rate">
<dt>dns_refresh_rate</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) If the DNS refresh rate is specified and the cluster type is either
<a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-strict-dns"><span class="std std-ref">STRICT_DNS</span></a>,
or <a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-logical-dns"><span class="std std-ref">LOGICAL_DNS</span></a>,
this value is used as the cluster’s DNS refresh
rate. If this setting is not specified, the value defaults to 5000. For
cluster types other than
<a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-strict-dns"><span class="std std-ref">STRICT_DNS</span></a>
and <a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-logical-dns"><span class="std std-ref">LOGICAL_DNS</span></a>
this setting is ignored.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-dns-lookup-family">
<dt>dns_lookup_family</dt>
<dd>(<a class="reference internal" href="#envoy-api-enum-cluster-dnslookupfamily"><span class="std std-ref">Cluster.DnsLookupFamily</span></a>) The DNS IP address resolution policy. If this setting is not specified, the
value defaults to
<a class="reference internal" href="#envoy-api-enum-value-cluster-dnslookupfamily-auto"><span class="std std-ref">AUTO</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-dns-resolvers">
<dt>dns_resolvers</dt>
<dd>(<a class="reference internal" href="address.proto.html#envoy-api-msg-address"><span class="std std-ref">Address</span></a>) If DNS resolvers are specified and the cluster type is either
<a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-strict-dns"><span class="std std-ref">STRICT_DNS</span></a>,
or <a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-logical-dns"><span class="std std-ref">LOGICAL_DNS</span></a>,
this value is used to specify the cluster’s dns resolvers.
If this setting is not specified, the value defaults to the default
resolver, which uses /etc/resolv.conf for configuration. For cluster types
other than
<a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-strict-dns"><span class="std std-ref">STRICT_DNS</span></a>
and <a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-logical-dns"><span class="std std-ref">LOGICAL_DNS</span></a>
this setting is ignored.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlier-detection">
<dt>outlier_detection</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-cluster-outlierdetection"><span class="std std-ref">Cluster.OutlierDetection</span></a>) If specified, outlier detection will be enabled for this upstream cluster.
Each of the configuration values can be overridden via
<a class="reference internal" href="../configuration/cluster_manager/cluster_runtime.html#config-cluster-manager-cluster-runtime-outlier-detection"><span class="std std-ref">runtime values</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-cleanup-interval">
<dt>cleanup_interval</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) The interval for removing stale hosts from a cluster type
<a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-original-dst"><span class="std std-ref">ORIGINAL_DST</span></a>.
Hosts are considered stale if they have not been used
as upstream destinations during this interval. New hosts are added
to original destination clusters on demand as new connections are
redirected to Envoy, causing the number of hosts in the cluster to
grow over time. Hosts that are not stale (they are actively used as
destinations) are kept in the cluster, which allows connections to
them remain open, saving the latency that would otherwise be spent
on opening new connections. If this setting is not specified, the
value defaults to 5000ms. For cluster types other than
<a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-original-dst"><span class="std std-ref">ORIGINAL_DST</span></a>
this setting is ignored.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-upstream-bind-config">
<dt>upstream_bind_config</dt>
<dd>(<a class="reference internal" href="address.proto.html#envoy-api-msg-bindconfig"><span class="std std-ref">BindConfig</span></a>) Optional configuration used to bind newly established upstream connections.
This overrides any bind_config specified in the bootstrap proto.
If the addres and port are empty, no bind will be performed.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-lb-subset-config">
<dt>lb_subset_config</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-cluster-lbsubsetconfig"><span class="std std-ref">Cluster.LbSubsetConfig</span></a>) Configuration for load balancing subsetting.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-ring-hash-lb-config">
<dt>ring_hash_lb_config</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-cluster-ringhashlbconfig"><span class="std std-ref">Cluster.RingHashLbConfig</span></a>) Optional configuration for the Ring Hash load balancing policy.</p>
<p class="last">Only one of <a class="reference internal" href="#envoy-api-field-cluster-ring-hash-lb-config"><span class="std std-ref">ring_hash_lb_config</span></a> may be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-transport-socket">
<dt>transport_socket</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-transportsocket"><span class="std std-ref">TransportSocket</span></a>) See <a class="reference internal" href="base.proto.html#envoy-api-msg-transportsocket"><span class="std std-ref">base.TransportSocket</span></a> description.</dd>
</dl>
</div>
<div class="section" id="cluster-edsclusterconfig">
<span id="envoy-api-msg-cluster-edsclusterconfig"></span><h2>Cluster.EdsClusterConfig<a class="headerlink" href="#cluster-edsclusterconfig" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L75">[Cluster.EdsClusterConfig proto]</a></p>
<p>Only valid when discovery type is EDS.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;eds_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;service_name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-cluster-edsclusterconfig-eds-config">
<dt>eds_config</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-configsource"><span class="std std-ref">ConfigSource</span></a>) Configuration for the source of EDS updates for this Cluster.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-edsclusterconfig-service-name">
<dt>service_name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Optional alternative to cluster name to present to EDS. This does not
have the same restrictions as cluster name, i.e. it may be arbitrary
length.</dd>
</dl>
</div>
<div class="section" id="cluster-outlierdetection">
<span id="envoy-api-msg-cluster-outlierdetection"></span><h2>Cluster.OutlierDetection<a class="headerlink" href="#cluster-outlierdetection" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L229">[Cluster.OutlierDetection proto]</a></p>
<p>See the <a class="reference internal" href="../intro/arch_overview/outlier.html#arch-overview-outlier-detection"><span class="std std-ref">architecture overview</span></a> for
more information on outlier detection.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;consecutive_5xx&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;interval&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;base_ejection_time&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;max_ejection_percent&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;enforcing_consecutive_5xx&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;enforcing_success_rate&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;success_rate_minimum_hosts&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;success_rate_request_volume&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;success_rate_stdev_factor&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;consecutive_gateway_failure&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;enforcing_consecutive_gateway_failure&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-consecutive-5xx">
<dt>consecutive_5xx</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The number of consecutive 5xx responses before a consecutive 5xx ejection
occurs. Defaults to 5.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-interval">
<dt>interval</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) The time interval between ejection analysis sweeps. This can result in
both new ejections as well as hosts being returned to service. Defaults
to 10000ms or 10s.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-base-ejection-time">
<dt>base_ejection_time</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) The base time that a host is ejected for. The real time is equal to the
base time multiplied by the number of times the host has been ejected.
Defaults to 30000ms or 30s.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-max-ejection-percent">
<dt>max_ejection_percent</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The maximum % of an upstream cluster that can be ejected due to outlier
detection. Defaults to 10%.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-enforcing-consecutive-5xx">
<dt>enforcing_consecutive_5xx</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The % chance that a host will be actually ejected when an outlier status
is detected through consecutive 5xx. This setting can be used to disable
ejection or to ramp it up slowly. Defaults to 100.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-enforcing-success-rate">
<dt>enforcing_success_rate</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The % chance that a host will be actually ejected when an outlier status
is detected through success rate statistics. This setting can be used to
disable ejection or to ramp it up slowly. Defaults to 100.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-success-rate-minimum-hosts">
<dt>success_rate_minimum_hosts</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The number of hosts in a cluster that must have enough request volume to
detect success rate outliers. If the number of hosts is less than this
setting, outlier detection via success rate statistics is not performed
for any host in the cluster. Defaults to 5.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-success-rate-request-volume">
<dt>success_rate_request_volume</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The minimum number of total requests that must be collected in one
interval (as defined by the interval duration above) to include this host
in success rate based outlier detection. If the volume is lower than this
setting, outlier detection via success rate statistics is not performed
for that host. Defaults to 100.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-success-rate-stdev-factor">
<dt>success_rate_stdev_factor</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) This factor is used to determine the ejection threshold for success rate
outlier ejection. The ejection threshold is the difference between the
mean success rate, and the product of this factor and the standard
deviation of the mean success rate: mean - (stdev *
success_rate_stdev_factor). This factor is divided by a thousand to get a
double. That is, if the desired factor is 1.9, the runtime value should
be 1900. Defaults to 1900.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-consecutive-gateway-failure">
<dt>consecutive_gateway_failure</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The number of consecutive gateway failures (502, 503, 504 status or
connection errors that are mapped to one of those status codes) before a
consecutive gateway failure ejection occurs. Defaults to 5.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-outlierdetection-enforcing-consecutive-gateway-failure">
<dt>enforcing_consecutive_gateway_failure</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The % chance that a host will be actually ejected when an outlier status
is detected through consecutive gateway failures. This setting can be
used to disable ejection or to ramp it up slowly. Defaults to 0.</dd>
</dl>
</div>
<div class="section" id="cluster-lbsubsetconfig">
<span id="envoy-api-msg-cluster-lbsubsetconfig"></span><h2>Cluster.LbSubsetConfig<a class="headerlink" href="#cluster-lbsubsetconfig" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L320">[Cluster.LbSubsetConfig proto]</a></p>
<p>Optionally divide the endpoints in this cluster into subsets defined by
endpoint metadata and selected by route and weighted cluster metadata.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;fallback_policy&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;default_subset&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;subset_selectors&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-cluster-lbsubsetconfig-fallback-policy">
<dt>fallback_policy</dt>
<dd>(<a class="reference internal" href="#envoy-api-enum-cluster-lbsubsetconfig-lbsubsetfallbackpolicy"><span class="std std-ref">Cluster.LbSubsetConfig.LbSubsetFallbackPolicy</span></a>) The behavior used when no endpoint subset matches the selected route’s
metadata. The value defaults to
<a class="reference internal" href="#envoy-api-enum-value-cluster-lbsubsetconfig-lbsubsetfallbackpolicy-no-fallback"><span class="std std-ref">NO_FALLBACK</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-lbsubsetconfig-default-subset">
<dt>default_subset</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#struct">Struct</a>) Specifies the default subset of endpoints used during fallback if
fallback_policy is
<a class="reference internal" href="#envoy-api-enum-value-cluster-lbsubsetconfig-lbsubsetfallbackpolicy-default-subset"><span class="std std-ref">DEFAULT_SUBSET</span></a>.
Each field in default_subset is
compared to the matching LbEndpoint.Metadata under the <em>envoy.lb</em>
namespace. It is valid for no hosts to match, in which case the behavior
is the same as a fallback_policy of
<a class="reference internal" href="#envoy-api-enum-value-cluster-lbsubsetconfig-lbsubsetfallbackpolicy-no-fallback"><span class="std std-ref">NO_FALLBACK</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-lbsubsetconfig-subset-selectors">
<dt>subset_selectors</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-cluster-lbsubsetconfig-lbsubsetselector"><span class="std std-ref">Cluster.LbSubsetConfig.LbSubsetSelector</span></a>) For each entry, LbEndpoint.Metadata’s
<em>envoy.lb</em> namespace is traversed and a subset is created for each unique
combination of key and value. For example:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nt">&quot;subset_selectors&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nt">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;version&quot;</span> <span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nt">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;stage&quot;</span><span class="p">,</span> <span class="s2">&quot;hardware_type&quot;</span> <span class="p">]</span> <span class="p">}</span>
<span class="p">]}</span>
</pre></div>
</div>
<p class="last">A subset is matched when the metadata from the selected route and
weighted cluster contains the same keys and values as the subset’s
metadata. The same host may appear in multiple subsets.</p>
</dd>
</dl>
</div>
<div class="section" id="cluster-lbsubsetconfig-lbsubsetselector">
<span id="envoy-api-msg-cluster-lbsubsetconfig-lbsubsetselector"></span><h2>Cluster.LbSubsetConfig.LbSubsetSelector<a class="headerlink" href="#cluster-lbsubsetconfig-lbsubsetselector" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L349">[Cluster.LbSubsetConfig.LbSubsetSelector proto]</a></p>
<p>Specifications for subsets.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-cluster-lbsubsetconfig-lbsubsetselector-keys">
<dt>keys</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) List of keys to match with the weighted cluster metadata.</dd>
</dl>
</div>
<div class="section" id="enum-cluster-lbsubsetconfig-lbsubsetfallbackpolicy">
<span id="envoy-api-enum-cluster-lbsubsetconfig-lbsubsetfallbackpolicy"></span><h2>Enum Cluster.LbSubsetConfig.LbSubsetFallbackPolicy<a class="headerlink" href="#enum-cluster-lbsubsetconfig-lbsubsetfallbackpolicy" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L327">[Cluster.LbSubsetConfig.LbSubsetFallbackPolicy proto]</a></p>
<p>If NO_FALLBACK is selected, a result
equivalent to no healthy hosts is reported. If ANY_ENDPOINT is selected,
any cluster endpoint may be returned (subject to policy, health checks,
etc). If DEFAULT_SUBSET is selected, load balancing is performed over the
endpoints matching the values from the default_subset field.</p>
<dl class="docutils" id="envoy-api-enum-value-cluster-lbsubsetconfig-lbsubsetfallbackpolicy-no-fallback">
<dt>NO_FALLBACK</dt>
<dd><em>(DEFAULT)</em> ⁣</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-lbsubsetconfig-lbsubsetfallbackpolicy-any-endpoint">
<dt>ANY_ENDPOINT</dt>
<dd>⁣</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-lbsubsetconfig-lbsubsetfallbackpolicy-default-subset">
<dt>DEFAULT_SUBSET</dt>
<dd>⁣</dd>
</dl>
</div>
<div class="section" id="cluster-ringhashlbconfig">
<span id="envoy-api-msg-cluster-ringhashlbconfig"></span><h2>Cluster.RingHashLbConfig<a class="headerlink" href="#cluster-ringhashlbconfig" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L376">[Cluster.RingHashLbConfig proto]</a></p>
<p>Specific configuration for the <a class="reference internal" href="../intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types-ring-hash"><span class="std std-ref">RingHash</span></a>
load balancing policy.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;minimum_ring_size&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;deprecated_v1&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-cluster-ringhashlbconfig-minimum-ring-size">
<dt>minimum_ring_size</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint64value">UInt64Value</a>) Minimum hash ring size, i.e. total virtual nodes. A larger size
will provide better request distribution since each host in the
cluster will have more virtual nodes. Defaults to 1024. In the case
that total number of hosts is greater than the minimum, each host will
be allocated a single virtual node.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-cluster-ringhashlbconfig-deprecated-v1">
<dt>deprecated_v1</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-cluster-ringhashlbconfig-deprecatedv1"><span class="std std-ref">Cluster.RingHashLbConfig.DeprecatedV1</span></a>) Deprecated settings from v1 config.</dd>
</dl>
</div>
<div class="section" id="cluster-ringhashlbconfig-deprecatedv1">
<span id="envoy-api-msg-cluster-ringhashlbconfig-deprecatedv1"></span><h2>Cluster.RingHashLbConfig.DeprecatedV1<a class="headerlink" href="#cluster-ringhashlbconfig-deprecatedv1" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L384">[Cluster.RingHashLbConfig.DeprecatedV1 proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;use_std_hash&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-cluster-ringhashlbconfig-deprecatedv1-use-std-hash">
<dt>use_std_hash</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) Defaults to true, meaning that std::hash is used to hash hosts onto
the ketama ring. std::hash can vary by platform. For this reason,
Envoy will eventually use <a class="reference external" href="https://github.com/Cyan4973/xxHash">xxHash</a>
by default. This field exists for
migration purposes and will eventually be deprecated. Set it to false
to use <a class="reference external" href="https://github.com/Cyan4973/xxHash">xxHash</a> now.</dd>
</dl>
</div>
<div class="section" id="enum-cluster-discoverytype">
<span id="envoy-api-enum-cluster-discoverytype"></span><h2>Enum Cluster.DiscoveryType<a class="headerlink" href="#enum-cluster-discoverytype" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L46">[Cluster.DiscoveryType proto]</a></p>
<p>Refer to <a class="reference internal" href="../intro/arch_overview/service_discovery.html#arch-overview-service-discovery-types"><span class="std std-ref">service discovery type</span></a>
for an explanation on each type.</p>
<dl class="docutils" id="envoy-api-enum-value-cluster-discoverytype-static">
<dt>STATIC</dt>
<dd><em>(DEFAULT)</em> ⁣Refer to the <a class="reference internal" href="../intro/arch_overview/service_discovery.html#arch-overview-service-discovery-types-static"><span class="std std-ref">static discovery type</span></a>
for an explanation.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-discoverytype-strict-dns">
<dt>STRICT_DNS</dt>
<dd>⁣Refer to the <a class="reference internal" href="../intro/arch_overview/service_discovery.html#arch-overview-service-discovery-types-strict-dns"><span class="std std-ref">strict DNS discovery
type</span></a>
for an explanation.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-discoverytype-logical-dns">
<dt>LOGICAL_DNS</dt>
<dd>⁣Refer to the <a class="reference internal" href="../intro/arch_overview/service_discovery.html#arch-overview-service-discovery-types-logical-dns"><span class="std std-ref">logical DNS discovery
type</span></a>
for an explanation.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-discoverytype-eds">
<dt>EDS</dt>
<dd>⁣Refer to the <a class="reference internal" href="../intro/arch_overview/service_discovery.html#arch-overview-service-discovery-types-sds"><span class="std std-ref">service discovery type</span></a>
for an explanation.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-discoverytype-original-dst">
<dt>ORIGINAL_DST</dt>
<dd>⁣Refer to the <a class="reference internal" href="../intro/arch_overview/service_discovery.html#arch-overview-service-discovery-types-original-destination"><span class="std std-ref">original destination discovery
type</span></a>
for an explanation.</dd>
</dl>
</div>
<div class="section" id="enum-cluster-lbpolicy">
<span id="envoy-api-enum-cluster-lbpolicy"></span><h2>Enum Cluster.LbPolicy<a class="headerlink" href="#enum-cluster-lbpolicy" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L100">[Cluster.LbPolicy proto]</a></p>
<p>Refer to <a class="reference internal" href="../intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types"><span class="std std-ref">load balancer type</span></a> architecture
overview section for information on each type.</p>
<dl class="docutils" id="envoy-api-enum-value-cluster-lbpolicy-round-robin">
<dt>ROUND_ROBIN</dt>
<dd><em>(DEFAULT)</em> ⁣Refer to the <a class="reference internal" href="../intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types-round-robin"><span class="std std-ref">round robin load balancing
policy</span></a>
for an explanation.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-lbpolicy-least-request">
<dt>LEAST_REQUEST</dt>
<dd>⁣Refer to the <a class="reference internal" href="../intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types-least-request"><span class="std std-ref">least request load balancing
policy</span></a>
for an explanation.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-lbpolicy-ring-hash">
<dt>RING_HASH</dt>
<dd>⁣Refer to the <a class="reference internal" href="../intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types-ring-hash"><span class="std std-ref">ring hash load balancing
policy</span></a>
for an explanation.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-lbpolicy-random">
<dt>RANDOM</dt>
<dd>⁣Refer to the <a class="reference internal" href="../intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types-random"><span class="std std-ref">random load balancing
policy</span></a>
for an explanation.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-lbpolicy-original-dst-lb">
<dt>ORIGINAL_DST_LB</dt>
<dd>⁣Refer to the <a class="reference internal" href="../intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types-original-destination"><span class="std std-ref">original destination load balancing
policy</span></a>
for an explanation.</dd>
</dl>
</div>
<div class="section" id="enum-cluster-dnslookupfamily">
<span id="envoy-api-enum-cluster-dnslookupfamily"></span><h2>Enum Cluster.DnsLookupFamily<a class="headerlink" href="#enum-cluster-dnslookupfamily" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L204">[Cluster.DnsLookupFamily proto]</a></p>
<p>When V4_ONLY is selected, the DNS resolver will only perform a lookup for
addresses in the IPv4 family. If V6_ONLY is selected, the DNS resolver will
only perform a lookup for addresses in the IPv6 family. If AUTO is
specified, the DNS resolver will first perform a lookup for addresses in
the IPv6 family and fallback to a lookup for addresses in the IPv4 family.
For cluster types other than
<a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-strict-dns"><span class="std std-ref">STRICT_DNS</span></a> and
<a class="reference internal" href="#envoy-api-enum-value-cluster-discoverytype-logical-dns"><span class="std std-ref">LOGICAL_DNS</span></a>,
this setting is
ignored.</p>
<dl class="docutils" id="envoy-api-enum-value-cluster-dnslookupfamily-auto">
<dt>AUTO</dt>
<dd><em>(DEFAULT)</em> ⁣</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-dnslookupfamily-v4-only">
<dt>V4_ONLY</dt>
<dd>⁣</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-cluster-dnslookupfamily-v6-only">
<dt>V6_ONLY</dt>
<dd>⁣</dd>
</dl>
</div>
<div class="section" id="upstreambindconfig">
<span id="envoy-api-msg-upstreambindconfig"></span><h2>UpstreamBindConfig<a class="headerlink" href="#upstreambindconfig" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L423">[UpstreamBindConfig proto]</a></p>
<p>An extensible structure containing the address Envoy should bind to when
establishing upstream connections.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;source_address&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-upstreambindconfig-source-address">
<dt>source_address</dt>
<dd>(<a class="reference internal" href="address.proto.html#envoy-api-msg-address"><span class="std std-ref">Address</span></a>) The address Envoy should bind to when establishing upstream connections.</dd>
</dl>
</div>
<div class="section" id="circuitbreakers">
<span id="envoy-api-msg-circuitbreakers"></span><h2>CircuitBreakers<a class="headerlink" href="#circuitbreakers" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L430">[CircuitBreakers proto]</a></p>
<p><a class="reference internal" href="../intro/arch_overview/circuit_breaking.html#arch-overview-circuit-break"><span class="std std-ref">Circuit breaking</span></a> settings can be
specified individually for each defined priority.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;thresholds&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-circuitbreakers-thresholds">
<dt>thresholds</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-circuitbreakers-thresholds"><span class="std std-ref">CircuitBreakers.Thresholds</span></a>) If multiple <a class="reference internal" href="#envoy-api-msg-circuitbreakers-thresholds"><span class="std std-ref">Thresholds</span></a>
are defined with the same <a class="reference internal" href="base.proto.html#envoy-api-enum-routingpriority"><span class="std std-ref">RoutingPriority</span></a>,
the first one in the list is used. If no Thresholds is defined for a given
<a class="reference internal" href="base.proto.html#envoy-api-enum-routingpriority"><span class="std std-ref">RoutingPriority</span></a>, the default values
are used.</dd>
</dl>
</div>
<div class="section" id="circuitbreakers-thresholds">
<span id="envoy-api-msg-circuitbreakers-thresholds"></span><h2>CircuitBreakers.Thresholds<a class="headerlink" href="#circuitbreakers-thresholds" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/cds.proto#L434">[CircuitBreakers.Thresholds proto]</a></p>
<p>A Thresholds defines CircuitBreaker settings for a
<a class="reference internal" href="base.proto.html#envoy-api-enum-routingpriority"><span class="std std-ref">RoutingPriority</span></a>.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;priority&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;max_connections&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;max_pending_requests&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;max_requests&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;max_retries&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-circuitbreakers-thresholds-priority">
<dt>priority</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-enum-routingpriority"><span class="std std-ref">RoutingPriority</span></a>) The <a class="reference internal" href="base.proto.html#envoy-api-enum-routingpriority"><span class="std std-ref">RoutingPriority</span></a>
the specified CircuitBreaker settings apply to.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-circuitbreakers-thresholds-max-connections">
<dt>max_connections</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The maximum number of connections that Envoy will make to the upstream
cluster. If not specified, the default is 1024.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-circuitbreakers-thresholds-max-pending-requests">
<dt>max_pending_requests</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The maximum number of pending requests that Envoy will allow to the
upstream cluster. If not specified, the default is 1024.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-circuitbreakers-thresholds-max-requests">
<dt>max_requests</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The maximum number of parallel requests that Envoy will make to the
upstream cluster. If not specified, the default is 1024.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-circuitbreakers-thresholds-max-retries">
<dt>max_retries</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The maximum number of parallel retries that Envoy will allow to the
upstream cluster. If not specified, the default is 3.</dd>
</dl>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="eds.proto.html" class="btn btn-neutral float-right" title="Endpoints and EDS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="lds.proto.html" class="btn btn-neutral" title="Listeners and LDS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Envoy Project Authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.6.0-data-plane-api-dd8a7f',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>