

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.12.0 (October 31, 2019) &mdash; envoy 1.18.0-dev-241a95 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.11.2 (October 8, 2019)" href="v1.11.2.html" />
    <link rel="prev" title="1.12.1 (November 8, 2019)" href="v1.12.1.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.18.0-dev-241a95
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/overview.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="version_history.html">Version history</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="current.html">1.18.0 (Pending)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.0.html">1.17.0 (January 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.2.html">1.16.2 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.1.html">1.16.1 (November 20, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.0.html">1.16.0 (October 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.3.html">1.15.3 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.2.html">1.15.2 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.1.html">1.15.1 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.0.html">1.15.0 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.6.html">1.14.6 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.5.html">1.14.5 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.4.html">1.14.4 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.3.html">1.14.3 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.2.html">1.14.2 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.1.html">1.14.1 (April 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.0.html">1.14.0 (April 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.8.html">1.13.8 (January 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.7.html">1.13.7 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.6.html">1.13.6 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.5.html">1.13.5 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.4.html">1.13.4 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.3.html">1.13.3 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.2.html">1.13.2 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.1.html">1.13.1 (March 3, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.0.html">1.13.0 (January 20, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.7.html">1.12.7 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.6.html">1.12.6 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.5.html">1.12.5 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.4.html">1.12.4 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.3.html">1.12.3 (March 3, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.2.html">1.12.2 (December 10, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.1.html">1.12.1 (November 8, 2019)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.12.0 (October 31, 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#changes">Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deprecated">Deprecated</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.2.html">1.11.2 (October 8, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.1.html">1.11.1 (August 13, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.0.html">1.11.0 (July 11, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.10.0.html">1.10.0 (Apr 5, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.9.1.html">1.9.1 (Apr 2, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.9.0.html">1.9.0 (Dec 20, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.8.0.html">1.8.0 (Oct 4, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.7.0.html">1.7.0 (Jun 21, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.6.0.html">1.6.0 (March 20, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.5.0.html">1.5.0 (December 4, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.4.0.html">1.4.0 (August 24, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.3.0.html">1.3.0 (May 17, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.2.0.html">1.2.0 (March 7, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.1.0.html">1.1.0 (November 30, 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.0.0.html">1.0.0 (September 12, 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#deprecation-policy">Deprecation Policy</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="version_history.html">Version history</a> &raquo;</li>
        
      <li>1.12.0 (October 31, 2019)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/version_history/v1.12.0.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="october-31-2019">
<h1>1.12.0 (October 31, 2019)<a class="headerlink" href="#october-31-2019" title="Permalink to this headline">¶</a></h1>
<div class="section" id="changes">
<h2>Changes<a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added a new flag for <a class="reference internal" href="../api-v2/data/accesslog/v2/accesslog.proto.html#envoy-api-field-data-accesslog-v2-responseflags-downstream-protocol-error"><span class="std std-ref">downstream protocol error</span></a>.</p></li>
<li><p>access log: added <a class="reference internal" href="../api-v2/config/accesslog/v2/als.proto.html#envoy-api-field-config-accesslog-v2-commongrpcaccesslogconfig-buffer-size-bytes"><span class="std std-ref">buffering</span></a> and <a class="reference internal" href="../api-v2/config/accesslog/v2/als.proto.html#envoy-api-field-config-accesslog-v2-commongrpcaccesslogconfig-buffer-flush-interval"><span class="std std-ref">periodical flushing</span></a> support to gRPC access logger. Defaults to 16KB buffer and flushing every 1 second.</p></li>
<li><p>access log: added DOWNSTREAM_DIRECT_REMOTE_ADDRESS and DOWNSTREAM_DIRECT_REMOTE_ADDRESS_WITHOUT_PORT <a class="reference internal" href="../configuration/observability/access_log/usage.html#config-access-log-format"><span class="std std-ref">access log formatters</span></a> and gRPC access logger.</p></li>
<li><p>access log: gRPC Access Log Service (ALS) support added for <a class="reference internal" href="../api-v2/config/accesslog/v2/als.proto.html#envoy-api-msg-config-accesslog-v2-tcpgrpcaccesslogconfig"><span class="std std-ref">TCP access logs</span></a>.</p></li>
<li><p>access log: reintroduced <a class="reference internal" href="../configuration/observability/access_log/stats.html#config-access-log-stats"><span class="std std-ref">filesystem</span></a> stats and added the <cite>write_failed</cite> counter to track failed log writes.</p></li>
<li><p>admin: added ability to configure listener <a class="reference internal" href="../api-v2/config/bootstrap/v2/bootstrap.proto.html#envoy-api-field-config-bootstrap-v2-admin-socket-options"><span class="std std-ref">socket options</span></a>.</p></li>
<li><p>admin: added config dump support for Secret Discovery Service <a class="reference internal" href="../api-v2/admin/v2alpha/config_dump.proto.html#envoy-api-msg-admin-v2alpha-secretsconfigdump"><span class="std std-ref">SecretConfigDump</span></a>.</p></li>
<li><p>admin: added support for <a class="reference internal" href="../operations/admin.html#operations-admin-interface-drain"><span class="std std-ref">draining</span></a> listeners via admin interface.</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#get--stats-recentlookups" title="GET /stats/recentlookups"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/stats/recentlookups</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--stats-recentlookups-clear" title="POST /stats/recentlookups/clear"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/stats/recentlookups/clear</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--stats-recentlookups-disable" title="POST /stats/recentlookups/disable"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/stats/recentlookups/disable</span></code></a>, and <a class="reference internal" href="../operations/admin.html#post--stats-recentlookups-enable" title="POST /stats/recentlookups/enable"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/stats/recentlookups/enable</span></code></a> endpoints.</p></li>
<li><p>api: added <a class="reference internal" href="../api-v2/api/v2/core/config_source.proto.html#envoy-api-field-core-apiconfigsource-set-node-on-first-message-only"><span class="std std-ref">set_node_on_first_message_only</span></a> option to omit the node identifier from the subsequent discovery requests on the same stream.</p></li>
<li><p>buffer filter: now populates content-length header if not present. This behavior can be temporarily disabled using the runtime feature <cite>envoy.reloadable_features.buffer_filter_populate_content_length</cite>.</p></li>
<li><p>build: official released binary is now PIE so it can be run with ASLR.</p></li>
<li><p>config: added support for <a class="reference internal" href="../intro/arch_overview/operations/dynamic_configuration.html#arch-overview-dynamic-config-delta"><span class="std std-ref">delta xDS</span></a> (including ADS) delivery.</p></li>
<li><p>config: enforcing that terminal filters (e.g. HttpConnectionManager for L4, router for L7) be the last in their respective filter chains.</p></li>
<li><p>config: added access log <a class="reference internal" href="../api-v2/config/filter/accesslog/v2/accesslog.proto.html#envoy-api-field-config-filter-accesslog-v2-accesslogfilter-extension-filter"><span class="std std-ref">extension filter</span></a>.</p></li>
<li><p>config: added support for <a class="reference internal" href="../operations/cli.html#cmdoption-reject-unknown-dynamic-fields"><code class="xref std std-option docutils literal notranslate"><span class="pre">--reject-unknown-dynamic-fields</span></code></a>, providing independent control
over whether unknown fields are rejected in static and dynamic configuration. By default, unknown
fields in static configuration are rejected and are allowed in dynamic configuration. Warnings
are logged for the first use of any unknown field and these occurrences are counted in the
<a class="reference internal" href="../configuration/observability/statistics.html#server-statistics"><span class="std std-ref">server.static_unknown_fields</span></a> and <a class="reference internal" href="../configuration/observability/statistics.html#server-statistics"><span class="std std-ref">server.dynamic_unknown_fields</span></a> statistics.</p></li>
<li><p>config: added async data access for local and remote data sources.</p></li>
<li><p>config: changed the default value of <a class="reference internal" href="../api-v2/api/v2/core/config_source.proto.html#envoy-api-field-core-configsource-initial-fetch-timeout"><span class="std std-ref">initial_fetch_timeout</span></a> from 0s to 15s. This is a change in behaviour in the sense that Envoy will move to the next initialization phase, even if the first config is not delivered in 15s. Refer to <a class="reference internal" href="../intro/arch_overview/operations/init.html#arch-overview-initialization"><span class="std std-ref">initialization process</span></a> for more details.</p></li>
<li><p>config: added stat <a class="reference internal" href="../configuration/upstream/cluster_manager/cds.html#config-cluster-manager-cds"><span class="std std-ref">init_fetch_timeout</span></a>.</p></li>
<li><p>config: tls_context in Cluster and FilterChain are deprecated in favor of transport socket. See <a class="reference internal" href="version_history.html#deprecated"><span class="std std-ref">deprecated documentation</span></a> for more information.</p></li>
<li><p>csrf: added PATCH to supported methods.</p></li>
<li><p>dns: added support for configuring <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-dns-failure-refresh-rate"><span class="std std-ref">dns_failure_refresh_rate</span></a> to set the DNS refresh rate during failures.</p></li>
<li><p>ext_authz: added <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-metadata-context-namespaces"><span class="std std-ref">configurable ability</span></a> to send dynamic metadata to the <cite>ext_authz</cite> service.</p></li>
<li><p>ext_authz: added <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-filter-enabled"><span class="std std-ref">filter_enabled RuntimeFractionalPercent flag</span></a> to filter.</p></li>
<li><p>ext_authz: added tracing to the HTTP client.</p></li>
<li><p>ext_authz: deprecated <a class="reference internal" href="../configuration/http/http_filters/ext_authz_filter.html#config-http-filters-ext-authz-stats"><span class="std std-ref">cluster scope stats</span></a> in favour of filter scope stats.</p></li>
<li><p>fault: added overrides for default runtime keys in <a class="reference internal" href="../api-v2/config/filter/http/fault/v2/fault.proto.html#envoy-api-msg-config-filter-http-fault-v2-httpfault"><span class="std std-ref">HTTPFault</span></a> filter.</p></li>
<li><p>grpc: added <a class="reference internal" href="../api-v2/config/grpc_credential/v2alpha/aws_iam.proto.html#envoy-api-file-envoy-config-grpc-credential-v2alpha-aws-iam-proto"><span class="std std-ref">AWS IAM grpc credentials extension</span></a> for AWS-managed xDS.</p></li>
<li><p>grpc: added <a class="reference internal" href="../configuration/http/http_filters/grpc_stats_filter.html#config-http-filters-grpc-stats"><span class="std std-ref">gRPC stats filter</span></a> for collecting stats about gRPC calls and streaming message counts.</p></li>
<li><p>grpc-json: added support for <a class="reference internal" href="../api-v2/config/filter/http/transcoder/v2/transcoder.proto.html#envoy-api-field-config-filter-http-transcoder-v2-grpcjsontranscoder-ignore-unknown-query-parameters"><span class="std std-ref">ignoring unknown query parameters</span></a>.</p></li>
<li><p>grpc-json: added support for <a class="reference internal" href="../api-v2/config/filter/http/transcoder/v2/transcoder.proto.html#envoy-api-field-config-filter-http-transcoder-v2-grpcjsontranscoder-convert-grpc-status"><span class="std std-ref">the grpc-status-details-bin header</span></a>.</p></li>
<li><p>header to metadata: added <a class="reference internal" href="../api-v2/config/filter/http/header_to_metadata/v2/header_to_metadata.proto.html#envoy-api-enum-value-config-filter-http-header-to-metadata-v2-config-valuetype-protobuf-value"><span class="std std-ref">PROTOBUF_VALUE</span></a> and <a class="reference internal" href="../api-v2/config/filter/http/header_to_metadata/v2/header_to_metadata.proto.html#envoy-api-enum-config-filter-http-header-to-metadata-v2-config-valueencode"><span class="std std-ref">ValueEncode</span></a> to support protobuf Value and Base64 encoding.</p></li>
<li><p>http: added a default one hour idle timeout to upstream and downstream connections. HTTP connections with no streams and no activity will be closed after one hour unless the default idle_timeout is overridden. To disable upstream idle timeouts, set the <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-httpprotocoloptions-idle-timeout"><span class="std std-ref">idle_timeout</span></a> to zero in Cluster <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-common-http-protocol-options"><span class="std std-ref">http_protocol_options</span></a>. To disable downstream idle timeouts, either set <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-httpprotocoloptions-idle-timeout"><span class="std std-ref">idle_timeout</span></a> to zero in the HttpConnectionManager <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-common-http-protocol-options"><span class="std std-ref">common_http_protocol_options</span></a> or set the deprecated <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-idle-timeout"><span class="std std-ref">connection manager</span></a> field to zero.</p></li>
<li><p>http: added the ability to format HTTP/1.1 header keys using <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http1protocoloptions-header-key-format"><span class="std std-ref">header_key_format</span></a>.</p></li>
<li><p>http: added the ability to reject HTTP/1.1 requests with invalid HTTP header values, using the runtime feature <cite>envoy.reloadable_features.strict_header_validation</cite>.</p></li>
<li><p>http: changed Envoy to forward existing x-forwarded-proto from upstream trusted proxies. Guarded by <cite>envoy.reloadable_features.trusted_forwarded_proto</cite> which defaults true.</p></li>
<li><p>http: added the ability to configure the behavior of the server response header, via the <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-server-header-transformation"><span class="std std-ref">server_header_transformation</span></a> field.</p></li>
<li><p>http: added the ability to <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-merge-slashes"><span class="std std-ref">merge adjacent slashes</span></a> in the path.</p></li>
<li><p>http: <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-enum-value-config-filter-network-http-connection-manager-v2-httpconnectionmanager-codectype-auto"><span class="std std-ref">AUTO</span></a> codec protocol inference now requires the H2 magic bytes to be the first bytes transmitted by a downstream client.</p></li>
<li><p>http: remove h2c upgrade headers for HTTP/1 as h2c upgrades are currently not supported.</p></li>
<li><p>http: absolute URL support is now on by default. The prior behavior can be reinstated by setting <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-http1protocoloptions-allow-absolute-url"><span class="std std-ref">allow_absolute_url</span></a> to false.</p></li>
<li><p>http: support <a class="reference internal" href="../api-v2/config/filter/http/dynamic_forward_proxy/v2alpha/dynamic_forward_proxy.proto.html#envoy-api-msg-config-filter-http-dynamic-forward-proxy-v2alpha-perrouteconfig"><span class="std std-ref">host rewrite</span></a> in the dynamic forward proxy.</p></li>
<li><p>http: support <a class="reference internal" href="../api-v2/config/filter/http/grpc_http1_reverse_bridge/v2alpha1/config.proto.html#envoy-api-msg-config-filter-http-grpc-http1-reverse-bridge-v2alpha1-filterconfigperroute"><span class="std std-ref">disabling the filter per route</span></a> in the grpc http1 reverse bridge filter.</p></li>
<li><p>http: added the ability to <a class="reference internal" href="../api-v2/api/v2/core/protocol.proto.html#envoy-api-field-core-httpprotocoloptions-max-connection-duration"><span class="std std-ref">configure max connection duration</span></a> for downstream connections.</p></li>
<li><p>listeners: added <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-continue-on-listener-filters-timeout"><span class="std std-ref">continue_on_listener_filters_timeout</span></a> to configure whether a listener will still create a connection when listener filters time out.</p></li>
<li><p>listeners: added <a class="reference internal" href="../configuration/listeners/listener_filters/http_inspector.html#config-listener-filters-http-inspector"><span class="std std-ref">HTTP inspector listener filter</span></a>.</p></li>
<li><p>listeners: added <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-connection-balance-config"><span class="std std-ref">connection balancer</span></a>
configuration for TCP listeners.</p></li>
<li><p>listeners: listeners now close the listening socket as part of the draining stage as soon as workers stop accepting their connections.</p></li>
<li><p>lua: extended <cite>httpCall()</cite> and <cite>respond()</cite> APIs to accept headers with entry values that can be a string or table of strings.</p></li>
<li><p>lua: extended <cite>dynamicMetadata:set()</cite> to allow setting complex values.</p></li>
<li><p>metrics_service: added support for flushing histogram buckets.</p></li>
<li><p>outlier_detector: added <a class="reference internal" href="../intro/arch_overview/upstream/outlier.html#arch-overview-outlier-detection-grpc"><span class="std std-ref">support for the grpc-status response header</span></a> by mapping it to HTTP status. Guarded by envoy.reloadable_features.outlier_detection_support_for_grpc_status which defaults to true.</p></li>
<li><p>performance: new buffer implementation enabled by default (to disable add “–use-libevent-buffers 1” to the command-line arguments when starting Envoy).</p></li>
<li><p>performance: stats symbol table implementation (disabled by default; to test it, add “–use-fake-symbol-table 0” to the command-line arguments when starting Envoy).</p></li>
<li><p>rbac: added support for DNS SAN as <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-principal-authenticated-principal-name"><span class="std std-ref">principal_name</span></a>.</p></li>
<li><p>redis: added <a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-connpoolsettings-enable-command-stats"><span class="std std-ref">enable_command_stats</span></a> to enable <a class="reference internal" href="../intro/arch_overview/other_protocols/redis.html#arch-overview-redis-cluster-command-stats"><span class="std std-ref">per command statistics</span></a> for upstream clusters.</p></li>
<li><p>redis: added <a class="reference internal" href="../api-v2/config/filter/network/redis_proxy/v2/redis_proxy.proto.html#envoy-api-field-config-filter-network-redis-proxy-v2-redisproxy-connpoolsettings-read-policy"><span class="std std-ref">read_policy</span></a> to allow reading from redis replicas for Redis Cluster deployments.</p></li>
<li><p>redis: fixed a bug where the redis health checker ignored the upstream auth password.</p></li>
<li><p>redis: enable_hashtaging is always enabled when the upstream uses open source Redis cluster protocol.</p></li>
<li><p>regex: introduced new <a class="reference internal" href="../api-v2/type/matcher/regex.proto.html#envoy-api-msg-type-matcher-regexmatcher"><span class="std std-ref">RegexMatcher</span></a> type that
provides a safe regex implementation for untrusted user input. This type is now used in all
configuration that processes user provided input. See <a class="reference internal" href="version_history.html#deprecated"><span class="std std-ref">deprecated configuration details</span></a> for more information.</p></li>
<li><p>rbac: added conditions to the policy, see <a class="reference internal" href="../api-v2/config/rbac/v2/rbac.proto.html#envoy-api-field-config-rbac-v2-policy-condition"><span class="std std-ref">condition</span></a>.</p></li>
<li><p>router: added <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-stats"><span class="std std-ref">rq_retry_skipped_request_not_complete</span></a> counter stat to router stats.</p></li>
<li><p>router: <a class="reference internal" href="../intro/arch_overview/http/http_routing.html#arch-overview-http-routing-route-scope"><span class="std std-ref">scoped routing</span></a> is supported.</p></li>
<li><p>router: added new <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-on"><span class="std std-ref">retriable-headers</span></a> retry policy. Retries can now be configured to trigger by arbitrary response header matching.</p></li>
<li><p>router: added ability for most specific header mutations to take precedence, see <a class="reference internal" href="../api-v2/api/v2/route.proto.html#envoy-api-field-routeconfiguration-most-specific-header-mutations-wins"><span class="std std-ref">route configuration’s most specific
header mutations wins flag</span></a>.</p></li>
<li><p>router: added <a class="reference internal" href="../api-v2/config/filter/http/router/v2/router.proto.html#envoy-api-field-config-filter-http-router-v2-router-respect-expected-rq-timeout"><span class="std std-ref">respect_expected_rq_timeout</span></a> that instructs ingress Envoy to respect <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-expected-rq-timeout-ms"><span class="std std-ref">x-envoy-expected-rq-timeout-ms</span></a> header, populated by egress Envoy, when deriving timeout for upstream cluster.</p></li>
<li><p>router: added new <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-route-per-request-buffer-limit-bytes"><span class="std std-ref">retriable request headers</span></a> to route configuration, to allow limiting buffering for retries and shadowing.</p></li>
<li><p>router: added new <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-retrypolicy-retriable-request-headers"><span class="std std-ref">retriable request headers</span></a> to retry policies. Retries can now be configured to only trigger on request header match.</p></li>
<li><p>router: added the ability to match a route based on whether a TLS certificate has been
<a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-field-route-routematch-tlscontextmatchoptions-presented"><span class="std std-ref">presented</span></a> by the
downstream connection.</p></li>
<li><p>router check tool: added coverage reporting &amp; enforcement.</p></li>
<li><p>router check tool: added comprehensive coverage reporting.</p></li>
<li><p>router check tool: added deprecated field check.</p></li>
<li><p>router check tool: added flag for only printing results of failed tests.</p></li>
<li><p>router check tool: added support for outputting missing tests in the detailed coverage report.</p></li>
<li><p>router check tool: added coverage reporting for direct response routes.</p></li>
<li><p>runtime: allows for the ability to parse boolean values.</p></li>
<li><p>runtime: allows for the ability to parse integers as double values and vice-versa.</p></li>
<li><p>sds: added <a class="reference internal" href="../api-v2/api/v2/auth/tls.proto.html#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys-sds-secret-config"><span class="std std-ref">session_ticket_keys_sds_secret_config</span></a> for loading TLS Session Ticket Encryption Keys using SDS API.</p></li>
<li><p>server: added a post initialization lifecycle event, in addition to the existing startup and shutdown events.</p></li>
<li><p>server: added <a class="reference internal" href="../configuration/listeners/stats.html#config-listener-stats-per-handler"><span class="std std-ref">per-handler listener stats</span></a> and
<a class="reference internal" href="../operations/performance.html#operations-performance-watchdog"><span class="std std-ref">per-worker watchdog stats</span></a> to help diagnosing event
loop imbalance and general performance issues.</p></li>
<li><p>stats: added unit support to histogram.</p></li>
<li><p>tcp_proxy: the default <a class="reference internal" href="../api-v2/config/filter/network/tcp_proxy/v2/tcp_proxy.proto.html#envoy-api-field-config-filter-network-tcp-proxy-v2-tcpproxy-idle-timeout"><span class="std std-ref">idle_timeout</span></a> is now 1 hour.</p></li>
<li><p>thrift_proxy: fixed crashing bug on invalid transport/protocol framing.</p></li>
<li><p>thrift_proxy: added support for stripping service name from method when using the multiplexed protocol.</p></li>
<li><p>tls: added verification of IP address SAN fields in certificates against configured SANs in the certificate validation context.</p></li>
<li><p>tracing: added support to the Zipkin reporter for sending list of spans as Zipkin JSON v2 and protobuf message over HTTP.
certificate validation context.</p></li>
<li><p>tracing: added tags for gRPC response status and message.</p></li>
<li><p>tracing: added <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-tracing"><span class="std std-ref">max_path_tag_length</span></a> to support customizing the length of the request path included in the extracted <a class="reference external" href="https://github.com/opentracing/specification/blob/master/semantic_conventions.md#standard-span-tags-and-log-fields">http.url</a> tag.</p></li>
<li><p>upstream: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-close-connections-on-host-set-change"><span class="std std-ref">an option</span></a> that allows draining HTTP, TCP connection pools on cluster membership change.</p></li>
<li><p>upstream: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-transport-socket-matches"><span class="std std-ref">transport_socket_matches</span></a>, support using different transport socket config when connecting to different upstream endpoints within a cluster.</p></li>
<li><p>upstream: added network filter chains to upstream connections, see <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-filters"><span class="std std-ref">filters</span></a>.</p></li>
<li><p>upstream: added new <a class="reference internal" href="../intro/arch_overview/upstream/outlier.html#arch-overview-outlier-detection-failure-percentage"><span class="std std-ref">failure-percentage based outlier detection</span></a> mode.</p></li>
<li><p>upstream: uses p2c to select hosts for least-requests load balancers if all host weights are the same, even in cases where weights are not equal to 1.</p></li>
<li><p>upstream: added <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-zoneawarelbconfig-fail-traffic-on-panic"><span class="std std-ref">fail_traffic_on_panic</span></a> to allow failing all requests to a cluster during panic state.</p></li>
<li><p>zookeeper: parses responses and emits latency stats.</p></li>
</ul>
</div>
<div class="section" id="deprecated">
<h2>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The ORIGINAL_DST_LB <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-lb-policy"><span class="std std-ref">load balancing policy</span></a> is
deprecated, use CLUSTER_PROVIDED policy instead when configuring an <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-type"><span class="std std-ref">original destination
cluster</span></a>.</p></li>
<li><p>The <cite>regex</cite> field in <a class="reference internal" href="../api-v2/type/matcher/string.proto.html#envoy-api-msg-type-matcher-stringmatcher"><span class="std std-ref">StringMatcher</span></a> has been
deprecated in favor of the <cite>safe_regex</cite> field.</p></li>
<li><p>The <cite>regex</cite> field in <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-routematch"><span class="std std-ref">RouteMatch</span></a> has been
deprecated in favor of the <cite>safe_regex</cite> field.</p></li>
<li><p>The <cite>allow_origin</cite> and <cite>allow_origin_regex</cite> fields in <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-corspolicy"><span class="std std-ref">CorsPolicy</span></a> have been deprecated in favor of the
<cite>allow_origin_string_match</cite> field.</p></li>
<li><p>The <cite>pattern</cite> and <cite>method</cite> fields in <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-virtualcluster"><span class="std std-ref">VirtualCluster</span></a>
have been deprecated in favor of the <cite>headers</cite> field.</p></li>
<li><p>The <cite>regex_match</cite> field in <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-headermatcher"><span class="std std-ref">HeaderMatcher</span></a> has been
deprecated in favor of the <cite>safe_regex_match</cite> field.</p></li>
<li><p>The <cite>value</cite> and <cite>regex</cite> fields in <a class="reference internal" href="../api-v2/api/v2/route/route_components.proto.html#envoy-api-msg-route-queryparametermatcher"><span class="std std-ref">QueryParameterMatcher</span></a> has been deprecated in favor of the <cite>string_match</cite>
and <cite>present_match</cite> fields.</p></li>
<li><p>The <a class="reference internal" href="../operations/cli.html#cmdoption-allow-unknown-fields"><code class="xref std std-option docutils literal notranslate"><span class="pre">--allow-unknown-fields</span></code></a> command-line option,
use <a class="reference internal" href="../operations/cli.html#cmdoption-allow-unknown-static-fields"><code class="xref std std-option docutils literal notranslate"><span class="pre">--allow-unknown-static-fields</span></code></a> instead.</p></li>
<li><p>The use of HTTP_JSON_V1 <a class="reference internal" href="../api-v2/config/trace/v2/zipkin.proto.html#envoy-api-field-config-trace-v2-zipkinconfig-collector-endpoint-version"><span class="std std-ref">Zipkin collector endpoint version</span></a> or not explicitly
specifying it is deprecated, use HTTP_JSON or HTTP_PROTO instead.</p></li>
<li><p>The <cite>operation_name</cite> field in <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-msg-config-filter-network-http-connection-manager-v2-httpconnectionmanager"><span class="std std-ref">HTTP connection manager</span></a>
has been deprecated in favor of the <cite>traffic_direction</cite> field in
<a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-msg-listener"><span class="std std-ref">Listener</span></a>. The latter takes priority if
specified.</p></li>
<li><p>The <cite>tls_context</cite> field in <a class="reference internal" href="../api-v2/api/v2/listener/listener_components.proto.html#envoy-api-field-listener-filterchain-tls-context"><span class="std std-ref">Filter chain</span></a> message
and <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-tls-context"><span class="std std-ref">Cluster</span></a> message have been deprecated in favor of
<cite>transport_socket</cite> with name <cite>envoy.transport_sockets.tls</cite>. The latter takes priority if specified.</p></li>
<li><p>The <cite>use_http2</cite> field in
<a class="reference internal" href="../api-v2/api/v2/core/health_check.proto.html#envoy-api-msg-core-healthcheck-httphealthcheck"><span class="std std-ref">HTTP health checker</span></a> has been deprecated in
favor of the <cite>codec_client_type</cite> field.</p></li>
<li><p>The use of <a class="reference internal" href="../configuration/http/http_filters/grpc_http1_bridge_filter.html#config-http-filters-grpc-bridge"><span class="std std-ref">gRPC bridge filter</span></a> for
gRPC stats has been deprecated in favor of the dedicated <a class="reference internal" href="../configuration/http/http_filters/grpc_stats_filter.html#config-http-filters-grpc-stats"><span class="std std-ref">gRPC stats
filter</span></a></p></li>
<li><p>Ext_authz filter stats <cite>ok</cite>, <cite>error</cite>, <cite>denied</cite>, <cite>failure_mode_allowed</cite> in
<em>cluster.&lt;route target cluster&gt;.ext_authz.</em> namespace is deprecated.
Use <em>http.&lt;stat_prefix&gt;.ext_authz.</em> namespace to access same counters instead.</p></li>
<li><p>Use of google.protobuf.Struct for extension opaque configs is deprecated. Use google.protobuf.Any instead or pack
udpa.type.v1.TypedStruct in google.protobuf.Any.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="v1.11.2.html" class="btn btn-neutral float-right" title="1.11.2 (October 8, 2019)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="v1.12.1.html" class="btn btn-neutral float-left" title="1.12.1 (November 8, 2019)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016-2021, Envoy Project Authors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>